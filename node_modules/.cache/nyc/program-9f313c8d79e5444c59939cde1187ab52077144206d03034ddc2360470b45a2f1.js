/*!
 * program.js - program object for bcoin
 * Copyright (c) 2014-2015, Fedor Indutny (MIT License)
 * Copyright (c) 2014-2017, Christopher Jeffrey (MIT License).
 * https://github.com/bcoin-org/bcoin
 */'use strict';function cov_10g810vvr(){var path="E:\\Projects\\Test\\bcoin\\lib\\script\\program.js";var hash="a956e2502719564eca98cc28ae29e0ba5b3d7073";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"E:\\Projects\\Test\\bcoin\\lib\\script\\program.js",statementMap:{"0":{start:{line:10,column:15},end:{line:10,column:31}},"1":{start:{line:11,column:15},end:{line:11,column:34}},"2":{start:{line:12,column:20},end:{line:12,column:32}},"3":{start:{line:13,column:24},end:{line:13,column:43}},"4":{start:{line:32,column:4},end:{line:32,column:41}},"5":{start:{line:33,column:4},end:{line:33,column:42}},"6":{start:{line:34,column:4},end:{line:34,column:34}},"7":{start:{line:35,column:4},end:{line:35,column:50}},"8":{start:{line:37,column:4},end:{line:37,column:27}},"9":{start:{line:38,column:4},end:{line:38,column:21}},"10":{start:{line:47,column:4},end:{line:56,column:5}},"11":{start:{line:48,column:6},end:{line:49,column:45}},"12":{start:{line:49,column:8},end:{line:49,column:45}},"13":{start:{line:51,column:6},end:{line:52,column:45}},"14":{start:{line:52,column:8},end:{line:52,column:45}},"15":{start:{line:55,column:6},end:{line:55,column:42}},"16":{start:{line:59,column:4},end:{line:59,column:35}},"17":{start:{line:69,column:17},end:{line:69,column:31}},"18":{start:{line:70,column:4},end:{line:71,column:42}},"19":{start:{line:80,column:4},end:{line:80,column:59}},"20":{start:{line:89,column:17},end:{line:89,column:42}},"21":{start:{line:90,column:17},end:{line:90,column:64}},"22":{start:{line:91,column:4},end:{line:91,column:74}},"23":{start:{line:99,column:0},end:{line:99,column:25}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:29},end:{line:39,column:3}},line:31},"1":{name:"(anonymous_1)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:12},end:{line:60,column:3}},line:46},"2":{name:"(anonymous_2)",decl:{start:{line:68,column:2},end:{line:68,column:3}},loc:{start:{line:68,column:14},end:{line:72,column:3}},line:68},"3":{name:"(anonymous_3)",decl:{start:{line:79,column:2},end:{line:79,column:3}},loc:{start:{line:79,column:16},end:{line:81,column:3}},line:79},"4":{name:"(anonymous_4)",decl:{start:{line:88,column:2},end:{line:88,column:3}},loc:{start:{line:88,column:20},end:{line:92,column:3}},line:88}},branchMap:{"0":{loc:{start:{line:33,column:11},end:{line:33,column:40}},type:"binary-expr",locations:[{start:{line:33,column:11},end:{line:33,column:23}},{start:{line:33,column:27},end:{line:33,column:40}}],line:33},"1":{loc:{start:{line:35,column:11},end:{line:35,column:48}},type:"binary-expr",locations:[{start:{line:35,column:11},end:{line:35,column:27}},{start:{line:35,column:31},end:{line:35,column:48}}],line:35},"2":{loc:{start:{line:47,column:4},end:{line:56,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:56,column:5}},{start:{line:47,column:4},end:{line:56,column:5}}],line:47},"3":{loc:{start:{line:48,column:6},end:{line:49,column:45}},type:"if",locations:[{start:{line:48,column:6},end:{line:49,column:45}},{start:{line:48,column:6},end:{line:49,column:45}}],line:48},"4":{loc:{start:{line:51,column:6},end:{line:52,column:45}},type:"if",locations:[{start:{line:51,column:6},end:{line:52,column:45}},{start:{line:51,column:6},end:{line:52,column:45}}],line:51},"5":{loc:{start:{line:70,column:11},end:{line:71,column:41}},type:"binary-expr",locations:[{start:{line:70,column:11},end:{line:70,column:48}},{start:{line:71,column:9},end:{line:71,column:41}}],line:70}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a956e2502719564eca98cc28ae29e0ba5b3d7073"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_10g810vvr=function(){return actualCoverage;};}return actualCoverage;}cov_10g810vvr();const assert=(cov_10g810vvr().s[0]++,require('bsert'));const common=(cov_10g810vvr().s[1]++,require('./common'));const scriptTypes=(cov_10g810vvr().s[2]++,common.types);const{inspectSymbol}=(cov_10g810vvr().s[3]++,require('../utils'));/**
 * Witness Program
 * @alias module:script.Program
 * @property {Number} version - Ranges from 0 to 16.
 * @property {String|null} type - Null if malformed.
 * @property {Buffer} data - The hash (for now).
 */class Program{/**
   * Create a witness program.
   * @constructor
   * @param {Number} version
   * @param {Buffer} data
   */constructor(version,data){cov_10g810vvr().f[0]++;cov_10g810vvr().s[4]++;assert((version&0xff)===version);cov_10g810vvr().s[5]++;assert((cov_10g810vvr().b[0][0]++,version>=0)&&(cov_10g810vvr().b[0][1]++,version<=16));cov_10g810vvr().s[6]++;assert(Buffer.isBuffer(data));cov_10g810vvr().s[7]++;assert((cov_10g810vvr().b[1][0]++,data.length>=2)&&(cov_10g810vvr().b[1][1]++,data.length<=40));cov_10g810vvr().s[8]++;this.version=version;cov_10g810vvr().s[9]++;this.data=data;}/**
   * Get the witness program type.
   * @returns {ScriptType}
   */getType(){cov_10g810vvr().f[1]++;cov_10g810vvr().s[10]++;if(this.version===0){cov_10g810vvr().b[2][0]++;cov_10g810vvr().s[11]++;if(this.data.length===20){cov_10g810vvr().b[3][0]++;cov_10g810vvr().s[12]++;return scriptTypes.WITNESSPUBKEYHASH;}else{cov_10g810vvr().b[3][1]++;}cov_10g810vvr().s[13]++;if(this.data.length===32){cov_10g810vvr().b[4][0]++;cov_10g810vvr().s[14]++;return scriptTypes.WITNESSSCRIPTHASH;}else{cov_10g810vvr().b[4][1]++;}// Fail on bad version=0
cov_10g810vvr().s[15]++;return scriptTypes.WITNESSMALFORMED;}else{cov_10g810vvr().b[2][1]++;}// No interpretation of script (anyone can spend)
cov_10g810vvr().s[16]++;return scriptTypes.NONSTANDARD;}/**
   * Test whether the program is either
   * an unknown version or malformed.
   * @returns {Boolean}
   */isUnknown(){cov_10g810vvr().f[2]++;const type=(cov_10g810vvr().s[17]++,this.getType());cov_10g810vvr().s[18]++;return(cov_10g810vvr().b[5][0]++,type===scriptTypes.WITNESSMALFORMED)||(cov_10g810vvr().b[5][1]++,type===scriptTypes.NONSTANDARD);}/**
   * Test whether the program is malformed.
   * @returns {Boolean}
   */isMalformed(){cov_10g810vvr().f[3]++;cov_10g810vvr().s[19]++;return this.getType()===scriptTypes.WITNESSMALFORMED;}/**
   * Inspect the program.
   * @returns {String}
   */[inspectSymbol](){cov_10g810vvr().f[4]++;const data=(cov_10g810vvr().s[20]++,this.data.toString('hex'));const type=(cov_10g810vvr().s[21]++,common.typesByVal[this.getType()].toLowerCase());cov_10g810vvr().s[22]++;return`<Program: version=${this.version} data=${data} type=${type}>`;}}/*
 * Expose
 */cov_10g810vvr().s[23]++;module.exports=Program;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2dyYW0uanMiXSwibmFtZXMiOlsiYXNzZXJ0IiwicmVxdWlyZSIsImNvbW1vbiIsInNjcmlwdFR5cGVzIiwidHlwZXMiLCJpbnNwZWN0U3ltYm9sIiwiUHJvZ3JhbSIsImNvbnN0cnVjdG9yIiwidmVyc2lvbiIsImRhdGEiLCJCdWZmZXIiLCJpc0J1ZmZlciIsImxlbmd0aCIsImdldFR5cGUiLCJXSVRORVNTUFVCS0VZSEFTSCIsIldJVE5FU1NTQ1JJUFRIQVNIIiwiV0lUTkVTU01BTEZPUk1FRCIsIk5PTlNUQU5EQVJEIiwiaXNVbmtub3duIiwidHlwZSIsImlzTWFsZm9ybWVkIiwidG9TdHJpbmciLCJ0eXBlc0J5VmFsIiwidG9Mb3dlckNhc2UiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FFQSxhLDQvSEFRWTt5RkFOWixLQUFNQSxDQUFBQSxNQUFNLHlCQUFHQyxPQUFPLENBQUMsT0FBRCxDQUFWLENBQVosQ0FDQSxLQUFNQyxDQUFBQSxNQUFNLHlCQUFHRCxPQUFPLENBQUMsVUFBRCxDQUFWLENBQVosQ0FDQSxLQUFNRSxDQUFBQSxXQUFXLHlCQUFHRCxNQUFNLENBQUNFLEtBQVYsQ0FBakIsQ0FDQSxLQUFNLENBQUNDLGFBQUQsMEJBQWtCSixPQUFPLENBQUMsVUFBRCxDQUF6QixDQUFOLENBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FFQSxLQUFNSyxDQUFBQSxPQUFRLENBQ1o7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBRUVDLFdBQVcsQ0FBQ0MsT0FBRCxDQUFVQyxJQUFWLENBQWdCLCtDQUN6QlQsTUFBTSxDQUFDLENBQUNRLE9BQU8sQ0FBRyxJQUFYLElBQXFCQSxPQUF0QixDQUFOLENBRHlCLHVCQUV6QlIsTUFBTSxDQUFDLDJCQUFBUSxPQUFPLEVBQUksQ0FBWCw4QkFBZ0JBLE9BQU8sRUFBSSxFQUEzQixDQUFELENBQU4sQ0FGeUIsdUJBR3pCUixNQUFNLENBQUNVLE1BQU0sQ0FBQ0MsUUFBUCxDQUFnQkYsSUFBaEIsQ0FBRCxDQUFOLENBSHlCLHVCQUl6QlQsTUFBTSxDQUFDLDJCQUFBUyxJQUFJLENBQUNHLE1BQUwsRUFBZSxDQUFmLDhCQUFvQkgsSUFBSSxDQUFDRyxNQUFMLEVBQWUsRUFBbkMsQ0FBRCxDQUFOLENBSnlCLHVCQU16QixLQUFLSixPQUFMLENBQWVBLE9BQWYsQ0FOeUIsdUJBT3pCLEtBQUtDLElBQUwsQ0FBWUEsSUFBWixDQUNELENBRUQ7QUFDRjtBQUNBO0FBQ0EsS0FFRUksT0FBTyxFQUFHLGdEQUNSLEdBQUksS0FBS0wsT0FBTCxHQUFpQixDQUFyQixDQUF3QixtREFDdEIsR0FBSSxLQUFLQyxJQUFMLENBQVVHLE1BQVYsR0FBcUIsRUFBekIsQ0FDRSx5REFBT1QsQ0FBQUEsV0FBVyxDQUFDVyxpQkFBbkIsQ0FBcUMsQ0FEdkMsZ0NBRHNCLHdCQUl0QixHQUFJLEtBQUtMLElBQUwsQ0FBVUcsTUFBVixHQUFxQixFQUF6QixDQUNFLHlEQUFPVCxDQUFBQSxXQUFXLENBQUNZLGlCQUFuQixDQUFxQyxDQUR2QyxnQ0FHQTtBQVBzQix3QkFRdEIsTUFBT1osQ0FBQUEsV0FBVyxDQUFDYSxnQkFBbkIsQ0FDRCxDQVRELGdDQVdBO0FBWlEsd0JBYVIsTUFBT2IsQ0FBQUEsV0FBVyxDQUFDYyxXQUFuQixDQUNELENBRUQ7QUFDRjtBQUNBO0FBQ0E7QUFDQSxLQUVFQyxTQUFTLEVBQUcsd0JBQ1YsS0FBTUMsQ0FBQUEsSUFBSSwwQkFBRyxLQUFLTixPQUFMLEVBQUgsQ0FBVixDQURVLHdCQUVWLE1BQU8sMkJBQUFNLElBQUksR0FBS2hCLFdBQVcsQ0FBQ2EsZ0JBQXJCLDhCQUNGRyxJQUFJLEdBQUtoQixXQUFXLENBQUNjLFdBRG5CLENBQVAsQ0FFRCxDQUVEO0FBQ0Y7QUFDQTtBQUNBLEtBRUVHLFdBQVcsRUFBRyxnREFDWixNQUFPLE1BQUtQLE9BQUwsS0FBbUJWLFdBQVcsQ0FBQ2EsZ0JBQXRDLENBQ0QsQ0FFRDtBQUNGO0FBQ0E7QUFDQSxLQUVFLENBQUNYLGFBQUQsR0FBa0Isd0JBQ2hCLEtBQU1JLENBQUFBLElBQUksMEJBQUcsS0FBS0EsSUFBTCxDQUFVWSxRQUFWLENBQW1CLEtBQW5CLENBQUgsQ0FBVixDQUNBLEtBQU1GLENBQUFBLElBQUksMEJBQUdqQixNQUFNLENBQUNvQixVQUFQLENBQWtCLEtBQUtULE9BQUwsRUFBbEIsRUFBa0NVLFdBQWxDLEVBQUgsQ0FBVixDQUZnQix3QkFHaEIsTUFBUSxxQkFBb0IsS0FBS2YsT0FBUSxTQUFRQyxJQUFLLFNBQVFVLElBQUssR0FBbkUsQ0FDRCxDQXJFVyxDQXdFZDtBQUNBO0FBQ0EsRyx3QkFFQUssTUFBTSxDQUFDQyxPQUFQLENBQWlCbkIsT0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcclxuICogcHJvZ3JhbS5qcyAtIHByb2dyYW0gb2JqZWN0IGZvciBiY29pblxyXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQtMjAxNSwgRmVkb3IgSW5kdXRueSAoTUlUIExpY2Vuc2UpXHJcbiAqIENvcHlyaWdodCAoYykgMjAxNC0yMDE3LCBDaHJpc3RvcGhlciBKZWZmcmV5IChNSVQgTGljZW5zZSkuXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9iY29pbi1vcmcvYmNvaW5cclxuICovXHJcblxyXG4ndXNlIHN0cmljdCc7XHJcblxyXG5jb25zdCBhc3NlcnQgPSByZXF1aXJlKCdic2VydCcpO1xyXG5jb25zdCBjb21tb24gPSByZXF1aXJlKCcuL2NvbW1vbicpO1xyXG5jb25zdCBzY3JpcHRUeXBlcyA9IGNvbW1vbi50eXBlcztcclxuY29uc3Qge2luc3BlY3RTeW1ib2x9ID0gcmVxdWlyZSgnLi4vdXRpbHMnKTtcclxuXHJcbi8qKlxyXG4gKiBXaXRuZXNzIFByb2dyYW1cclxuICogQGFsaWFzIG1vZHVsZTpzY3JpcHQuUHJvZ3JhbVxyXG4gKiBAcHJvcGVydHkge051bWJlcn0gdmVyc2lvbiAtIFJhbmdlcyBmcm9tIDAgdG8gMTYuXHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfG51bGx9IHR5cGUgLSBOdWxsIGlmIG1hbGZvcm1lZC5cclxuICogQHByb3BlcnR5IHtCdWZmZXJ9IGRhdGEgLSBUaGUgaGFzaCAoZm9yIG5vdykuXHJcbiAqL1xyXG5cclxuY2xhc3MgUHJvZ3JhbSB7XHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlIGEgd2l0bmVzcyBwcm9ncmFtLlxyXG4gICAqIEBjb25zdHJ1Y3RvclxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB2ZXJzaW9uXHJcbiAgICogQHBhcmFtIHtCdWZmZXJ9IGRhdGFcclxuICAgKi9cclxuXHJcbiAgY29uc3RydWN0b3IodmVyc2lvbiwgZGF0YSkge1xyXG4gICAgYXNzZXJ0KCh2ZXJzaW9uICYgMHhmZikgPT09IHZlcnNpb24pO1xyXG4gICAgYXNzZXJ0KHZlcnNpb24gPj0gMCAmJiB2ZXJzaW9uIDw9IDE2KTtcclxuICAgIGFzc2VydChCdWZmZXIuaXNCdWZmZXIoZGF0YSkpO1xyXG4gICAgYXNzZXJ0KGRhdGEubGVuZ3RoID49IDIgJiYgZGF0YS5sZW5ndGggPD0gNDApO1xyXG5cclxuICAgIHRoaXMudmVyc2lvbiA9IHZlcnNpb247XHJcbiAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHRoZSB3aXRuZXNzIHByb2dyYW0gdHlwZS5cclxuICAgKiBAcmV0dXJucyB7U2NyaXB0VHlwZX1cclxuICAgKi9cclxuXHJcbiAgZ2V0VHlwZSgpIHtcclxuICAgIGlmICh0aGlzLnZlcnNpb24gPT09IDApIHtcclxuICAgICAgaWYgKHRoaXMuZGF0YS5sZW5ndGggPT09IDIwKVxyXG4gICAgICAgIHJldHVybiBzY3JpcHRUeXBlcy5XSVRORVNTUFVCS0VZSEFTSDtcclxuXHJcbiAgICAgIGlmICh0aGlzLmRhdGEubGVuZ3RoID09PSAzMilcclxuICAgICAgICByZXR1cm4gc2NyaXB0VHlwZXMuV0lUTkVTU1NDUklQVEhBU0g7XHJcblxyXG4gICAgICAvLyBGYWlsIG9uIGJhZCB2ZXJzaW9uPTBcclxuICAgICAgcmV0dXJuIHNjcmlwdFR5cGVzLldJVE5FU1NNQUxGT1JNRUQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTm8gaW50ZXJwcmV0YXRpb24gb2Ygc2NyaXB0IChhbnlvbmUgY2FuIHNwZW5kKVxyXG4gICAgcmV0dXJuIHNjcmlwdFR5cGVzLk5PTlNUQU5EQVJEO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGVzdCB3aGV0aGVyIHRoZSBwcm9ncmFtIGlzIGVpdGhlclxyXG4gICAqIGFuIHVua25vd24gdmVyc2lvbiBvciBtYWxmb3JtZWQuXHJcbiAgICogQHJldHVybnMge0Jvb2xlYW59XHJcbiAgICovXHJcblxyXG4gIGlzVW5rbm93bigpIHtcclxuICAgIGNvbnN0IHR5cGUgPSB0aGlzLmdldFR5cGUoKTtcclxuICAgIHJldHVybiB0eXBlID09PSBzY3JpcHRUeXBlcy5XSVRORVNTTUFMRk9STUVEXHJcbiAgICAgIHx8IHR5cGUgPT09IHNjcmlwdFR5cGVzLk5PTlNUQU5EQVJEO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGVzdCB3aGV0aGVyIHRoZSBwcm9ncmFtIGlzIG1hbGZvcm1lZC5cclxuICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cclxuICAgKi9cclxuXHJcbiAgaXNNYWxmb3JtZWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5nZXRUeXBlKCkgPT09IHNjcmlwdFR5cGVzLldJVE5FU1NNQUxGT1JNRUQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbnNwZWN0IHRoZSBwcm9ncmFtLlxyXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9XHJcbiAgICovXHJcblxyXG4gIFtpbnNwZWN0U3ltYm9sXSgpIHtcclxuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGEudG9TdHJpbmcoJ2hleCcpO1xyXG4gICAgY29uc3QgdHlwZSA9IGNvbW1vbi50eXBlc0J5VmFsW3RoaXMuZ2V0VHlwZSgpXS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgcmV0dXJuIGA8UHJvZ3JhbTogdmVyc2lvbj0ke3RoaXMudmVyc2lvbn0gZGF0YT0ke2RhdGF9IHR5cGU9JHt0eXBlfT5gO1xyXG4gIH1cclxufVxyXG5cclxuLypcclxuICogRXhwb3NlXHJcbiAqL1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBQcm9ncmFtO1xyXG4iXX0=