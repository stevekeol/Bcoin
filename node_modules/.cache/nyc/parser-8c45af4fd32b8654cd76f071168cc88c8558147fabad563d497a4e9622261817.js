/*!
 * parser.js - worker parser for bcoin
 * Copyright (c) 2014-2015, Fedor Indutny (MIT License)
 * Copyright (c) 2014-2017, Christopher Jeffrey (MIT License).
 * https://github.com/bcoin-org/bcoin
 */'use strict';function cov_u8mmjs1v0(){var path="E:\\Projects\\Test\\bcoin\\lib\\workers\\parser.js";var hash="0ded34cf87c8e324162e585c24a2692568d9d016";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"E:\\Projects\\Test\\bcoin\\lib\\workers\\parser.js",statementMap:{"0":{start:{line:10,column:15},end:{line:10,column:31}},"1":{start:{line:11,column:21},end:{line:11,column:38}},"2":{start:{line:12,column:16},end:{line:12,column:36}},"3":{start:{line:27,column:4},end:{line:27,column:12}},"4":{start:{line:29,column:4},end:{line:29,column:21}},"5":{start:{line:30,column:4},end:{line:30,column:23}},"6":{start:{line:31,column:4},end:{line:31,column:22}},"7":{start:{line:32,column:4},end:{line:32,column:19}},"8":{start:{line:36,column:4},end:{line:36,column:30}},"9":{start:{line:37,column:4},end:{line:37,column:28}},"10":{start:{line:39,column:4},end:{line:42,column:5}},"11":{start:{line:40,column:20},end:{line:40,column:43}},"12":{start:{line:41,column:6},end:{line:41,column:24}},"13":{start:{line:46,column:4},end:{line:46,column:52}},"14":{start:{line:48,column:4},end:{line:49,column:29}},"15":{start:{line:49,column:6},end:{line:49,column:29}},"16":{start:{line:51,column:20},end:{line:51,column:35}},"17":{start:{line:53,column:4},end:{line:58,column:5}},"18":{start:{line:54,column:20},end:{line:54,column:42}},"19":{start:{line:55,column:6},end:{line:55,column:44}},"20":{start:{line:56,column:6},end:{line:56,column:33}},"21":{start:{line:57,column:6},end:{line:57,column:19}},"22":{start:{line:60,column:4},end:{line:64,column:5}},"23":{start:{line:61,column:20},end:{line:61,column:40}},"24":{start:{line:62,column:6},end:{line:62,column:33}},"25":{start:{line:63,column:6},end:{line:63,column:19}},"26":{start:{line:66,column:18},end:{line:66,column:42}},"27":{start:{line:67,column:14},end:{line:67,column:15}},"28":{start:{line:69,column:4},end:{line:77,column:5}},"29":{start:{line:70,column:22},end:{line:70,column:37}},"30":{start:{line:71,column:18},end:{line:71,column:42}},"31":{start:{line:72,column:6},end:{line:75,column:45}},"32":{start:{line:73,column:8},end:{line:73,column:29}},"33":{start:{line:75,column:8},end:{line:75,column:45}},"34":{start:{line:76,column:6},end:{line:76,column:17}},"35":{start:{line:79,column:4},end:{line:79,column:42}},"36":{start:{line:81,column:4},end:{line:81,column:31}},"37":{start:{line:83,column:4},end:{line:83,column:17}},"38":{start:{line:87,column:17},end:{line:87,column:28}},"39":{start:{line:89,column:4},end:{line:101,column:5}},"40":{start:{line:90,column:6},end:{line:95,column:7}},"41":{start:{line:91,column:8},end:{line:91,column:40}},"42":{start:{line:93,column:8},end:{line:93,column:30}},"43":{start:{line:94,column:8},end:{line:94,column:15}},"44":{start:{line:97,column:6},end:{line:97,column:27}},"45":{start:{line:98,column:6},end:{line:98,column:37}},"46":{start:{line:100,column:6},end:{line:100,column:13}},"47":{start:{line:103,column:4},end:{line:103,column:21}},"48":{start:{line:104,column:4},end:{line:104,column:23}},"49":{start:{line:107,column:4},end:{line:112,column:5}},"50":{start:{line:108,column:6},end:{line:108,column:46}},"51":{start:{line:110,column:6},end:{line:110,column:28}},"52":{start:{line:111,column:6},end:{line:111,column:13}},"53":{start:{line:114,column:4},end:{line:117,column:5}},"54":{start:{line:115,column:6},end:{line:115,column:60}},"55":{start:{line:116,column:6},end:{line:116,column:13}},"56":{start:{line:119,column:4},end:{line:119,column:26}},"57":{start:{line:121,column:4},end:{line:121,column:32}},"58":{start:{line:125,column:15},end:{line:125,column:41}},"59":{start:{line:126,column:16},end:{line:126,column:39}},"60":{start:{line:127,column:17},end:{line:127,column:43}},"61":{start:{line:128,column:4},end:{line:128,column:37}},"62":{start:{line:132,column:4},end:{line:177,column:5}},"63":{start:{line:134,column:8},end:{line:134,column:47}},"64":{start:{line:136,column:8},end:{line:136,column:49}},"65":{start:{line:138,column:8},end:{line:138,column:47}},"66":{start:{line:140,column:8},end:{line:140,column:49}},"67":{start:{line:142,column:8},end:{line:142,column:55}},"68":{start:{line:144,column:8},end:{line:144,column:49}},"69":{start:{line:146,column:8},end:{line:146,column:55}},"70":{start:{line:148,column:8},end:{line:148,column:48}},"71":{start:{line:150,column:8},end:{line:150,column:54}},"72":{start:{line:152,column:8},end:{line:152,column:54}},"73":{start:{line:154,column:8},end:{line:154,column:60}},"74":{start:{line:156,column:8},end:{line:156,column:53}},"75":{start:{line:158,column:8},end:{line:158,column:59}},"76":{start:{line:160,column:8},end:{line:160,column:52}},"77":{start:{line:162,column:8},end:{line:162,column:58}},"78":{start:{line:164,column:8},end:{line:164,column:50}},"79":{start:{line:166,column:8},end:{line:166,column:56}},"80":{start:{line:168,column:8},end:{line:168,column:48}},"81":{start:{line:170,column:8},end:{line:170,column:54}},"82":{start:{line:172,column:8},end:{line:172,column:50}},"83":{start:{line:174,column:8},end:{line:174,column:56}},"84":{start:{line:176,column:8},end:{line:176,column:43}},"85":{start:{line:193,column:4},end:{line:193,column:17}},"86":{start:{line:194,column:4},end:{line:194,column:19}},"87":{start:{line:195,column:4},end:{line:195,column:21}},"88":{start:{line:203,column:0},end:{line:203,column:24}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:16},end:{line:33,column:3}},line:26},"1":{name:"(anonymous_1)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:13},end:{line:43,column:3}},line:35},"2":{name:"(anonymous_2)",decl:{start:{line:45,column:2},end:{line:45,column:3}},loc:{start:{line:45,column:13},end:{line:84,column:3}},line:45},"3":{name:"(anonymous_3)",decl:{start:{line:86,column:2},end:{line:86,column:3}},loc:{start:{line:86,column:14},end:{line:122,column:3}},line:86},"4":{name:"(anonymous_4)",decl:{start:{line:124,column:2},end:{line:124,column:3}},loc:{start:{line:124,column:20},end:{line:129,column:3}},line:124},"5":{name:"(anonymous_5)",decl:{start:{line:131,column:2},end:{line:131,column:3}},loc:{start:{line:131,column:28},end:{line:178,column:3}},line:131},"6":{name:"(anonymous_6)",decl:{start:{line:192,column:2},end:{line:192,column:3}},loc:{start:{line:192,column:29},end:{line:196,column:3}},line:192}},branchMap:{"0":{loc:{start:{line:48,column:4},end:{line:49,column:29}},type:"if",locations:[{start:{line:48,column:4},end:{line:49,column:29}},{start:{line:48,column:4},end:{line:49,column:29}}],line:48},"1":{loc:{start:{line:53,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:53,column:4},end:{line:58,column:5}},{start:{line:53,column:4},end:{line:58,column:5}}],line:53},"2":{loc:{start:{line:60,column:4},end:{line:64,column:5}},type:"if",locations:[{start:{line:60,column:4},end:{line:64,column:5}},{start:{line:60,column:4},end:{line:64,column:5}}],line:60},"3":{loc:{start:{line:72,column:6},end:{line:75,column:45}},type:"if",locations:[{start:{line:72,column:6},end:{line:75,column:45}},{start:{line:72,column:6},end:{line:75,column:45}}],line:72},"4":{loc:{start:{line:89,column:4},end:{line:101,column:5}},type:"if",locations:[{start:{line:89,column:4},end:{line:101,column:5}},{start:{line:89,column:4},end:{line:101,column:5}}],line:89},"5":{loc:{start:{line:114,column:4},end:{line:117,column:5}},type:"if",locations:[{start:{line:114,column:4},end:{line:117,column:5}},{start:{line:114,column:4},end:{line:117,column:5}}],line:114},"6":{loc:{start:{line:132,column:4},end:{line:177,column:5}},type:"switch",locations:[{start:{line:133,column:6},end:{line:134,column:47}},{start:{line:135,column:6},end:{line:136,column:49}},{start:{line:137,column:6},end:{line:138,column:47}},{start:{line:139,column:6},end:{line:140,column:49}},{start:{line:141,column:6},end:{line:142,column:55}},{start:{line:143,column:6},end:{line:144,column:49}},{start:{line:145,column:6},end:{line:146,column:55}},{start:{line:147,column:6},end:{line:148,column:48}},{start:{line:149,column:6},end:{line:150,column:54}},{start:{line:151,column:6},end:{line:152,column:54}},{start:{line:153,column:6},end:{line:154,column:60}},{start:{line:155,column:6},end:{line:156,column:53}},{start:{line:157,column:6},end:{line:158,column:59}},{start:{line:159,column:6},end:{line:160,column:52}},{start:{line:161,column:6},end:{line:162,column:58}},{start:{line:163,column:6},end:{line:164,column:50}},{start:{line:165,column:6},end:{line:166,column:56}},{start:{line:167,column:6},end:{line:168,column:48}},{start:{line:169,column:6},end:{line:170,column:54}},{start:{line:171,column:6},end:{line:172,column:50}},{start:{line:173,column:6},end:{line:174,column:56}},{start:{line:175,column:6},end:{line:176,column:43}}],line:132}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"0ded34cf87c8e324162e585c24a2692568d9d016"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_u8mmjs1v0=function(){return actualCoverage;};}return actualCoverage;}cov_u8mmjs1v0();const assert=(cov_u8mmjs1v0().s[0]++,require('bsert'));const EventEmitter=(cov_u8mmjs1v0().s[1]++,require('events'));const packets=(cov_u8mmjs1v0().s[2]++,require('./packets'));/**
 * Parser
 * @alias module:workers.Parser
 * @extends EventEmitter
 */class Parser extends EventEmitter{/**
   * Create a parser.
   * @constructor
   */constructor(){cov_u8mmjs1v0().f[0]++;cov_u8mmjs1v0().s[3]++;super();cov_u8mmjs1v0().s[4]++;this.waiting=9;cov_u8mmjs1v0().s[5]++;this.header=null;cov_u8mmjs1v0().s[6]++;this.pending=[];cov_u8mmjs1v0().s[7]++;this.total=0;}feed(data){cov_u8mmjs1v0().f[1]++;cov_u8mmjs1v0().s[8]++;this.total+=data.length;cov_u8mmjs1v0().s[9]++;this.pending.push(data);cov_u8mmjs1v0().s[10]++;while(this.total>=this.waiting){const chunk=(cov_u8mmjs1v0().s[11]++,this.read(this.waiting));cov_u8mmjs1v0().s[12]++;this.parse(chunk);}}read(size){cov_u8mmjs1v0().f[2]++;cov_u8mmjs1v0().s[13]++;assert(this.total>=size,'Reading too much.');cov_u8mmjs1v0().s[14]++;if(size===0){cov_u8mmjs1v0().b[0][0]++;cov_u8mmjs1v0().s[15]++;return Buffer.alloc(0);}else{cov_u8mmjs1v0().b[0][1]++;}const pending=(cov_u8mmjs1v0().s[16]++,this.pending[0]);cov_u8mmjs1v0().s[17]++;if(pending.length>size){cov_u8mmjs1v0().b[1][0]++;const chunk=(cov_u8mmjs1v0().s[18]++,pending.slice(0,size));cov_u8mmjs1v0().s[19]++;this.pending[0]=pending.slice(size);cov_u8mmjs1v0().s[20]++;this.total-=chunk.length;cov_u8mmjs1v0().s[21]++;return chunk;}else{cov_u8mmjs1v0().b[1][1]++;}cov_u8mmjs1v0().s[22]++;if(pending.length===size){cov_u8mmjs1v0().b[2][0]++;const chunk=(cov_u8mmjs1v0().s[23]++,this.pending.shift());cov_u8mmjs1v0().s[24]++;this.total-=chunk.length;cov_u8mmjs1v0().s[25]++;return chunk;}else{cov_u8mmjs1v0().b[2][1]++;}const chunk=(cov_u8mmjs1v0().s[26]++,Buffer.allocUnsafe(size));let off=(cov_u8mmjs1v0().s[27]++,0);cov_u8mmjs1v0().s[28]++;while(off<chunk.length){const pending=(cov_u8mmjs1v0().s[29]++,this.pending[0]);const len=(cov_u8mmjs1v0().s[30]++,pending.copy(chunk,off));cov_u8mmjs1v0().s[31]++;if(len===pending.length){cov_u8mmjs1v0().b[3][0]++;cov_u8mmjs1v0().s[32]++;this.pending.shift();}else{cov_u8mmjs1v0().b[3][1]++;cov_u8mmjs1v0().s[33]++;this.pending[0]=pending.slice(len);}cov_u8mmjs1v0().s[34]++;off+=len;}cov_u8mmjs1v0().s[35]++;assert.strictEqual(off,chunk.length);cov_u8mmjs1v0().s[36]++;this.total-=chunk.length;cov_u8mmjs1v0().s[37]++;return chunk;}parse(data){cov_u8mmjs1v0().f[3]++;let header=(cov_u8mmjs1v0().s[38]++,this.header);cov_u8mmjs1v0().s[39]++;if(!header){cov_u8mmjs1v0().b[4][0]++;cov_u8mmjs1v0().s[40]++;try{cov_u8mmjs1v0().s[41]++;header=this.parseHeader(data);}catch(e){cov_u8mmjs1v0().s[42]++;this.emit('error',e);cov_u8mmjs1v0().s[43]++;return;}cov_u8mmjs1v0().s[44]++;this.header=header;cov_u8mmjs1v0().s[45]++;this.waiting=header.size+1;cov_u8mmjs1v0().s[46]++;return;}else{cov_u8mmjs1v0().b[4][1]++;}cov_u8mmjs1v0().s[47]++;this.waiting=9;cov_u8mmjs1v0().s[48]++;this.header=null;let packet;cov_u8mmjs1v0().s[49]++;try{cov_u8mmjs1v0().s[50]++;packet=this.parsePacket(header,data);}catch(e){cov_u8mmjs1v0().s[51]++;this.emit('error',e);cov_u8mmjs1v0().s[52]++;return;}cov_u8mmjs1v0().s[53]++;if(data[data.length-1]!==0x0a){cov_u8mmjs1v0().b[5][0]++;cov_u8mmjs1v0().s[54]++;this.emit('error',new Error('No trailing newline.'));cov_u8mmjs1v0().s[55]++;return;}else{cov_u8mmjs1v0().b[5][1]++;}cov_u8mmjs1v0().s[56]++;packet.id=header.id;cov_u8mmjs1v0().s[57]++;this.emit('packet',packet);}parseHeader(data){cov_u8mmjs1v0().f[4]++;const id=(cov_u8mmjs1v0().s[58]++,data.readUInt32LE(0,true));const cmd=(cov_u8mmjs1v0().s[59]++,data.readUInt8(4,true));const size=(cov_u8mmjs1v0().s[60]++,data.readUInt32LE(5,true));cov_u8mmjs1v0().s[61]++;return new Header(id,cmd,size);}parsePacket(header,data){cov_u8mmjs1v0().f[5]++;cov_u8mmjs1v0().s[62]++;switch(header.cmd){case packets.types.ENV:cov_u8mmjs1v0().b[6][0]++;cov_u8mmjs1v0().s[63]++;return packets.EnvPacket.fromRaw(data);case packets.types.EVENT:cov_u8mmjs1v0().b[6][1]++;cov_u8mmjs1v0().s[64]++;return packets.EventPacket.fromRaw(data);case packets.types.LOG:cov_u8mmjs1v0().b[6][2]++;cov_u8mmjs1v0().s[65]++;return packets.LogPacket.fromRaw(data);case packets.types.ERROR:cov_u8mmjs1v0().b[6][3]++;cov_u8mmjs1v0().s[66]++;return packets.ErrorPacket.fromRaw(data);case packets.types.ERRORRESULT:cov_u8mmjs1v0().b[6][4]++;cov_u8mmjs1v0().s[67]++;return packets.ErrorResultPacket.fromRaw(data);case packets.types.CHECK:cov_u8mmjs1v0().b[6][5]++;cov_u8mmjs1v0().s[68]++;return packets.CheckPacket.fromRaw(data);case packets.types.CHECKRESULT:cov_u8mmjs1v0().b[6][6]++;cov_u8mmjs1v0().s[69]++;return packets.CheckResultPacket.fromRaw(data);case packets.types.SIGN:cov_u8mmjs1v0().b[6][7]++;cov_u8mmjs1v0().s[70]++;return packets.SignPacket.fromRaw(data);case packets.types.SIGNRESULT:cov_u8mmjs1v0().b[6][8]++;cov_u8mmjs1v0().s[71]++;return packets.SignResultPacket.fromRaw(data);case packets.types.CHECKINPUT:cov_u8mmjs1v0().b[6][9]++;cov_u8mmjs1v0().s[72]++;return packets.CheckInputPacket.fromRaw(data);case packets.types.CHECKINPUTRESULT:cov_u8mmjs1v0().b[6][10]++;cov_u8mmjs1v0().s[73]++;return packets.CheckInputResultPacket.fromRaw(data);case packets.types.SIGNINPUT:cov_u8mmjs1v0().b[6][11]++;cov_u8mmjs1v0().s[74]++;return packets.SignInputPacket.fromRaw(data);case packets.types.SIGNINPUTRESULT:cov_u8mmjs1v0().b[6][12]++;cov_u8mmjs1v0().s[75]++;return packets.SignInputResultPacket.fromRaw(data);case packets.types.ECVERIFY:cov_u8mmjs1v0().b[6][13]++;cov_u8mmjs1v0().s[76]++;return packets.ECVerifyPacket.fromRaw(data);case packets.types.ECVERIFYRESULT:cov_u8mmjs1v0().b[6][14]++;cov_u8mmjs1v0().s[77]++;return packets.ECVerifyResultPacket.fromRaw(data);case packets.types.ECSIGN:cov_u8mmjs1v0().b[6][15]++;cov_u8mmjs1v0().s[78]++;return packets.ECSignPacket.fromRaw(data);case packets.types.ECSIGNRESULT:cov_u8mmjs1v0().b[6][16]++;cov_u8mmjs1v0().s[79]++;return packets.ECSignResultPacket.fromRaw(data);case packets.types.MINE:cov_u8mmjs1v0().b[6][17]++;cov_u8mmjs1v0().s[80]++;return packets.MinePacket.fromRaw(data);case packets.types.MINERESULT:cov_u8mmjs1v0().b[6][18]++;cov_u8mmjs1v0().s[81]++;return packets.MineResultPacket.fromRaw(data);case packets.types.SCRYPT:cov_u8mmjs1v0().b[6][19]++;cov_u8mmjs1v0().s[82]++;return packets.ScryptPacket.fromRaw(data);case packets.types.SCRYPTRESULT:cov_u8mmjs1v0().b[6][20]++;cov_u8mmjs1v0().s[83]++;return packets.ScryptResultPacket.fromRaw(data);default:cov_u8mmjs1v0().b[6][21]++;cov_u8mmjs1v0().s[84]++;throw new Error('Unknown packet.');}}}/**
 * Header
 * @ignore
 */class Header{/**
   * Create a header.
   * @constructor
   */constructor(id,cmd,size){cov_u8mmjs1v0().f[6]++;cov_u8mmjs1v0().s[85]++;this.id=id;cov_u8mmjs1v0().s[86]++;this.cmd=cmd;cov_u8mmjs1v0().s[87]++;this.size=size;}}/*
 * Expose
 */cov_u8mmjs1v0().s[88]++;module.exports=Parser;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhcnNlci5qcyJdLCJuYW1lcyI6WyJhc3NlcnQiLCJyZXF1aXJlIiwiRXZlbnRFbWl0dGVyIiwicGFja2V0cyIsIlBhcnNlciIsImNvbnN0cnVjdG9yIiwid2FpdGluZyIsImhlYWRlciIsInBlbmRpbmciLCJ0b3RhbCIsImZlZWQiLCJkYXRhIiwibGVuZ3RoIiwicHVzaCIsImNodW5rIiwicmVhZCIsInBhcnNlIiwic2l6ZSIsIkJ1ZmZlciIsImFsbG9jIiwic2xpY2UiLCJzaGlmdCIsImFsbG9jVW5zYWZlIiwib2ZmIiwibGVuIiwiY29weSIsInN0cmljdEVxdWFsIiwicGFyc2VIZWFkZXIiLCJlIiwiZW1pdCIsInBhY2tldCIsInBhcnNlUGFja2V0IiwiRXJyb3IiLCJpZCIsInJlYWRVSW50MzJMRSIsImNtZCIsInJlYWRVSW50OCIsIkhlYWRlciIsInR5cGVzIiwiRU5WIiwiRW52UGFja2V0IiwiZnJvbVJhdyIsIkVWRU5UIiwiRXZlbnRQYWNrZXQiLCJMT0ciLCJMb2dQYWNrZXQiLCJFUlJPUiIsIkVycm9yUGFja2V0IiwiRVJST1JSRVNVTFQiLCJFcnJvclJlc3VsdFBhY2tldCIsIkNIRUNLIiwiQ2hlY2tQYWNrZXQiLCJDSEVDS1JFU1VMVCIsIkNoZWNrUmVzdWx0UGFja2V0IiwiU0lHTiIsIlNpZ25QYWNrZXQiLCJTSUdOUkVTVUxUIiwiU2lnblJlc3VsdFBhY2tldCIsIkNIRUNLSU5QVVQiLCJDaGVja0lucHV0UGFja2V0IiwiQ0hFQ0tJTlBVVFJFU1VMVCIsIkNoZWNrSW5wdXRSZXN1bHRQYWNrZXQiLCJTSUdOSU5QVVQiLCJTaWduSW5wdXRQYWNrZXQiLCJTSUdOSU5QVVRSRVNVTFQiLCJTaWduSW5wdXRSZXN1bHRQYWNrZXQiLCJFQ1ZFUklGWSIsIkVDVmVyaWZ5UGFja2V0IiwiRUNWRVJJRllSRVNVTFQiLCJFQ1ZlcmlmeVJlc3VsdFBhY2tldCIsIkVDU0lHTiIsIkVDU2lnblBhY2tldCIsIkVDU0lHTlJFU1VMVCIsIkVDU2lnblJlc3VsdFBhY2tldCIsIk1JTkUiLCJNaW5lUGFja2V0IiwiTUlORVJFU1VMVCIsIk1pbmVSZXN1bHRQYWNrZXQiLCJTQ1JZUFQiLCJTY3J5cHRQYWNrZXQiLCJTQ1JZUFRSRVNVTFQiLCJTY3J5cHRSZXN1bHRQYWNrZXQiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FFQSxhLCtvVEFRWTt5RkFOWixLQUFNQSxDQUFBQSxNQUFNLHlCQUFHQyxPQUFPLENBQUMsT0FBRCxDQUFWLENBQVosQ0FDQSxLQUFNQyxDQUFBQSxZQUFZLHlCQUFHRCxPQUFPLENBQUMsUUFBRCxDQUFWLENBQWxCLENBQ0EsS0FBTUUsQ0FBQUEsT0FBTyx5QkFBR0YsT0FBTyxDQUFDLFdBQUQsQ0FBVixDQUFiLENBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUVBLEtBQU1HLENBQUFBLE1BQU4sUUFBcUJGLENBQUFBLFlBQWEsQ0FDaEM7QUFDRjtBQUNBO0FBQ0EsS0FFRUcsV0FBVyxFQUFHLCtDQUNaLFFBRFksdUJBR1osS0FBS0MsT0FBTCxDQUFlLENBQWYsQ0FIWSx1QkFJWixLQUFLQyxNQUFMLENBQWMsSUFBZCxDQUpZLHVCQUtaLEtBQUtDLE9BQUwsQ0FBZSxFQUFmLENBTFksdUJBTVosS0FBS0MsS0FBTCxDQUFhLENBQWIsQ0FDRCxDQUVEQyxJQUFJLENBQUNDLElBQUQsQ0FBTywrQ0FDVCxLQUFLRixLQUFMLEVBQWNFLElBQUksQ0FBQ0MsTUFBbkIsQ0FEUyx1QkFFVCxLQUFLSixPQUFMLENBQWFLLElBQWIsQ0FBa0JGLElBQWxCLEVBRlMsd0JBSVQsTUFBTyxLQUFLRixLQUFMLEVBQWMsS0FBS0gsT0FBMUIsQ0FBbUMsQ0FDakMsS0FBTVEsQ0FBQUEsS0FBSywwQkFBRyxLQUFLQyxJQUFMLENBQVUsS0FBS1QsT0FBZixDQUFILENBQVgsQ0FEaUMsd0JBRWpDLEtBQUtVLEtBQUwsQ0FBV0YsS0FBWCxFQUNELENBQ0YsQ0FFREMsSUFBSSxDQUFDRSxJQUFELENB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YjtBQUNBO0FBQ0EsRyx3QkFFQWlFLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQi9FLE1BQWpCIiwic291cmNlc0NvbnRlbnQiOlsiLyohXHJcbiAqIHBhcnNlci5qcyAtIHdvcmtlciBwYXJzZXIgZm9yIGJjb2luXHJcbiAqIENvcHlyaWdodCAoYykgMjAxNC0yMDE1LCBGZWRvciBJbmR1dG55IChNSVQgTGljZW5zZSlcclxuICogQ29weXJpZ2h0IChjKSAyMDE0LTIwMTcsIENocmlzdG9waGVyIEplZmZyZXkgKE1JVCBMaWNlbnNlKS5cclxuICogaHR0cHM6Ly9naXRodWIuY29tL2Jjb2luLW9yZy9iY29pblxyXG4gKi9cclxuXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbmNvbnN0IGFzc2VydCA9IHJlcXVpcmUoJ2JzZXJ0Jyk7XHJcbmNvbnN0IEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpO1xyXG5jb25zdCBwYWNrZXRzID0gcmVxdWlyZSgnLi9wYWNrZXRzJyk7XHJcblxyXG4vKipcclxuICogUGFyc2VyXHJcbiAqIEBhbGlhcyBtb2R1bGU6d29ya2Vycy5QYXJzZXJcclxuICogQGV4dGVuZHMgRXZlbnRFbWl0dGVyXHJcbiAqL1xyXG5cclxuY2xhc3MgUGFyc2VyIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcclxuICAvKipcclxuICAgKiBDcmVhdGUgYSBwYXJzZXIuXHJcbiAgICogQGNvbnN0cnVjdG9yXHJcbiAgICovXHJcblxyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgc3VwZXIoKTtcclxuXHJcbiAgICB0aGlzLndhaXRpbmcgPSA5O1xyXG4gICAgdGhpcy5oZWFkZXIgPSBudWxsO1xyXG4gICAgdGhpcy5wZW5kaW5nID0gW107XHJcbiAgICB0aGlzLnRvdGFsID0gMDtcclxuICB9XHJcblxyXG4gIGZlZWQoZGF0YSkge1xyXG4gICAgdGhpcy50b3RhbCArPSBkYXRhLmxlbmd0aDtcclxuICAgIHRoaXMucGVuZGluZy5wdXNoKGRhdGEpO1xyXG5cclxuICAgIHdoaWxlICh0aGlzLnRvdGFsID49IHRoaXMud2FpdGluZykge1xyXG4gICAgICBjb25zdCBjaHVuayA9IHRoaXMucmVhZCh0aGlzLndhaXRpbmcpO1xyXG4gICAgICB0aGlzLnBhcnNlKGNodW5rKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlYWQoc2l6ZSkge1xyXG4gICAgYXNzZXJ0KHRoaXMudG90YWwgPj0gc2l6ZSwgJ1JlYWRpbmcgdG9vIG11Y2guJyk7XHJcblxyXG4gICAgaWYgKHNpemUgPT09IDApXHJcbiAgICAgIHJldHVybiBCdWZmZXIuYWxsb2MoMCk7XHJcblxyXG4gICAgY29uc3QgcGVuZGluZyA9IHRoaXMucGVuZGluZ1swXTtcclxuXHJcbiAgICBpZiAocGVuZGluZy5sZW5ndGggPiBzaXplKSB7XHJcbiAgICAgIGNvbnN0IGNodW5rID0gcGVuZGluZy5zbGljZSgwLCBzaXplKTtcclxuICAgICAgdGhpcy5wZW5kaW5nWzBdID0gcGVuZGluZy5zbGljZShzaXplKTtcclxuICAgICAgdGhpcy50b3RhbCAtPSBjaHVuay5sZW5ndGg7XHJcbiAgICAgIHJldHVybiBjaHVuaztcclxuICAgIH1cclxuXHJcbiAgICBpZiAocGVuZGluZy5sZW5ndGggPT09IHNpemUpIHtcclxuICAgICAgY29uc3QgY2h1bmsgPSB0aGlzLnBlbmRpbmcuc2hpZnQoKTtcclxuICAgICAgdGhpcy50b3RhbCAtPSBjaHVuay5sZW5ndGg7XHJcbiAgICAgIHJldHVybiBjaHVuaztcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjaHVuayA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShzaXplKTtcclxuICAgIGxldCBvZmYgPSAwO1xyXG5cclxuICAgIHdoaWxlIChvZmYgPCBjaHVuay5sZW5ndGgpIHtcclxuICAgICAgY29uc3QgcGVuZGluZyA9IHRoaXMucGVuZGluZ1swXTtcclxuICAgICAgY29uc3QgbGVuID0gcGVuZGluZy5jb3B5KGNodW5rLCBvZmYpO1xyXG4gICAgICBpZiAobGVuID09PSBwZW5kaW5nLmxlbmd0aClcclxuICAgICAgICB0aGlzLnBlbmRpbmcuc2hpZnQoKTtcclxuICAgICAgZWxzZVxyXG4gICAgICAgIHRoaXMucGVuZGluZ1swXSA9IHBlbmRpbmcuc2xpY2UobGVuKTtcclxuICAgICAgb2ZmICs9IGxlbjtcclxuICAgIH1cclxuXHJcbiAgICBhc3NlcnQuc3RyaWN0RXF1YWwob2ZmLCBjaHVuay5sZW5ndGgpO1xyXG5cclxuICAgIHRoaXMudG90YWwgLT0gY2h1bmsubGVuZ3RoO1xyXG5cclxuICAgIHJldHVybiBjaHVuaztcclxuICB9XHJcblxyXG4gIHBhcnNlKGRhdGEpIHtcclxuICAgIGxldCBoZWFkZXIgPSB0aGlzLmhlYWRlcjtcclxuXHJcbiAgICBpZiAoIWhlYWRlcikge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGhlYWRlciA9IHRoaXMucGFyc2VIZWFkZXIoZGF0YSk7XHJcbiAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmhlYWRlciA9IGhlYWRlcjtcclxuICAgICAgdGhpcy53YWl0aW5nID0gaGVhZGVyLnNpemUgKyAxO1xyXG5cclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMud2FpdGluZyA9IDk7XHJcbiAgICB0aGlzLmhlYWRlciA9IG51bGw7XHJcblxyXG4gICAgbGV0IHBhY2tldDtcclxuICAgIHRyeSB7XHJcbiAgICAgIHBhY2tldCA9IHRoaXMucGFyc2VQYWNrZXQoaGVhZGVyLCBkYXRhKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGUpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGRhdGFbZGF0YS5sZW5ndGggLSAxXSAhPT0gMHgwYSkge1xyXG4gICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgbmV3IEVycm9yKCdObyB0cmFpbGluZyBuZXdsaW5lLicpKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHBhY2tldC5pZCA9IGhlYWRlci5pZDtcclxuXHJcbiAgICB0aGlzLmVtaXQoJ3BhY2tldCcsIHBhY2tldCk7XHJcbiAgfVxyXG5cclxuICBwYXJzZUhlYWRlcihkYXRhKSB7XHJcbiAgICBjb25zdCBpZCA9IGRhdGEucmVhZFVJbnQzMkxFKDAsIHRydWUpO1xyXG4gICAgY29uc3QgY21kID0gZGF0YS5yZWFkVUludDgoNCwgdHJ1ZSk7XHJcbiAgICBjb25zdCBzaXplID0gZGF0YS5yZWFkVUludDMyTEUoNSwgdHJ1ZSk7XHJcbiAgICByZXR1cm4gbmV3IEhlYWRlcihpZCwgY21kLCBzaXplKTtcclxuICB9XHJcblxyXG4gIHBhcnNlUGFja2V0KGhlYWRlciwgZGF0YSkge1xyXG4gICAgc3dpdGNoIChoZWFkZXIuY21kKSB7XHJcbiAgICAgIGNhc2UgcGFja2V0cy50eXBlcy5FTlY6XHJcbiAgICAgICAgcmV0dXJuIHBhY2tldHMuRW52UGFja2V0LmZyb21SYXcoZGF0YSk7XHJcbiAgICAgIGNhc2UgcGFja2V0cy50eXBlcy5FVkVOVDpcclxuICAgICAgICByZXR1cm4gcGFja2V0cy5FdmVudFBhY2tldC5mcm9tUmF3KGRhdGEpO1xyXG4gICAgICBjYXNlIHBhY2tldHMudHlwZXMuTE9HOlxyXG4gICAgICAgIHJldHVybiBwYWNrZXRzLkxvZ1BhY2tldC5mcm9tUmF3KGRhdGEpO1xyXG4gICAgICBjYXNlIHBhY2tldHMudHlwZXMuRVJST1I6XHJcbiAgICAgICAgcmV0dXJuIHBhY2tldHMuRXJyb3JQYWNrZXQuZnJvbVJhdyhkYXRhKTtcclxuICAgICAgY2FzZSBwYWNrZXRzLnR5cGVzLkVSUk9SUkVTVUxUOlxyXG4gICAgICAgIHJldHVybiBwYWNrZXRzLkVycm9yUmVzdWx0UGFja2V0LmZyb21SYXcoZGF0YSk7XHJcbiAgICAgIGNhc2UgcGFja2V0cy50eXBlcy5DSEVDSzpcclxuICAgICAgICByZXR1cm4gcGFja2V0cy5DaGVja1BhY2tldC5mcm9tUmF3KGRhdGEpO1xyXG4gICAgICBjYXNlIHBhY2tldHMudHlwZXMuQ0hFQ0tSRVNVTFQ6XHJcbiAgICAgICAgcmV0dXJuIHBhY2tldHMuQ2hlY2tSZXN1bHRQYWNrZXQuZnJvbVJhdyhkYXRhKTtcclxuICAgICAgY2FzZSBwYWNrZXRzLnR5cGVzLlNJR046XHJcbiAgICAgICAgcmV0dXJuIHBhY2tldHMuU2lnblBhY2tldC5mcm9tUmF3KGRhdGEpO1xyXG4gICAgICBjYXNlIHBhY2tldHMudHlwZXMuU0lHTlJFU1VMVDpcclxuICAgICAgICByZXR1cm4gcGFja2V0cy5TaWduUmVzdWx0UGFja2V0LmZyb21SYXcoZGF0YSk7XHJcbiAgICAgIGNhc2UgcGFja2V0cy50eXBlcy5DSEVDS0lOUFVUOlxyXG4gICAgICAgIHJldHVybiBwYWNrZXRzLkNoZWNrSW5wdXRQYWNrZXQuZnJvbVJhdyhkYXRhKTtcclxuICAgICAgY2FzZSBwYWNrZXRzLnR5cGVzLkNIRUNLSU5QVVRSRVNVTFQ6XHJcbiAgICAgICAgcmV0dXJuIHBhY2tldHMuQ2hlY2tJbnB1dFJlc3VsdFBhY2tldC5mcm9tUmF3KGRhdGEpO1xyXG4gICAgICBjYXNlIHBhY2tldHMudHlwZXMuU0lHTklOUFVUOlxyXG4gICAgICAgIHJldHVybiBwYWNrZXRzLlNpZ25JbnB1dFBhY2tldC5mcm9tUmF3KGRhdGEpO1xyXG4gICAgICBjYXNlIHBhY2tldHMudHlwZXMuU0lHTklOUFVUUkVTVUxUOlxyXG4gICAgICAgIHJldHVybiBwYWNrZXRzLlNpZ25JbnB1dFJlc3VsdFBhY2tldC5mcm9tUmF3KGRhdGEpO1xyXG4gICAgICBjYXNlIHBhY2tldHMudHlwZXMuRUNWRVJJRlk6XHJcbiAgICAgICAgcmV0dXJuIHBhY2tldHMuRUNWZXJpZnlQYWNrZXQuZnJvbVJhdyhkYXRhKTtcclxuICAgICAgY2FzZSBwYWNrZXRzLnR5cGVzLkVDVkVSSUZZUkVTVUxUOlxyXG4gICAgICAgIHJldHVybiBwYWNrZXRzLkVDVmVyaWZ5UmVzdWx0UGFja2V0LmZyb21SYXcoZGF0YSk7XHJcbiAgICAgIGNhc2UgcGFja2V0cy50eXBlcy5FQ1NJR046XHJcbiAgICAgICAgcmV0dXJuIHBhY2tldHMuRUNTaWduUGFja2V0LmZyb21SYXcoZGF0YSk7XHJcbiAgICAgIGNhc2UgcGFja2V0cy50eXBlcy5FQ1NJR05SRVNVTFQ6XHJcbiAgICAgICAgcmV0dXJuIHBhY2tldHMuRUNTaWduUmVzdWx0UGFja2V0LmZyb21SYXcoZGF0YSk7XHJcbiAgICAgIGNhc2UgcGFja2V0cy50eXBlcy5NSU5FOlxyXG4gICAgICAgIHJldHVybiBwYWNrZXRzLk1pbmVQYWNrZXQuZnJvbVJhdyhkYXRhKTtcclxuICAgICAgY2FzZSBwYWNrZXRzLnR5cGVzLk1JTkVSRVNVTFQ6XHJcbiAgICAgICAgcmV0dXJuIHBhY2tldHMuTWluZVJlc3VsdFBhY2tldC5mcm9tUmF3KGRhdGEpO1xyXG4gICAgICBjYXNlIHBhY2tldHMudHlwZXMuU0NSWVBUOlxyXG4gICAgICAgIHJldHVybiBwYWNrZXRzLlNjcnlwdFBhY2tldC5mcm9tUmF3KGRhdGEpO1xyXG4gICAgICBjYXNlIHBhY2tldHMudHlwZXMuU0NSWVBUUkVTVUxUOlxyXG4gICAgICAgIHJldHVybiBwYWNrZXRzLlNjcnlwdFJlc3VsdFBhY2tldC5mcm9tUmF3KGRhdGEpO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVW5rbm93biBwYWNrZXQuJyk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogSGVhZGVyXHJcbiAqIEBpZ25vcmVcclxuICovXHJcblxyXG5jbGFzcyBIZWFkZXIge1xyXG4gIC8qKlxyXG4gICAqIENyZWF0ZSBhIGhlYWRlci5cclxuICAgKiBAY29uc3RydWN0b3JcclxuICAgKi9cclxuXHJcbiAgY29uc3RydWN0b3IoaWQsIGNtZCwgc2l6ZSkge1xyXG4gICAgdGhpcy5pZCA9IGlkO1xyXG4gICAgdGhpcy5jbWQgPSBjbWQ7XHJcbiAgICB0aGlzLnNpemUgPSBzaXplO1xyXG4gIH1cclxufVxyXG5cclxuLypcclxuICogRXhwb3NlXHJcbiAqL1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBQYXJzZXI7XHJcbiJdfQ==