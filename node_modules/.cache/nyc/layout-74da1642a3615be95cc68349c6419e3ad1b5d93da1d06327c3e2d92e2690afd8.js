/*!
 * layout.js - data layout for wallets
 * Copyright (c) 2014-2017, Christopher Jeffrey (MIT License).
 * https://github.com/bcoin-org/bcoin
 */'use strict';function cov_1m0fjzdwgf(){var path="E:\\Projects\\Test\\bcoin\\lib\\wallet\\layout.js";var hash="811657c3d058cc14ccfb506095649fc0e7d99c3d";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"E:\\Projects\\Test\\bcoin\\lib\\wallet\\layout.js",statementMap:{"0":{start:{line:9,column:12},end:{line:9,column:26}},"1":{start:{line:33,column:0},end:{line:52,column:2}},"2":{start:{line:73,column:0},end:{line:90,column:2}}},fnMap:{},branchMap:{},s:{"0":0,"1":0,"2":0},f:{},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"811657c3d058cc14ccfb506095649fc0e7d99c3d"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1m0fjzdwgf=function(){return actualCoverage;};}return actualCoverage;}cov_1m0fjzdwgf();const bdb=(cov_1m0fjzdwgf().s[0]++,require('bdb'));/*
 * Wallet Database Layout:
 *  V -> db version
 *  O -> flags
 *  R -> chain sync state
 *  D -> wallet id depth
 *  p[addr-hash] -> wallet ids
 *  P[wid][addr-hash] -> path data
 *  r[wid][index][hash] -> path account index
 *  w[wid] -> wallet
 *  W[wid] -> wallet id
 *  l[id] -> wid
 *  a[wid][index] -> account
 *  i[wid][name] -> account index
 *  n[wid][index] -> account name
 *  h[height] -> recent block hash
 *  b[height] -> block->wid map
 *  o[hash][index] -> outpoint->wid map
 *  T[hash] -> tx->wid map
 *  t[wid]* -> txdb
 */cov_1m0fjzdwgf().s[1]++;exports.wdb={V:bdb.key('V'),O:bdb.key('O'),R:bdb.key('R'),D:bdb.key('D'),p:bdb.key('p',['hash']),P:bdb.key('P',['uint32','hash']),r:bdb.key('r',['uint32','uint32','hash']),w:bdb.key('w',['uint32']),W:bdb.key('W',['uint32']),l:bdb.key('l',['ascii']),a:bdb.key('a',['uint32','uint32']),i:bdb.key('i',['uint32','ascii']),n:bdb.key('n',['uint32','uint32']),h:bdb.key('h',['uint32']),b:bdb.key('b',['uint32']),o:bdb.key('o',['hash256','uint32']),T:bdb.key('T',['hash256']),t:bdb.key('t',['uint32'])};/*
 * TXDB Database Layout:
 *   R -> wallet balance
 *   r[account] -> account balance
 *   t[hash] -> extended tx
 *   c[hash][index] -> coin
 *   d[hash][index] -> undo coin
 *   s[hash][index] -> spent by hash
 *   p[hash] -> dummy (pending flag)
 *   m[time][hash] -> dummy (tx by time)
 *   h[height][hash] -> dummy (tx by height)
 *   T[account][hash] -> dummy (tx by account)
 *   P[account][hash] -> dummy (pending tx by account)
 *   M[account][time][hash] -> dummy (tx by time + account)
 *   H[account][height][hash] -> dummy (tx by height + account)
 *   C[account][hash][index] -> dummy (coin by account)
 *   b[height] -> block record
 */cov_1m0fjzdwgf().s[2]++;exports.txdb={prefix:bdb.key('t',['uint32']),R:bdb.key('R'),r:bdb.key('r',['uint32']),t:bdb.key('t',['hash256']),c:bdb.key('c',['hash256','uint32']),d:bdb.key('d',['hash256','uint32']),s:bdb.key('s',['hash256','uint32']),p:bdb.key('p',['hash256']),m:bdb.key('m',['uint32','hash256']),h:bdb.key('h',['uint32','hash256']),T:bdb.key('T',['uint32','hash256']),P:bdb.key('P',['uint32','hash256']),M:bdb.key('M',['uint32','uint32','hash256']),H:bdb.key('H',['uint32','uint32','hash256']),C:bdb.key('C',['uint32','hash256','uint32']),b:bdb.key('b',['uint32'])};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxheW91dC5qcyJdLCJuYW1lcyI6WyJiZGIiLCJyZXF1aXJlIiwiZXhwb3J0cyIsIndkYiIsIlYiLCJrZXkiLCJPIiwiUiIsIkQiLCJwIiwiUCIsInIiLCJ3IiwiVyIsImwiLCJhIiwiaSIsIm4iLCJoIiwiYiIsIm8iLCJUIiwidCIsInR4ZGIiLCJwcmVmaXgiLCJjIiwiZCIsInMiLCJtIiwiTSIsIkgiLCJDIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBRUEsYSxvd0JBU1k7MkZBUFosS0FBTUEsQ0FBQUEsR0FBRywwQkFBR0MsT0FBTyxDQUFDLEtBQUQsQ0FBVixDQUFULENBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEcsd0JBRUFDLE9BQU8sQ0FBQ0MsR0FBUixDQUFjLENBQ1pDLENBQUMsQ0FBRUosR0FBRyxDQUFDSyxHQUFKLENBQVEsR0FBUixDQURTLENBRVpDLENBQUMsQ0FBRU4sR0FBRyxDQUFDSyxHQUFKLENBQVEsR0FBUixDQUZTLENBR1pFLENBQUMsQ0FBRVAsR0FBRyxDQUFDSyxHQUFKLENBQVEsR0FBUixDQUhTLENBSVpHLENBQUMsQ0FBRVIsR0FBRyxDQUFDSyxHQUFKLENBQVEsR0FBUixDQUpTLENBS1pJLENBQUMsQ0FBRVQsR0FBRyxDQUFDSyxHQUFKLENBQVEsR0FBUixDQUFhLENBQUMsTUFBRCxDQUFiLENBTFMsQ0FNWkssQ0FBQyxDQUFFVixHQUFHLENBQUNLLEdBQUosQ0FBUSxHQUFSLENBQWEsQ0FBQyxRQUFELENBQVcsTUFBWCxDQUFiLENBTlMsQ0FPWk0sQ0FBQyxDQUFFWCxHQUFHLENBQUNLLEdBQUosQ0FBUSxHQUFSLENBQWEsQ0FBQyxRQUFELENBQVcsUUFBWCxDQUFxQixNQUFyQixDQUFiLENBUFMsQ0FRWk8sQ0FBQyxDQUFFWixHQUFHLENBQUNLLEdB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QUFHLENBQUNLLEdBQUosQ0FBUSxHQUFSLENBQWEsQ0FBQyxRQUFELENBQVcsUUFBWCxDQUFxQixTQUFyQixDQUFiLENBYlUsQ0FjYnlCLENBQUMsQ0FBRTlCLEdBQUcsQ0FBQ0ssR0FBSixDQUFRLEdBQVIsQ0FBYSxDQUFDLFFBQUQsQ0FBVyxRQUFYLENBQXFCLFNBQXJCLENBQWIsQ0FkVSxDQWViMEIsQ0FBQyxDQUFFL0IsR0FBRyxDQUFDSyxHQUFKLENBQVEsR0FBUixDQUFhLENBQUMsUUFBRCxDQUFXLFNBQVgsQ0FBc0IsUUFBdEIsQ0FBYixDQWZVLENBZ0JiYyxDQUFDLENBQUVuQixHQUFHLENBQUNLLEdBQUosQ0FBUSxHQUFSLENBQWEsQ0FBQyxRQUFELENBQWIsQ0FoQlUsQ0FBZiIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxyXG4gKiBsYXlvdXQuanMgLSBkYXRhIGxheW91dCBmb3Igd2FsbGV0c1xyXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQtMjAxNywgQ2hyaXN0b3BoZXIgSmVmZnJleSAoTUlUIExpY2Vuc2UpLlxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vYmNvaW4tb3JnL2Jjb2luXHJcbiAqL1xyXG5cclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxuY29uc3QgYmRiID0gcmVxdWlyZSgnYmRiJyk7XHJcblxyXG4vKlxyXG4gKiBXYWxsZXQgRGF0YWJhc2UgTGF5b3V0OlxyXG4gKiAgViAtPiBkYiB2ZXJzaW9uXHJcbiAqICBPIC0+IGZsYWdzXHJcbiAqICBSIC0+IGNoYWluIHN5bmMgc3RhdGVcclxuICogIEQgLT4gd2FsbGV0IGlkIGRlcHRoXHJcbiAqICBwW2FkZHItaGFzaF0gLT4gd2FsbGV0IGlkc1xyXG4gKiAgUFt3aWRdW2FkZHItaGFzaF0gLT4gcGF0aCBkYXRhXHJcbiAqICByW3dpZF1baW5kZXhdW2hhc2hdIC0+IHBhdGggYWNjb3VudCBpbmRleFxyXG4gKiAgd1t3aWRdIC0+IHdhbGxldFxyXG4gKiAgV1t3aWRdIC0+IHdhbGxldCBpZFxyXG4gKiAgbFtpZF0gLT4gd2lkXHJcbiAqICBhW3dpZF1baW5kZXhdIC0+IGFjY291bnRcclxuICogIGlbd2lkXVtuYW1lXSAtPiBhY2NvdW50IGluZGV4XHJcbiAqICBuW3dpZF1baW5kZXhdIC0+IGFjY291bnQgbmFtZVxyXG4gKiAgaFtoZWlnaHRdIC0+IHJlY2VudCBibG9jayBoYXNoXHJcbiAqICBiW2hlaWdodF0gLT4gYmxvY2stPndpZCBtYXBcclxuICogIG9baGFzaF1baW5kZXhdIC0+IG91dHBvaW50LT53aWQgbWFwXHJcbiAqICBUW2hhc2hdIC0+IHR4LT53aWQgbWFwXHJcbiAqICB0W3dpZF0qIC0+IHR4ZGJcclxuICovXHJcblxyXG5leHBvcnRzLndkYiA9IHtcclxuICBWOiBiZGIua2V5KCdWJyksXHJcbiAgTzogYmRiLmtleSgnTycpLFxyXG4gIFI6IGJkYi5rZXkoJ1InKSxcclxuICBEOiBiZGIua2V5KCdEJyksXHJcbiAgcDogYmRiLmtleSgncCcsIFsnaGFzaCddKSxcclxuICBQOiBiZGIua2V5KCdQJywgWyd1aW50MzInLCAnaGFzaCddKSxcclxuICByOiBiZGIua2V5KCdyJywgWyd1aW50MzInLCAndWludDMyJywgJ2hhc2gnXSksXHJcbiAgdzogYmRiLmtleSgndycsIFsndWludDMyJ10pLFxyXG4gIFc6IGJkYi5rZXkoJ1cnLCBbJ3VpbnQzMiddKSxcclxuICBsOiBiZGIua2V5KCdsJywgWydhc2NpaSddKSxcclxuICBhOiBiZGIua2V5KCdhJywgWyd1aW50MzInLCAndWludDMyJ10pLFxyXG4gIGk6IGJkYi5rZXkoJ2knLCBbJ3VpbnQzMicsICdhc2NpaSddKSxcclxuICBuOiBiZGIua2V5KCduJywgWyd1aW50MzInLCAndWludDMyJ10pLFxyXG4gIGg6IGJkYi5rZXkoJ2gnLCBbJ3VpbnQzMiddKSxcclxuICBiOiBiZGIua2V5KCdiJywgWyd1aW50MzInXSksXHJcbiAgbzogYmRiLmtleSgnbycsIFsnaGFzaDI1NicsICd1aW50MzInXSksXHJcbiAgVDogYmRiLmtleSgnVCcsIFsnaGFzaDI1NiddKSxcclxuICB0OiBiZGIua2V5KCd0JywgWyd1aW50MzInXSlcclxufTtcclxuXHJcbi8qXHJcbiAqIFRYREIgRGF0YWJhc2UgTGF5b3V0OlxyXG4gKiAgIFIgLT4gd2FsbGV0IGJhbGFuY2VcclxuICogICByW2FjY291bnRdIC0+IGFjY291bnQgYmFsYW5jZVxyXG4gKiAgIHRbaGFzaF0gLT4gZXh0ZW5kZWQgdHhcclxuICogICBjW2hhc2hdW2luZGV4XSAtPiBjb2luXHJcbiAqICAgZFtoYXNoXVtpbmRleF0gLT4gdW5kbyBjb2luXHJcbiAqICAgc1toYXNoXVtpbmRleF0gLT4gc3BlbnQgYnkgaGFzaFxyXG4gKiAgIHBbaGFzaF0gLT4gZHVtbXkgKHBlbmRpbmcgZmxhZylcclxuICogICBtW3RpbWVdW2hhc2hdIC0+IGR1bW15ICh0eCBieSB0aW1lKVxyXG4gKiAgIGhbaGVpZ2h0XVtoYXNoXSAtPiBkdW1teSAodHggYnkgaGVpZ2h0KVxyXG4gKiAgIFRbYWNjb3VudF1baGFzaF0gLT4gZHVtbXkgKHR4IGJ5IGFjY291bnQpXHJcbiAqICAgUFthY2NvdW50XVtoYXNoXSAtPiBkdW1teSAocGVuZGluZyB0eCBieSBhY2NvdW50KVxyXG4gKiAgIE1bYWNjb3VudF1bdGltZV1baGFzaF0gLT4gZHVtbXkgKHR4IGJ5IHRpbWUgKyBhY2NvdW50KVxyXG4gKiAgIEhbYWNjb3VudF1baGVpZ2h0XVtoYXNoXSAtPiBkdW1teSAodHggYnkgaGVpZ2h0ICsgYWNjb3VudClcclxuICogICBDW2FjY291bnRdW2hhc2hdW2luZGV4XSAtPiBkdW1teSAoY29pbiBieSBhY2NvdW50KVxyXG4gKiAgIGJbaGVpZ2h0XSAtPiBibG9jayByZWNvcmRcclxuICovXHJcblxyXG5leHBvcnRzLnR4ZGIgPSB7XHJcbiAgcHJlZml4OiBiZGIua2V5KCd0JywgWyd1aW50MzInXSksXHJcbiAgUjogYmRiLmtleSgnUicpLFxyXG4gIHI6IGJkYi5rZXkoJ3InLCBbJ3VpbnQzMiddKSxcclxuICB0OiBiZGIua2V5KCd0JywgWydoYXNoMjU2J10pLFxyXG4gIGM6IGJkYi5rZXkoJ2MnLCBbJ2hhc2gyNTYnLCAndWludDMyJ10pLFxyXG4gIGQ6IGJkYi5rZXkoJ2QnLCBbJ2hhc2gyNTYnLCAndWludDMyJ10pLFxyXG4gIHM6IGJkYi5rZXkoJ3MnLCBbJ2hhc2gyNTYnLCAndWludDMyJ10pLFxyXG4gIHA6IGJkYi5rZXkoJ3AnLCBbJ2hhc2gyNTYnXSksXHJcbiAgbTogYmRiLmtleSgnbScsIFsndWludDMyJywgJ2hhc2gyNTYnXSksXHJcbiAgaDogYmRiLmtleSgnaCcsIFsndWludDMyJywgJ2hhc2gyNTYnXSksXHJcbiAgVDogYmRiLmtleSgnVCcsIFsndWludDMyJywgJ2hhc2gyNTYnXSksXHJcbiAgUDogYmRiLmtleSgnUCcsIFsndWludDMyJywgJ2hhc2gyNTYnXSksXHJcbiAgTTogYmRiLmtleSgnTScsIFsndWludDMyJywgJ3VpbnQzMicsICdoYXNoMjU2J10pLFxyXG4gIEg6IGJkYi5rZXkoJ0gnLCBbJ3VpbnQzMicsICd1aW50MzInLCAnaGFzaDI1NiddKSxcclxuICBDOiBiZGIua2V5KCdDJywgWyd1aW50MzInLCAnaGFzaDI1NicsICd1aW50MzInXSksXHJcbiAgYjogYmRiLmtleSgnYicsIFsndWludDMyJ10pXHJcbn07XHJcbiJdfQ==