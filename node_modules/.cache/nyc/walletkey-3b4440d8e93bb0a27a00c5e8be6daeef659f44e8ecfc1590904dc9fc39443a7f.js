/*!
 * walletkey.js - walletkey object for bcoin
 * Copyright (c) 2014-2015, Fedor Indutny (MIT License)
 * Copyright (c) 2014-2017, Christopher Jeffrey (MIT License).
 * https://github.com/bcoin-org/bcoin
 */'use strict';function cov_2jnf898m2r(){var path="E:\\Projects\\Test\\bcoin\\lib\\wallet\\walletkey.js";var hash="94dfcc5c431117c3874359abc2cdf3315e5ce3ca";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"E:\\Projects\\Test\\bcoin\\lib\\wallet\\walletkey.js",statementMap:{"0":{start:{line:10,column:16},end:{line:10,column:48}},"1":{start:{line:11,column:16},end:{line:11,column:48}},"2":{start:{line:12,column:13},end:{line:12,column:30}},"3":{start:{line:29,column:4},end:{line:29,column:19}},"4":{start:{line:31,column:4},end:{line:31,column:33}},"5":{start:{line:33,column:4},end:{line:33,column:21}},"6":{start:{line:34,column:4},end:{line:34,column:22}},"7":{start:{line:35,column:4},end:{line:35,column:21}},"8":{start:{line:36,column:4},end:{line:36,column:20}},"9":{start:{line:45,column:4},end:{line:57,column:6}},"10":{start:{line:71,column:4},end:{line:71,column:33}},"11":{start:{line:72,column:4},end:{line:72,column:29}},"12":{start:{line:73,column:4},end:{line:73,column:40}},"13":{start:{line:74,column:4},end:{line:74,column:25}},"14":{start:{line:75,column:4},end:{line:75,column:23}},"15":{start:{line:76,column:4},end:{line:76,column:35}},"16":{start:{line:77,column:4},end:{line:77,column:31}},"17":{start:{line:79,column:4},end:{line:80,column:46}},"18":{start:{line:80,column:6},end:{line:80,column:46}},"19":{start:{line:82,column:4},end:{line:82,column:42}},"20":{start:{line:95,column:4},end:{line:95,column:58}},"21":{start:{line:107,column:4},end:{line:107,column:34}},"22":{start:{line:108,column:4},end:{line:108,column:29}},"23":{start:{line:109,column:4},end:{line:109,column:40}},"24":{start:{line:110,column:4},end:{line:110,column:35}},"25":{start:{line:111,column:4},end:{line:111,column:30}},"26":{start:{line:122,column:4},end:{line:122,column:48}},"27":{start:{line:134,column:4},end:{line:134,column:34}},"28":{start:{line:135,column:4},end:{line:135,column:29}},"29":{start:{line:136,column:4},end:{line:136,column:40}},"30":{start:{line:137,column:4},end:{line:137,column:35}},"31":{start:{line:138,column:4},end:{line:138,column:34}},"32":{start:{line:149,column:4},end:{line:149,column:46}},"33":{start:{line:158,column:17},end:{line:158,column:27}},"34":{start:{line:160,column:4},end:{line:160,column:26}},"35":{start:{line:161,column:4},end:{line:161,column:32}},"36":{start:{line:163,column:4},end:{line:171,column:5}},"37":{start:{line:165,column:8},end:{line:165,column:34}},"38":{start:{line:166,column:8},end:{line:166,column:32}},"39":{start:{line:167,column:8},end:{line:167,column:14}},"40":{start:{line:169,column:8},end:{line:169,column:33}},"41":{start:{line:170,column:8},end:{line:170,column:14}},"42":{start:{line:173,column:4},end:{line:173,column:32}},"43":{start:{line:175,column:4},end:{line:175,column:37}},"44":{start:{line:176,column:4},end:{line:176,column:31}},"45":{start:{line:177,column:4},end:{line:177,column:31}},"46":{start:{line:179,column:4},end:{line:179,column:16}},"47":{start:{line:189,column:4},end:{line:189,column:36}},"48":{start:{line:197,column:0},end:{line:197,column:27}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:28,column:2},end:{line:28,column:3}},loc:{start:{line:28,column:23},end:{line:37,column:3}},line:28},"1":{name:"(anonymous_1)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:18},end:{line:58,column:3}},line:44},"2":{name:"(anonymous_2)",decl:{start:{line:70,column:2},end:{line:70,column:3}},loc:{start:{line:70,column:38},end:{line:83,column:3}},line:70},"3":{name:"(anonymous_3)",decl:{start:{line:94,column:2},end:{line:94,column:3}},loc:{start:{line:94,column:45},end:{line:96,column:3}},line:94},"4":{name:"(anonymous_4)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:28},end:{line:112,column:3}},line:106},"5":{name:"(anonymous_5)",decl:{start:{line:121,column:2},end:{line:121,column:3}},loc:{start:{line:121,column:35},end:{line:123,column:3}},line:121},"6":{name:"(anonymous_6)",decl:{start:{line:133,column:2},end:{line:133,column:3}},loc:{start:{line:133,column:26},end:{line:139,column:3}},line:133},"7":{name:"(anonymous_7)",decl:{start:{line:148,column:2},end:{line:148,column:3}},loc:{start:{line:148,column:33},end:{line:150,column:3}},line:148},"8":{name:"(anonymous_8)",decl:{start:{line:157,column:2},end:{line:157,column:3}},loc:{start:{line:157,column:11},end:{line:180,column:3}},line:157},"9":{name:"(anonymous_9)",decl:{start:{line:188,column:2},end:{line:188,column:3}},loc:{start:{line:188,column:26},end:{line:190,column:3}},line:188}},branchMap:{"0":{loc:{start:{line:53,column:14},end:{line:53,column:70}},type:"cond-expr",locations:[{start:{line:53,column:28},end:{line:53,column:63}},{start:{line:53,column:66},end:{line:53,column:70}}],line:53},"1":{loc:{start:{line:54,column:15},end:{line:54,column:78}},type:"cond-expr",locations:[{start:{line:54,column:30},end:{line:54,column:71}},{start:{line:54,column:74},end:{line:54,column:78}}],line:54},"2":{loc:{start:{line:79,column:4},end:{line:80,column:46}},type:"if",locations:[{start:{line:79,column:4},end:{line:80,column:46}},{start:{line:79,column:4},end:{line:80,column:46}}],line:79},"3":{loc:{start:{line:163,column:4},end:{line:171,column:5}},type:"switch",locations:[{start:{line:164,column:6},end:{line:167,column:14}},{start:{line:168,column:6},end:{line:170,column:14}}],line:163}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"94dfcc5c431117c3874359abc2cdf3315e5ce3ca"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2jnf898m2r=function(){return actualCoverage;};}return actualCoverage;}cov_2jnf898m2r();const Address=(cov_2jnf898m2r().s[0]++,require('../primitives/address'));const KeyRing=(cov_2jnf898m2r().s[1]++,require('../primitives/keyring'));const Path=(cov_2jnf898m2r().s[2]++,require('./path'));/**
 * Wallet Key
 * Represents a key ring which amounts to an address.
 * @alias module:wallet.WalletKey
 * @extends KeyRing
 */class WalletKey extends KeyRing{/**
   * Create a wallet key.
   * @constructor
   * @param {Object?} options
   */constructor(options){cov_2jnf898m2r().f[0]++;cov_2jnf898m2r().s[3]++;super(options);cov_2jnf898m2r().s[4]++;this.keyType=Path.types.HD;cov_2jnf898m2r().s[5]++;this.name=null;cov_2jnf898m2r().s[6]++;this.account=-1;cov_2jnf898m2r().s[7]++;this.branch=-1;cov_2jnf898m2r().s[8]++;this.index=-1;}/**
   * Convert an WalletKey to a more json-friendly object.
   * @returns {Object}
   */toJSON(network){cov_2jnf898m2r().f[1]++;cov_2jnf898m2r().s[9]++;return{name:this.name,account:this.account,branch:this.branch,index:this.index,witness:this.witness,nested:this.nested,publicKey:this.publicKey.toString('hex'),script:this.script?(cov_2jnf898m2r().b[0][0]++,this.script.toRaw().toString('hex')):(cov_2jnf898m2r().b[0][1]++,null),program:this.witness?(cov_2jnf898m2r().b[1][0]++,this.getProgram().toRaw().toString('hex')):(cov_2jnf898m2r().b[1][1]++,null),type:Address.typesByVal[this.getType()].toLowerCase(),address:this.getAddress('string',network)};}/**
   * Inject properties from hd key.
   * @private
   * @param {Account} account
   * @param {HDPrivateKey|HDPublicKey} key
   * @param {Number} branch
   * @param {Number} index
   * @returns {WalletKey}
   */fromHD(account,key,branch,index){cov_2jnf898m2r().f[2]++;cov_2jnf898m2r().s[10]++;this.keyType=Path.types.HD;cov_2jnf898m2r().s[11]++;this.name=account.name;cov_2jnf898m2r().s[12]++;this.account=account.accountIndex;cov_2jnf898m2r().s[13]++;this.branch=branch;cov_2jnf898m2r().s[14]++;this.index=index;cov_2jnf898m2r().s[15]++;this.witness=account.witness;cov_2jnf898m2r().s[16]++;this.nested=branch===2;cov_2jnf898m2r().s[17]++;if(key.privateKey){cov_2jnf898m2r().b[2][0]++;cov_2jnf898m2r().s[18]++;return this.fromPrivate(key.privateKey);}else{cov_2jnf898m2r().b[2][1]++;}cov_2jnf898m2r().s[19]++;return this.fromPublic(key.publicKey);}/**
   * Instantiate a wallet key from hd key.
   * @param {Account} account
   * @param {HDPrivateKey|HDPublicKey} key
   * @param {Number} branch
   * @param {Number} index
   * @returns {WalletKey}
   */static fromHD(account,key,branch,index){cov_2jnf898m2r().f[3]++;cov_2jnf898m2r().s[20]++;return new this().fromHD(account,key,branch,index);}/**
   * Inject properties from imported data.
   * @private
   * @param {Account} account
   * @param {Buffer} data
   * @returns {WalletKey}
   */fromImport(account,data){cov_2jnf898m2r().f[4]++;cov_2jnf898m2r().s[21]++;this.keyType=Path.types.KEY;cov_2jnf898m2r().s[22]++;this.name=account.name;cov_2jnf898m2r().s[23]++;this.account=account.accountIndex;cov_2jnf898m2r().s[24]++;this.witness=account.witness;cov_2jnf898m2r().s[25]++;return this.fromRaw(data);}/**
   * Instantiate a wallet key from imported data.
   * @param {Account} account
   * @param {Buffer} data
   * @returns {WalletKey}
   */static fromImport(account,data){cov_2jnf898m2r().f[5]++;cov_2jnf898m2r().s[26]++;return new this().fromImport(account,data);}/**
   * Inject properties from key.
   * @private
   * @param {Account} account
   * @param {KeyRing} ring
   * @returns {WalletKey}
   */fromRing(account,ring){cov_2jnf898m2r().f[6]++;cov_2jnf898m2r().s[27]++;this.keyType=Path.types.KEY;cov_2jnf898m2r().s[28]++;this.name=account.name;cov_2jnf898m2r().s[29]++;this.account=account.accountIndex;cov_2jnf898m2r().s[30]++;this.witness=account.witness;cov_2jnf898m2r().s[31]++;return this.fromOptions(ring);}/**
   * Instantiate a wallet key from regular key.
   * @param {Account} account
   * @param {KeyRing} ring
   * @returns {WalletKey}
   */static fromRing(account,ring){cov_2jnf898m2r().f[7]++;cov_2jnf898m2r().s[32]++;return new this().fromRing(account,ring);}/**
   * Convert wallet key to a path.
   * @returns {Path}
   */toPath(){cov_2jnf898m2r().f[8]++;const path=(cov_2jnf898m2r().s[33]++,new Path());cov_2jnf898m2r().s[34]++;path.name=this.name;cov_2jnf898m2r().s[35]++;path.account=this.account;cov_2jnf898m2r().s[36]++;switch(this.keyType){case Path.types.HD:cov_2jnf898m2r().b[3][0]++;cov_2jnf898m2r().s[37]++;path.branch=this.branch;cov_2jnf898m2r().s[38]++;path.index=this.index;cov_2jnf898m2r().s[39]++;break;case Path.types.KEY:cov_2jnf898m2r().b[3][1]++;cov_2jnf898m2r().s[40]++;path.data=this.toRaw();cov_2jnf898m2r().s[41]++;break;}cov_2jnf898m2r().s[42]++;path.keyType=this.keyType;cov_2jnf898m2r().s[43]++;path.version=this.getVersion();cov_2jnf898m2r().s[44]++;path.type=this.getType();cov_2jnf898m2r().s[45]++;path.hash=this.getHash();cov_2jnf898m2r().s[46]++;return path;}/**
   * Test whether an object is a WalletKey.
   * @param {Object} obj
   * @returns {Boolean}
   */static isWalletKey(obj){cov_2jnf898m2r().f[9]++;cov_2jnf898m2r().s[47]++;return obj instanceof WalletKey;}}/*
 * Expose
 */cov_2jnf898m2r().s[48]++;module.exports=WalletKey;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndhbGxldGtleS5qcyJdLCJuYW1lcyI6WyJBZGRyZXNzIiwicmVxdWlyZSIsIktleVJpbmciLCJQYXRoIiwiV2FsbGV0S2V5IiwiY29uc3RydWN0b3IiLCJvcHRpb25zIiwia2V5VHlwZSIsInR5cGVzIiwiSEQiLCJuYW1lIiwiYWNjb3VudCIsImJyYW5jaCIsImluZGV4IiwidG9KU09OIiwibmV0d29yayIsIndpdG5lc3MiLCJuZXN0ZWQiLCJwdWJsaWNLZXkiLCJ0b1N0cmluZyIsInNjcmlwdCIsInRvUmF3IiwicHJvZ3JhbSIsImdldFByb2dyYW0iLCJ0eXBlIiwidHlwZXNCeVZhbCIsImdldFR5cGUiLCJ0b0xvd2VyQ2FzZSIsImFkZHJlc3MiLCJnZXRBZGRyZXNzIiwiZnJvbUhEIiwia2V5IiwiYWNjb3VudEluZGV4IiwicHJpdmF0ZUtleSIsImZyb21Qcml2YXRlIiwiZnJvbVB1YmxpYyIsImZyb21JbXBvcnQiLCJkYXRhIiwiS0VZIiwiZnJvbVJhdyIsImZyb21SaW5nIiwicmluZyIsImZyb21PcHRpb25zIiwidG9QYXRoIiwicGF0aCIsInZlcnNpb24iLCJnZXRWZXJzaW9uIiwiaGFzaCIsImdldEhhc2giLCJpc1dhbGxldEtleSIsIm9iaiIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUVBLGEscTlMQVFZOzJGQU5aLEtBQU1BLENBQUFBLE9BQU8sMEJBQUdDLE9BQU8sQ0FBQyx1QkFBRCxDQUFWLENBQWIsQ0FDQSxLQUFNQyxDQUFBQSxPQUFPLDBCQUFHRCxPQUFPLENBQUMsdUJBQUQsQ0FBVixDQUFiLENBQ0EsS0FBTUUsQ0FBQUEsSUFBSSwwQkFBR0YsT0FBTyxDQUFDLFFBQUQsQ0FBVixDQUFWLENBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBRUEsS0FBTUcsQ0FBQUEsU0FBTixRQUF3QkYsQ0FBQUEsT0FBUSxDQUM5QjtBQUNGO0FBQ0E7QUFDQTtBQUNBLEtB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IGZvciBiY29pblxyXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQtMjAxNSwgRmVkb3IgSW5kdXRueSAoTUlUIExpY2Vuc2UpXHJcbiAqIENvcHlyaWdodCAoYykgMjAxNC0yMDE3LCBDaHJpc3RvcGhlciBKZWZmcmV5IChNSVQgTGljZW5zZSkuXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9iY29pbi1vcmcvYmNvaW5cclxuICovXHJcblxyXG4ndXNlIHN0cmljdCc7XHJcblxyXG5jb25zdCBBZGRyZXNzID0gcmVxdWlyZSgnLi4vcHJpbWl0aXZlcy9hZGRyZXNzJyk7XHJcbmNvbnN0IEtleVJpbmcgPSByZXF1aXJlKCcuLi9wcmltaXRpdmVzL2tleXJpbmcnKTtcclxuY29uc3QgUGF0aCA9IHJlcXVpcmUoJy4vcGF0aCcpO1xyXG5cclxuLyoqXHJcbiAqIFdhbGxldCBLZXlcclxuICogUmVwcmVzZW50cyBhIGtleSByaW5nIHdoaWNoIGFtb3VudHMgdG8gYW4gYWRkcmVzcy5cclxuICogQGFsaWFzIG1vZHVsZTp3YWxsZXQuV2FsbGV0S2V5XHJcbiAqIEBleHRlbmRzIEtleVJpbmdcclxuICovXHJcblxyXG5jbGFzcyBXYWxsZXRLZXkgZXh0ZW5kcyBLZXlSaW5nIHtcclxuICAvKipcclxuICAgKiBDcmVhdGUgYSB3YWxsZXQga2V5LlxyXG4gICAqIEBjb25zdHJ1Y3RvclxyXG4gICAqIEBwYXJhbSB7T2JqZWN0P30gb3B0aW9uc1xyXG4gICAqL1xyXG5cclxuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICBzdXBlcihvcHRpb25zKTtcclxuXHJcbiAgICB0aGlzLmtleVR5cGUgPSBQYXRoLnR5cGVzLkhEO1xyXG5cclxuICAgIHRoaXMubmFtZSA9IG51bGw7XHJcbiAgICB0aGlzLmFjY291bnQgPSAtMTtcclxuICAgIHRoaXMuYnJhbmNoID0gLTE7XHJcbiAgICB0aGlzLmluZGV4ID0gLTE7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDb252ZXJ0IGFuIFdhbGxldEtleSB0byBhIG1vcmUganNvbi1mcmllbmRseSBvYmplY3QuXHJcbiAgICogQHJldHVybnMge09iamVjdH1cclxuICAgKi9cclxuXHJcbiAgdG9KU09OKG5ldHdvcmspIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMubmFtZSxcclxuICAgICAgYWNjb3VudDogdGhpcy5hY2NvdW50LFxyXG4gICAgICBicmFuY2g6IHRoaXMuYnJhbmNoLFxyXG4gICAgICBpbmRleDogdGhpcy5pbmRleCxcclxuICAgICAgd2l0bmVzczogdGhpcy53aXRuZXNzLFxyXG4gICAgICBuZXN0ZWQ6IHRoaXMubmVzdGVkLFxyXG4gICAgICBwdWJsaWNLZXk6IHRoaXMucHVibGljS2V5LnRvU3RyaW5nKCdoZXgnKSxcclxuICAgICAgc2NyaXB0OiB0aGlzLnNjcmlwdCA/IHRoaXMuc2NyaXB0LnRvUmF3KCkudG9TdHJpbmcoJ2hleCcpIDogbnVsbCxcclxuICAgICAgcHJvZ3JhbTogdGhpcy53aXRuZXNzID8gdGhpcy5nZXRQcm9ncmFtKCkudG9SYXcoKS50b1N0cmluZygnaGV4JykgOiBudWxsLFxyXG4gICAgICB0eXBlOiBBZGRyZXNzLnR5cGVzQnlWYWxbdGhpcy5nZXRUeXBlKCldLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgIGFkZHJlc3M6IHRoaXMuZ2V0QWRkcmVzcygnc3RyaW5nJywgbmV0d29yaylcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbmplY3QgcHJvcGVydGllcyBmcm9tIGhkIGtleS5cclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqIEBwYXJhbSB7QWNjb3VudH0gYWNjb3VudFxyXG4gICAqIEBwYXJhbSB7SERQcml2YXRlS2V5fEhEUHVibGljS2V5fSBrZXlcclxuICAgKiBAcGFyYW0ge051bWJlcn0gYnJhbmNoXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XHJcbiAgICogQHJldHVybnMge1dhbGxldEtleX1cclxuICAgKi9cclxuXHJcbiAgZnJvbUhEKGFjY291bnQsIGtleSwgYnJhbmNoLCBpbmRleCkge1xyXG4gICAgdGhpcy5rZXlUeXBlID0gUGF0aC50eXBlcy5IRDtcclxuICAgIHRoaXMubmFtZSA9IGFjY291bnQubmFtZTtcclxuICAgIHRoaXMuYWNjb3VudCA9IGFjY291bnQuYWNjb3VudEluZGV4O1xyXG4gICAgdGhpcy5icmFuY2ggPSBicmFuY2g7XHJcbiAgICB0aGlzLmluZGV4ID0gaW5kZXg7XHJcbiAgICB0aGlzLndpdG5lc3MgPSBhY2NvdW50LndpdG5lc3M7XHJcbiAgICB0aGlzLm5lc3RlZCA9IGJyYW5jaCA9PT0gMjtcclxuXHJcbiAgICBpZiAoa2V5LnByaXZhdGVLZXkpXHJcbiAgICAgIHJldHVybiB0aGlzLmZyb21Qcml2YXRlKGtleS5wcml2YXRlS2V5KTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5mcm9tUHVibGljKGtleS5wdWJsaWNLZXkpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSW5zdGFudGlhdGUgYSB3YWxsZXQga2V5IGZyb20gaGQga2V5LlxyXG4gICAqIEBwYXJhbSB7QWNjb3VudH0gYWNjb3VudFxyXG4gICAqIEBwYXJhbSB7SERQcml2YXRlS2V5fEhEUHVibGljS2V5fSBrZXlcclxuICAgKiBAcGFyYW0ge051bWJlcn0gYnJhbmNoXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XHJcbiAgICogQHJldHVybnMge1dhbGxldEtleX1cclxuICAgKi9cclxuXHJcbiAgc3RhdGljIGZyb21IRChhY2NvdW50LCBrZXksIGJyYW5jaCwgaW5kZXgpIHtcclxuICAgIHJldHVybiBuZXcgdGhpcygpLmZyb21IRChhY2NvdW50LCBrZXksIGJyYW5jaCwgaW5kZXgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSW5qZWN0IHByb3BlcnRpZXMgZnJvbSBpbXBvcnRlZCBkYXRhLlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICogQHBhcmFtIHtBY2NvdW50fSBhY2NvdW50XHJcbiAgICogQHBhcmFtIHtCdWZmZXJ9IGRhdGFcclxuICAgKiBAcmV0dXJucyB7V2FsbGV0S2V5fVxyXG4gICAqL1xyXG5cclxuICBmcm9tSW1wb3J0KGFjY291bnQsIGRhdGEpIHtcclxuICAgIHRoaXMua2V5VHlwZSA9IFBhdGgudHlwZXMuS0VZO1xyXG4gICAgdGhpcy5uYW1lID0gYWNjb3VudC5uYW1lO1xyXG4gICAgdGhpcy5hY2NvdW50ID0gYWNjb3VudC5hY2NvdW50SW5kZXg7XHJcbiAgICB0aGlzLndpdG5lc3MgPSBhY2NvdW50LndpdG5lc3M7XHJcbiAgICByZXR1cm4gdGhpcy5mcm9tUmF3KGRhdGEpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSW5zdGFudGlhdGUgYSB3YWxsZXQga2V5IGZyb20gaW1wb3J0ZWQgZGF0YS5cclxuICAgKiBAcGFyYW0ge0FjY291bnR9IGFjY291bnRcclxuICAgKiBAcGFyYW0ge0J1ZmZlcn0gZGF0YVxyXG4gICAqIEByZXR1cm5zIHtXYWxsZXRLZXl9XHJcbiAgICovXHJcblxyXG4gIHN0YXRpYyBmcm9tSW1wb3J0KGFjY291bnQsIGRhdGEpIHtcclxuICAgIHJldHVybiBuZXcgdGhpcygpLmZyb21JbXBvcnQoYWNjb3VudCwgZGF0YSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbmplY3QgcHJvcGVydGllcyBmcm9tIGtleS5cclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqIEBwYXJhbSB7QWNjb3VudH0gYWNjb3VudFxyXG4gICAqIEBwYXJhbSB7S2V5UmluZ30gcmluZ1xyXG4gICAqIEByZXR1cm5zIHtXYWxsZXRLZXl9XHJcbiAgICovXHJcblxyXG4gIGZyb21SaW5nKGFjY291bnQsIHJpbmcpIHtcclxuICAgIHRoaXMua2V5VHlwZSA9IFBhdGgudHlwZXMuS0VZO1xyXG4gICAgdGhpcy5uYW1lID0gYWNjb3VudC5uYW1lO1xyXG4gICAgdGhpcy5hY2NvdW50ID0gYWNjb3VudC5hY2NvdW50SW5kZXg7XHJcbiAgICB0aGlzLndpdG5lc3MgPSBhY2NvdW50LndpdG5lc3M7XHJcbiAgICByZXR1cm4gdGhpcy5mcm9tT3B0aW9ucyhyaW5nKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEluc3RhbnRpYXRlIGEgd2FsbGV0IGtleSBmcm9tIHJlZ3VsYXIga2V5LlxyXG4gICAqIEBwYXJhbSB7QWNjb3VudH0gYWNjb3VudFxyXG4gICAqIEBwYXJhbSB7S2V5UmluZ30gcmluZ1xyXG4gICAqIEByZXR1cm5zIHtXYWxsZXRLZXl9XHJcbiAgICovXHJcblxyXG4gIHN0YXRpYyBmcm9tUmluZyhhY2NvdW50LCByaW5nKSB7XHJcbiAgICByZXR1cm4gbmV3IHRoaXMoKS5mcm9tUmluZyhhY2NvdW50LCByaW5nKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENvbnZlcnQgd2FsbGV0IGtleSB0byBhIHBhdGguXHJcbiAgICogQHJldHVybnMge1BhdGh9XHJcbiAgICovXHJcblxyXG4gIHRvUGF0aCgpIHtcclxuICAgIGNvbnN0IHBhdGggPSBuZXcgUGF0aCgpO1xyXG5cclxuICAgIHBhdGgubmFtZSA9IHRoaXMubmFtZTtcclxuICAgIHBhdGguYWNjb3VudCA9IHRoaXMuYWNjb3VudDtcclxuXHJcbiAgICBzd2l0Y2ggKHRoaXMua2V5VHlwZSkge1xyXG4gICAgICBjYXNlIFBhdGgudHlwZXMuSEQ6XHJcbiAgICAgICAgcGF0aC5icmFuY2ggPSB0aGlzLmJyYW5jaDtcclxuICAgICAgICBwYXRoLmluZGV4ID0gdGhpcy5pbmRleDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBQYXRoLnR5cGVzLktFWTpcclxuICAgICAgICBwYXRoLmRhdGEgPSB0aGlzLnRvUmF3KCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcblxyXG4gICAgcGF0aC5rZXlUeXBlID0gdGhpcy5rZXlUeXBlO1xyXG5cclxuICAgIHBhdGgudmVyc2lvbiA9IHRoaXMuZ2V0VmVyc2lvbigpO1xyXG4gICAgcGF0aC50eXBlID0gdGhpcy5nZXRUeXBlKCk7XHJcbiAgICBwYXRoLmhhc2ggPSB0aGlzLmdldEhhc2goKTtcclxuXHJcbiAgICByZXR1cm4gcGF0aDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRlc3Qgd2hldGhlciBhbiBvYmplY3QgaXMgYSBXYWxsZXRLZXkuXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IG9ialxyXG4gICAqIEByZXR1cm5zIHtCb29sZWFufVxyXG4gICAqL1xyXG5cclxuICBzdGF0aWMgaXNXYWxsZXRLZXkob2JqKSB7XHJcbiAgICByZXR1cm4gb2JqIGluc3RhbmNlb2YgV2FsbGV0S2V5O1xyXG4gIH1cclxufVxyXG5cclxuLypcclxuICogRXhwb3NlXHJcbiAqL1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBXYWxsZXRLZXk7XHJcbiJdfQ==