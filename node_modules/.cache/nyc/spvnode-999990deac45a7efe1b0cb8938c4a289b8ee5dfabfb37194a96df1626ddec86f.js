/*!
 * spvnode.js - spv node for bcoin
 * Copyright (c) 2014-2015, Fedor Indutny (MIT License)
 * Copyright (c) 2014-2017, Christopher Jeffrey (MIT License).
 * https://github.com/bcoin-org/bcoin
 */'use strict';function cov_135fa1rxl4(){var path="E:\\Projects\\Test\\bcoin\\lib\\node\\spvnode.js";var hash="cd2a4336db86878e375104b72b3f8d25573e3d5a";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"E:\\Projects\\Test\\bcoin\\lib\\node\\spvnode.js",statementMap:{"0":{start:{line:10,column:15},end:{line:10,column:31}},"1":{start:{line:11,column:14},end:{line:11,column:44}},"2":{start:{line:12,column:13},end:{line:12,column:35}},"3":{start:{line:13,column:13},end:{line:13,column:30}},"4":{start:{line:14,column:13},end:{line:14,column:30}},"5":{start:{line:15,column:12},end:{line:15,column:28}},"6":{start:{line:37,column:4},end:{line:37,column:55}},"7":{start:{line:39,column:4},end:{line:39,column:24}},"8":{start:{line:42,column:4},end:{line:42,column:20}},"9":{start:{line:44,column:4},end:{line:57,column:7}},"10":{start:{line:59,column:4},end:{line:75,column:7}},"11":{start:{line:77,column:4},end:{line:77,column:29}},"12":{start:{line:79,column:4},end:{line:92,column:7}},"13":{start:{line:94,column:4},end:{line:94,column:16}},"14":{start:{line:104,column:4},end:{line:104,column:51}},"15":{start:{line:104,column:34},end:{line:104,column:49}},"16":{start:{line:105,column:4},end:{line:105,column:50}},"17":{start:{line:105,column:33},end:{line:105,column:48}},"18":{start:{line:107,column:4},end:{line:108,column:52}},"19":{start:{line:108,column:6},end:{line:108,column:52}},"20":{start:{line:108,column:35},end:{line:108,column:50}},"21":{start:{line:110,column:4},end:{line:112,column:7}},"22":{start:{line:111,column:6},end:{line:111,column:26}},"23":{start:{line:114,column:4},end:{line:116,column:7}},"24":{start:{line:115,column:6},end:{line:115,column:32}},"25":{start:{line:118,column:4},end:{line:120,column:7}},"26":{start:{line:119,column:6},end:{line:119,column:41}},"27":{start:{line:122,column:4},end:{line:124,column:7}},"28":{start:{line:123,column:6},end:{line:123,column:44}},"29":{start:{line:126,column:4},end:{line:128,column:7}},"30":{start:{line:127,column:6},end:{line:127,column:47}},"31":{start:{line:130,column:4},end:{line:132,column:7}},"32":{start:{line:131,column:6},end:{line:131,column:30}},"33":{start:{line:134,column:4},end:{line:134,column:23}},"34":{start:{line:144,column:4},end:{line:144,column:53}},"35":{start:{line:145,column:4},end:{line:145,column:23}},"36":{start:{line:147,column:4},end:{line:147,column:31}},"37":{start:{line:148,column:4},end:{line:148,column:28}},"38":{start:{line:149,column:4},end:{line:149,column:27}},"39":{start:{line:151,column:4},end:{line:151,column:29}},"40":{start:{line:153,column:4},end:{line:153,column:27}},"41":{start:{line:154,column:4},end:{line:154,column:28}},"42":{start:{line:156,column:4},end:{line:156,column:40}},"43":{start:{line:165,column:4},end:{line:165,column:48}},"44":{start:{line:166,column:4},end:{line:166,column:24}},"45":{start:{line:168,column:4},end:{line:168,column:32}},"46":{start:{line:169,column:4},end:{line:169,column:28}},"47":{start:{line:171,column:4},end:{line:171,column:30}},"48":{start:{line:173,column:4},end:{line:173,column:28}},"49":{start:{line:174,column:4},end:{line:174,column:29}},"50":{start:{line:175,column:4},end:{line:175,column:29}},"51":{start:{line:186,column:4},end:{line:186,column:40}},"52":{start:{line:198,column:4},end:{line:202,column:5}},"53":{start:{line:199,column:6},end:{line:199,column:38}},"54":{start:{line:201,column:6},end:{line:201,column:28}},"55":{start:{line:214,column:4},end:{line:214,column:30}},"56":{start:{line:224,column:4},end:{line:224,column:30}},"57":{start:{line:233,column:4},end:{line:233,column:31}},"58":{start:{line:242,column:4},end:{line:242,column:34}},"59":{start:{line:250,column:4},end:{line:250,column:33}},"60":{start:{line:258,column:4},end:{line:258,column:32}},"61":{start:{line:266,column:0},end:{line:266,column:25}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:23},end:{line:95,column:3}},line:36},"1":{name:"(anonymous_1)",decl:{start:{line:102,column:2},end:{line:102,column:3}},loc:{start:{line:102,column:9},end:{line:135,column:3}},line:102},"2":{name:"(anonymous_2)",decl:{start:{line:104,column:27},end:{line:104,column:28}},loc:{start:{line:104,column:34},end:{line:104,column:49}},line:104},"3":{name:"(anonymous_3)",decl:{start:{line:105,column:26},end:{line:105,column:27}},loc:{start:{line:105,column:33},end:{line:105,column:48}},line:105},"4":{name:"(anonymous_4)",decl:{start:{line:108,column:28},end:{line:108,column:29}},loc:{start:{line:108,column:35},end:{line:108,column:50}},line:108},"5":{name:"(anonymous_5)",decl:{start:{line:110,column:23},end:{line:110,column:24}},loc:{start:{line:110,column:31},end:{line:112,column:5}},line:110},"6":{name:"(anonymous_6)",decl:{start:{line:114,column:27},end:{line:114,column:28}},loc:{start:{line:114,column:38},end:{line:116,column:5}},line:114},"7":{name:"(anonymous_7)",decl:{start:{line:118,column:29},end:{line:118,column:30}},loc:{start:{line:118,column:53},end:{line:120,column:5}},line:118},"8":{name:"(anonymous_8)",decl:{start:{line:122,column:32},end:{line:122,column:33}},loc:{start:{line:122,column:50},end:{line:124,column:5}},line:122},"9":{name:"(anonymous_9)",decl:{start:{line:126,column:32},end:{line:126,column:33}},loc:{start:{line:126,column:53},end:{line:128,column:5}},line:126},"10":{name:"(anonymous_10)",decl:{start:{line:130,column:27},end:{line:130,column:28}},loc:{start:{line:130,column:36},end:{line:132,column:5}},line:130},"11":{name:"(anonymous_11)",decl:{start:{line:143,column:2},end:{line:143,column:3}},loc:{start:{line:143,column:15},end:{line:157,column:3}},line:143},"12":{name:"(anonymous_12)",decl:{start:{line:164,column:2},end:{line:164,column:3}},loc:{start:{line:164,column:16},end:{line:176,column:3}},line:164},"13":{name:"(anonymous_13)",decl:{start:{line:185,column:2},end:{line:185,column:3}},loc:{start:{line:185,column:20},end:{line:187,column:3}},line:185},"14":{name:"(anonymous_14)",decl:{start:{line:197,column:2},end:{line:197,column:3}},loc:{start:{line:197,column:24},end:{line:203,column:3}},line:197},"15":{name:"(anonymous_15)",decl:{start:{line:213,column:2},end:{line:213,column:3}},loc:{start:{line:213,column:13},end:{line:215,column:3}},line:213},"16":{name:"(anonymous_16)",decl:{start:{line:223,column:2},end:{line:223,column:3}},loc:{start:{line:223,column:12},end:{line:225,column:3}},line:223},"17":{name:"(anonymous_17)",decl:{start:{line:232,column:2},end:{line:232,column:3}},loc:{start:{line:232,column:12},end:{line:234,column:3}},line:232},"18":{name:"(anonymous_18)",decl:{start:{line:241,column:2},end:{line:241,column:3}},loc:{start:{line:241,column:15},end:{line:243,column:3}},line:241},"19":{name:"(anonymous_19)",decl:{start:{line:249,column:2},end:{line:249,column:3}},loc:{start:{line:249,column:14},end:{line:251,column:3}},line:249},"20":{name:"(anonymous_20)",decl:{start:{line:257,column:2},end:{line:257,column:3}},loc:{start:{line:257,column:13},end:{line:259,column:3}},line:257}},branchMap:{"0":{loc:{start:{line:107,column:4},end:{line:108,column:52}},type:"if",locations:[{start:{line:107,column:4},end:{line:108,column:52}},{start:{line:107,column:4},end:{line:108,column:52}}],line:107}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cd2a4336db86878e375104b72b3f8d25573e3d5a"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_135fa1rxl4=function(){return actualCoverage;};}return actualCoverage;}cov_135fa1rxl4();const assert=(cov_135fa1rxl4().s[0]++,require('bsert'));const Chain=(cov_135fa1rxl4().s[1]++,require('../blockchain/chain'));const Pool=(cov_135fa1rxl4().s[2]++,require('../net/pool'));const Node=(cov_135fa1rxl4().s[3]++,require('./node'));const HTTP=(cov_135fa1rxl4().s[4]++,require('./http'));const RPC=(cov_135fa1rxl4().s[5]++,require('./rpc'));/**
 * SPV Node
 * Create an spv node which only maintains
 * a chain, a pool, and an http server.
 * @alias module:node.SPVNode
 * @extends Node
 */class SPVNode extends Node{/**
   * Create SPV node.
   * @constructor
   * @param {Object?} options
   * @param {Buffer?} options.sslKey
   * @param {Buffer?} options.sslCert
   * @param {Number?} options.httpPort
   * @param {String?} options.httpHost
   */constructor(options){cov_135fa1rxl4().f[0]++;cov_135fa1rxl4().s[6]++;super('bcoin','bcoin.conf','debug.log',options);cov_135fa1rxl4().s[7]++;this.opened=false;// SPV flag.
cov_135fa1rxl4().s[8]++;this.spv=true;cov_135fa1rxl4().s[9]++;this.chain=new Chain({network:this.network,logger:this.logger,prefix:this.config.prefix,memory:this.memory,maxFiles:this.config.uint('max-files'),cacheSize:this.config.mb('cache-size'),entryCache:this.config.uint('entry-cache'),forceFlags:this.config.bool('force-flags'),checkpoints:this.config.bool('checkpoints'),bip91:this.config.bool('bip91'),bip148:this.config.bool('bip148'),spv:true});cov_135fa1rxl4().s[10]++;this.pool=new Pool({network:this.network,logger:this.logger,chain:this.chain,prefix:this.config.prefix,proxy:this.config.str('proxy'),onion:this.config.bool('onion'),upnp:this.config.bool('upnp'),seeds:this.config.array('seeds'),nodes:this.config.array('nodes'),only:this.config.array('only'),maxOutbound:this.config.uint('max-outbound'),createSocket:this.config.func('create-socket'),memory:this.memory,selfish:true,listen:false});cov_135fa1rxl4().s[11]++;this.rpc=new RPC(this);cov_135fa1rxl4().s[12]++;this.http=new HTTP({network:this.network,logger:this.logger,node:this,prefix:this.config.prefix,ssl:this.config.bool('ssl'),keyFile:this.config.path('ssl-key'),certFile:this.config.path('ssl-cert'),host:this.config.str('http-host'),port:this.config.uint('http-port'),apiKey:this.config.str('api-key'),noAuth:this.config.bool('no-auth'),cors:this.config.bool('cors')});cov_135fa1rxl4().s[13]++;this.init();}/**
   * Initialize the node.
   * @private
   */init(){cov_135fa1rxl4().f[1]++;cov_135fa1rxl4().s[14]++;// Bind to errors
this.chain.on('error',err=>{cov_135fa1rxl4().f[2]++;cov_135fa1rxl4().s[15]++;return this.error(err);});cov_135fa1rxl4().s[16]++;this.pool.on('error',err=>{cov_135fa1rxl4().f[3]++;cov_135fa1rxl4().s[17]++;return this.error(err);});cov_135fa1rxl4().s[18]++;if(this.http){cov_135fa1rxl4().b[0][0]++;cov_135fa1rxl4().s[19]++;this.http.on('error',err=>{cov_135fa1rxl4().f[4]++;cov_135fa1rxl4().s[20]++;return this.error(err);});}else{cov_135fa1rxl4().b[0][1]++;}cov_135fa1rxl4().s[21]++;this.pool.on('tx',tx=>{cov_135fa1rxl4().f[5]++;cov_135fa1rxl4().s[22]++;this.emit('tx',tx);});cov_135fa1rxl4().s[23]++;this.chain.on('block',block=>{cov_135fa1rxl4().f[6]++;cov_135fa1rxl4().s[24]++;this.emit('block',block);});cov_135fa1rxl4().s[25]++;this.chain.on('connect',async(entry,block)=>{cov_135fa1rxl4().f[7]++;cov_135fa1rxl4().s[26]++;this.emit('connect',entry,block);});cov_135fa1rxl4().s[27]++;this.chain.on('disconnect',(entry,block)=>{cov_135fa1rxl4().f[8]++;cov_135fa1rxl4().s[28]++;this.emit('disconnect',entry,block);});cov_135fa1rxl4().s[29]++;this.chain.on('reorganize',(tip,competitor)=>{cov_135fa1rxl4().f[9]++;cov_135fa1rxl4().s[30]++;this.emit('reorganize',tip,competitor);});cov_135fa1rxl4().s[31]++;this.chain.on('reset',tip=>{cov_135fa1rxl4().f[10]++;cov_135fa1rxl4().s[32]++;this.emit('reset',tip);});cov_135fa1rxl4().s[33]++;this.loadPlugins();}/**
   * Open the node and all its child objects,
   * wait for the database to load.
   * @returns {Promise}
   */async open(){cov_135fa1rxl4().f[11]++;cov_135fa1rxl4().s[34]++;assert(!this.opened,'SPVNode is already open.');cov_135fa1rxl4().s[35]++;this.opened=true;cov_135fa1rxl4().s[36]++;await this.handlePreopen();cov_135fa1rxl4().s[37]++;await this.chain.open();cov_135fa1rxl4().s[38]++;await this.pool.open();cov_135fa1rxl4().s[39]++;await this.openPlugins();cov_135fa1rxl4().s[40]++;await this.http.open();cov_135fa1rxl4().s[41]++;await this.handleOpen();cov_135fa1rxl4().s[42]++;this.logger.info('Node is loaded.');}/**
   * Close the node, wait for the database to close.
   * @returns {Promise}
   */async close(){cov_135fa1rxl4().f[12]++;cov_135fa1rxl4().s[43]++;assert(this.opened,'SPVNode is not open.');cov_135fa1rxl4().s[44]++;this.opened=false;cov_135fa1rxl4().s[45]++;await this.handlePreclose();cov_135fa1rxl4().s[46]++;await this.http.close();cov_135fa1rxl4().s[47]++;await this.closePlugins();cov_135fa1rxl4().s[48]++;await this.pool.close();cov_135fa1rxl4().s[49]++;await this.chain.close();cov_135fa1rxl4().s[50]++;await this.handleClose();}/**
   * Scan for any missed transactions.
   * Note that this will replay the blockchain sync.
   * @param {Number|Hash} start - Start block.
   * @returns {Promise}
   */async scan(start){cov_135fa1rxl4().f[13]++;cov_135fa1rxl4().s[51]++;throw new Error('Not implemented.');}/**
   * Broadcast a transaction (note that this will _not_ be verified
   * by the mempool - use with care, lest you get banned from
   * bitcoind nodes).
   * @param {TX|Block} item
   * @returns {Promise}
   */async broadcast(item){cov_135fa1rxl4().f[14]++;cov_135fa1rxl4().s[52]++;try{cov_135fa1rxl4().s[53]++;await this.pool.broadcast(item);}catch(e){cov_135fa1rxl4().s[54]++;this.emit('error',e);}}/**
   * Broadcast a transaction (note that this will _not_ be verified
   * by the mempool - use with care, lest you get banned from
   * bitcoind nodes).
   * @param {TX} tx
   * @returns {Promise}
   */sendTX(tx){cov_135fa1rxl4().f[15]++;cov_135fa1rxl4().s[55]++;return this.broadcast(tx);}/**
   * Broadcast a transaction. Silence errors.
   * @param {TX} tx
   * @returns {Promise}
   */relay(tx){cov_135fa1rxl4().f[16]++;cov_135fa1rxl4().s[56]++;return this.broadcast(tx);}/**
   * Connect to the network.
   * @returns {Promise}
   */connect(){cov_135fa1rxl4().f[17]++;cov_135fa1rxl4().s[57]++;return this.pool.connect();}/**
   * Disconnect from the network.
   * @returns {Promise}
   */disconnect(){cov_135fa1rxl4().f[18]++;cov_135fa1rxl4().s[58]++;return this.pool.disconnect();}/**
   * Start the blockchain sync.
   */startSync(){cov_135fa1rxl4().f[19]++;cov_135fa1rxl4().s[59]++;return this.pool.startSync();}/**
   * Stop syncing the blockchain.
   */stopSync(){cov_135fa1rxl4().f[20]++;cov_135fa1rxl4().s[60]++;return this.pool.stopSync();}}/*
 * Expose
 */cov_135fa1rxl4().s[61]++;module.exports=SPVNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNwdm5vZGUuanMiXSwibmFtZXMiOlsiYXNzZXJ0IiwicmVxdWlyZSIsIkNoYWluIiwiUG9vbCIsIk5vZGUiLCJIVFRQIiwiUlBDIiwiU1BWTm9kZSIsImNvbnN0cnVjdG9yIiwib3B0aW9ucyIsIm9wZW5lZCIsInNwdiIsImNoYWluIiwibmV0d29yayIsImxvZ2dlciIsInByZWZpeCIsImNvbmZpZyIsIm1lbW9yeSIsIm1heEZpbGVzIiwidWludCIsImNhY2hlU2l6ZSIsIm1iIiwiZW50cnlDYWNoZSIsImZvcmNlRmxhZ3MiLCJib29sIiwiY2hlY2twb2ludHMiLCJiaXA5MSIsImJpcDE0OCIsInBvb2wiLCJwcm94eSIsInN0ciIsIm9uaW9uIiwidXBucCIsInNlZWRzIiwiYXJyYXkiLCJub2RlcyIsIm9ubHkiLCJtYXhPdXRib3VuZCIsImNyZWF0ZVNvY2tldCIsImZ1bmMiLCJzZWxmaXNoIiwibGlzdGVuIiwicnBjIiwiaHR0cCIsIm5vZGUiLCJzc2wiLCJrZXlGaWxlIiwicGF0aCIsImNlcnRGaWxlIiwiaG9zdCIsInBvcnQiLCJhcGlLZXkiLCJub0F1dGgiLCJjb3JzIiwiaW5pdCIsIm9uIiwiZXJyIiwiZXJyb3IiLCJ0eCIsImVtaXQiLCJibG9jayIsImVudHJ5IiwidGlwIiwiY29tcGV0aXRvciIsImxvYWRQbHVnaW5zIiwib3BlbiIsImhhbmRsZVByZW9wZW4iLCJvcGVuUGx1Z2lucyIsImhhbmRsZU9wZW4iLCJpbmZvIiwiY2xvc2UiLCJoYW5kbGVQcmVjbG9zZSIsImNsb3NlUGx1Z2lucyIsImhhbmRsZUNsb3NlIiwic2NhbiIsInN0YXJ0IiwiRXJyb3IiLCJicm9hZGNhc3QiLCJpdGVtIiwiZSIsInNlbmRUWCIsInJlbGF5IiwiY29ubmVjdCIsImRpc2Nvbm5lY3QiLCJzdGFydFN5bmMiLCJzdG9wU3luYyIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUVBLGEscTZQQVFZ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LEtBRUVDLFFBQVEsRUFBRyxtREFDVCxNQUFPLE1BQUt6RCxJQUFMLENBQVV5RCxRQUFWLEVBQVAsQ0FDRCxDQTFPd0IsQ0E2TzNCO0FBQ0E7QUFDQSxHLHlCQUVBQyxNQUFNLENBQUNDLE9BQVAsQ0FBaUJoRixPQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxyXG4gKiBzcHZub2RlLmpzIC0gc3B2IG5vZGUgZm9yIGJjb2luXHJcbiAqIENvcHlyaWdodCAoYykgMjAxNC0yMDE1LCBGZWRvciBJbmR1dG55IChNSVQgTGljZW5zZSlcclxuICogQ29weXJpZ2h0IChjKSAyMDE0LTIwMTcsIENocmlzdG9waGVyIEplZmZyZXkgKE1JVCBMaWNlbnNlKS5cclxuICogaHR0cHM6Ly9naXRodWIuY29tL2Jjb2luLW9yZy9iY29pblxyXG4gKi9cclxuXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbmNvbnN0IGFzc2VydCA9IHJlcXVpcmUoJ2JzZXJ0Jyk7XHJcbmNvbnN0IENoYWluID0gcmVxdWlyZSgnLi4vYmxvY2tjaGFpbi9jaGFpbicpO1xyXG5jb25zdCBQb29sID0gcmVxdWlyZSgnLi4vbmV0L3Bvb2wnKTtcclxuY29uc3QgTm9kZSA9IHJlcXVpcmUoJy4vbm9kZScpO1xyXG5jb25zdCBIVFRQID0gcmVxdWlyZSgnLi9odHRwJyk7XHJcbmNvbnN0IFJQQyA9IHJlcXVpcmUoJy4vcnBjJyk7XHJcblxyXG4vKipcclxuICogU1BWIE5vZGVcclxuICogQ3JlYXRlIGFuIHNwdiBub2RlIHdoaWNoIG9ubHkgbWFpbnRhaW5zXHJcbiAqIGEgY2hhaW4sIGEgcG9vbCwgYW5kIGFuIGh0dHAgc2VydmVyLlxyXG4gKiBAYWxpYXMgbW9kdWxlOm5vZGUuU1BWTm9kZVxyXG4gKiBAZXh0ZW5kcyBOb2RlXHJcbiAqL1xyXG5cclxuY2xhc3MgU1BWTm9kZSBleHRlbmRzIE5vZGUge1xyXG4gIC8qKlxyXG4gICAqIENyZWF0ZSBTUFYgbm9kZS5cclxuICAgKiBAY29uc3RydWN0b3JcclxuICAgKiBAcGFyYW0ge09iamVjdD99IG9wdGlvbnNcclxuICAgKiBAcGFyYW0ge0J1ZmZlcj99IG9wdGlvbnMuc3NsS2V5XHJcbiAgICogQHBhcmFtIHtCdWZmZXI/fSBvcHRpb25zLnNzbENlcnRcclxuICAgKiBAcGFyYW0ge051bWJlcj99IG9wdGlvbnMuaHR0cFBvcnRcclxuICAgKiBAcGFyYW0ge1N0cmluZz99IG9wdGlvbnMuaHR0cEhvc3RcclxuICAgKi9cclxuXHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgc3VwZXIoJ2Jjb2luJywgJ2Jjb2luLmNvbmYnLCAnZGVidWcubG9nJywgb3B0aW9ucyk7XHJcblxyXG4gICAgdGhpcy5vcGVuZWQgPSBmYWxzZTtcclxuXHJcbiAgICAvLyBTUFYgZmxhZy5cclxuICAgIHRoaXMuc3B2ID0gdHJ1ZTtcclxuXHJcbiAgICB0aGlzLmNoYWluID0gbmV3IENoYWluKHtcclxuICAgICAgbmV0d29yazogdGhpcy5uZXR3b3JrLFxyXG4gICAgICBsb2dnZXI6IHRoaXMubG9nZ2VyLFxyXG4gICAgICBwcmVmaXg6IHRoaXMuY29uZmlnLnByZWZpeCxcclxuICAgICAgbWVtb3J5OiB0aGlzLm1lbW9yeSxcclxuICAgICAgbWF4RmlsZXM6IHRoaXMuY29uZmlnLnVpbnQoJ21heC1maWxlcycpLFxyXG4gICAgICBjYWNoZVNpemU6IHRoaXMuY29uZmlnLm1iKCdjYWNoZS1zaXplJyksXHJcbiAgICAgIGVudHJ5Q2FjaGU6IHRoaXMuY29uZmlnLnVpbnQoJ2VudHJ5LWNhY2hlJyksXHJcbiAgICAgIGZvcmNlRmxhZ3M6IHRoaXMuY29uZmlnLmJvb2woJ2ZvcmNlLWZsYWdzJyksXHJcbiAgICAgIGNoZWNrcG9pbnRzOiB0aGlzLmNvbmZpZy5ib29sKCdjaGVja3BvaW50cycpLFxyXG4gICAgICBiaXA5MTogdGhpcy5jb25maWcuYm9vbCgnYmlwOTEnKSxcclxuICAgICAgYmlwMTQ4OiB0aGlzLmNvbmZpZy5ib29sKCdiaXAxNDgnKSxcclxuICAgICAgc3B2OiB0cnVlXHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnBvb2wgPSBuZXcgUG9vbCh7XHJcbiAgICAgIG5ldHdvcms6IHRoaXMubmV0d29yayxcclxuICAgICAgbG9nZ2VyOiB0aGlzLmxvZ2dlcixcclxuICAgICAgY2hhaW46IHRoaXMuY2hhaW4sXHJcbiAgICAgIHByZWZpeDogdGhpcy5jb25maWcucHJlZml4LFxyXG4gICAgICBwcm94eTogdGhpcy5jb25maWcuc3RyKCdwcm94eScpLFxyXG4gICAgICBvbmlvbjogdGhpcy5jb25maWcuYm9vbCgnb25pb24nKSxcclxuICAgICAgdXBucDogdGhpcy5jb25maWcuYm9vbCgndXBucCcpLFxyXG4gICAgICBzZWVkczogdGhpcy5jb25maWcuYXJyYXkoJ3NlZWRzJyksXHJcbiAgICAgIG5vZGVzOiB0aGlzLmNvbmZpZy5hcnJheSgnbm9kZXMnKSxcclxuICAgICAgb25seTogdGhpcy5jb25maWcuYXJyYXkoJ29ubHknKSxcclxuICAgICAgbWF4T3V0Ym91bmQ6IHRoaXMuY29uZmlnLnVpbnQoJ21heC1vdXRib3VuZCcpLFxyXG4gICAgICBjcmVhdGVTb2NrZXQ6IHRoaXMuY29uZmlnLmZ1bmMoJ2NyZWF0ZS1zb2NrZXQnKSxcclxuICAgICAgbWVtb3J5OiB0aGlzLm1lbW9yeSxcclxuICAgICAgc2VsZmlzaDogdHJ1ZSxcclxuICAgICAgbGlzdGVuOiBmYWxzZVxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5ycGMgPSBuZXcgUlBDKHRoaXMpO1xyXG5cclxuICAgIHRoaXMuaHR0cCA9IG5ldyBIVFRQKHtcclxuICAgICAgbmV0d29yazogdGhpcy5uZXR3b3JrLFxyXG4gICAgICBsb2dnZXI6IHRoaXMubG9nZ2VyLFxyXG4gICAgICBub2RlOiB0aGlzLFxyXG4gICAgICBwcmVmaXg6IHRoaXMuY29uZmlnLnByZWZpeCxcclxuICAgICAgc3NsOiB0aGlzLmNvbmZpZy5ib29sKCdzc2wnKSxcclxuICAgICAga2V5RmlsZTogdGhpcy5jb25maWcucGF0aCgnc3NsLWtleScpLFxyXG4gICAgICBjZXJ0RmlsZTogdGhpcy5jb25maWcucGF0aCgnc3NsLWNlcnQnKSxcclxuICAgICAgaG9zdDogdGhpcy5jb25maWcuc3RyKCdodHRwLWhvc3QnKSxcclxuICAgICAgcG9ydDogdGhpcy5jb25maWcudWludCgnaHR0cC1wb3J0JyksXHJcbiAgICAgIGFwaUtleTogdGhpcy5jb25maWcuc3RyKCdhcGkta2V5JyksXHJcbiAgICAgIG5vQXV0aDogdGhpcy5jb25maWcuYm9vbCgnbm8tYXV0aCcpLFxyXG4gICAgICBjb3JzOiB0aGlzLmNvbmZpZy5ib29sKCdjb3JzJylcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuaW5pdCgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSW5pdGlhbGl6ZSB0aGUgbm9kZS5cclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG5cclxuICBpbml0KCkge1xyXG4gICAgLy8gQmluZCB0byBlcnJvcnNcclxuICAgIHRoaXMuY2hhaW4ub24oJ2Vycm9yJywgZXJyID0+IHRoaXMuZXJyb3IoZXJyKSk7XHJcbiAgICB0aGlzLnBvb2wub24oJ2Vycm9yJywgZXJyID0+IHRoaXMuZXJyb3IoZXJyKSk7XHJcblxyXG4gICAgaWYgKHRoaXMuaHR0cClcclxuICAgICAgdGhpcy5odHRwLm9uKCdlcnJvcicsIGVyciA9PiB0aGlzLmVycm9yKGVycikpO1xyXG5cclxuICAgIHRoaXMucG9vbC5vbigndHgnLCAodHgpID0+IHtcclxuICAgICAgdGhpcy5lbWl0KCd0eCcsIHR4KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuY2hhaW4ub24oJ2Jsb2NrJywgKGJsb2NrKSA9PiB7XHJcbiAgICAgIHRoaXMuZW1pdCgnYmxvY2snLCBibG9jayk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmNoYWluLm9uKCdjb25uZWN0JywgYXN5bmMgKGVudHJ5LCBibG9jaykgPT4ge1xyXG4gICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3QnLCBlbnRyeSwgYmxvY2spO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5jaGFpbi5vbignZGlzY29ubmVjdCcsIChlbnRyeSwgYmxvY2spID0+IHtcclxuICAgICAgdGhpcy5lbWl0KCdkaXNjb25uZWN0JywgZW50cnksIGJsb2NrKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuY2hhaW4ub24oJ3Jlb3JnYW5pemUnLCAodGlwLCBjb21wZXRpdG9yKSA9PiB7XHJcbiAgICAgIHRoaXMuZW1pdCgncmVvcmdhbml6ZScsIHRpcCwgY29tcGV0aXRvcik7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmNoYWluLm9uKCdyZXNldCcsICh0aXApID0+IHtcclxuICAgICAgdGhpcy5lbWl0KCdyZXNldCcsIHRpcCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmxvYWRQbHVnaW5zKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBPcGVuIHRoZSBub2RlIGFuZCBhbGwgaXRzIGNoaWxkIG9iamVjdHMsXHJcbiAgICogd2FpdCBmb3IgdGhlIGRhdGFiYXNlIHRvIGxvYWQuXHJcbiAgICogQHJldHVybnMge1Byb21pc2V9XHJcbiAgICovXHJcblxyXG4gIGFzeW5jIG9wZW4oKSB7XHJcbiAgICBhc3NlcnQoIXRoaXMub3BlbmVkLCAnU1BWTm9kZSBpcyBhbHJlYWR5IG9wZW4uJyk7XHJcbiAgICB0aGlzLm9wZW5lZCA9IHRydWU7XHJcblxyXG4gICAgYXdhaXQgdGhpcy5oYW5kbGVQcmVvcGVuKCk7XHJcbiAgICBhd2FpdCB0aGlzLmNoYWluLm9wZW4oKTtcclxuICAgIGF3YWl0IHRoaXMucG9vbC5vcGVuKCk7XHJcblxyXG4gICAgYXdhaXQgdGhpcy5vcGVuUGx1Z2lucygpO1xyXG5cclxuICAgIGF3YWl0IHRoaXMuaHR0cC5vcGVuKCk7XHJcbiAgICBhd2FpdCB0aGlzLmhhbmRsZU9wZW4oKTtcclxuXHJcbiAgICB0aGlzLmxvZ2dlci5pbmZvKCdOb2RlIGlzIGxvYWRlZC4nKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENsb3NlIHRoZSBub2RlLCB3YWl0IGZvciB0aGUgZGF0YWJhc2UgdG8gY2xvc2UuXHJcbiAgICogQHJldHVybnMge1Byb21pc2V9XHJcbiAgICovXHJcblxyXG4gIGFzeW5jIGNsb3NlKCkge1xyXG4gICAgYXNzZXJ0KHRoaXMub3BlbmVkLCAnU1BWTm9kZSBpcyBub3Qgb3Blbi4nKTtcclxuICAgIHRoaXMub3BlbmVkID0gZmFsc2U7XHJcblxyXG4gICAgYXdhaXQgdGhpcy5oYW5kbGVQcmVjbG9zZSgpO1xyXG4gICAgYXdhaXQgdGhpcy5odHRwLmNsb3NlKCk7XHJcblxyXG4gICAgYXdhaXQgdGhpcy5jbG9zZVBsdWdpbnMoKTtcclxuXHJcbiAgICBhd2FpdCB0aGlzLnBvb2wuY2xvc2UoKTtcclxuICAgIGF3YWl0IHRoaXMuY2hhaW4uY2xvc2UoKTtcclxuICAgIGF3YWl0IHRoaXMuaGFuZGxlQ2xvc2UoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNjYW4gZm9yIGFueSBtaXNzZWQgdHJhbnNhY3Rpb25zLlxyXG4gICAqIE5vdGUgdGhhdCB0aGlzIHdpbGwgcmVwbGF5IHRoZSBibG9ja2NoYWluIHN5bmMuXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ8SGFzaH0gc3RhcnQgLSBTdGFydCBibG9jay5cclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cclxuICAgKi9cclxuXHJcbiAgYXN5bmMgc2NhbihzdGFydCkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdOb3QgaW1wbGVtZW50ZWQuJyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBCcm9hZGNhc3QgYSB0cmFuc2FjdGlvbiAobm90ZSB0aGF0IHRoaXMgd2lsbCBfbm90XyBiZSB2ZXJpZmllZFxyXG4gICAqIGJ5IHRoZSBtZW1wb29sIC0gdXNlIHdpdGggY2FyZSwgbGVzdCB5b3UgZ2V0IGJhbm5lZCBmcm9tXHJcbiAgICogYml0Y29pbmQgbm9kZXMpLlxyXG4gICAqIEBwYXJhbSB7VFh8QmxvY2t9IGl0ZW1cclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cclxuICAgKi9cclxuXHJcbiAgYXN5bmMgYnJvYWRjYXN0KGl0ZW0pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IHRoaXMucG9vbC5icm9hZGNhc3QoaXRlbSk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEJyb2FkY2FzdCBhIHRyYW5zYWN0aW9uIChub3RlIHRoYXQgdGhpcyB3aWxsIF9ub3RfIGJlIHZlcmlmaWVkXHJcbiAgICogYnkgdGhlIG1lbXBvb2wgLSB1c2Ugd2l0aCBjYXJlLCBsZXN0IHlvdSBnZXQgYmFubmVkIGZyb21cclxuICAgKiBiaXRjb2luZCBub2RlcykuXHJcbiAgICogQHBhcmFtIHtUWH0gdHhcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cclxuICAgKi9cclxuXHJcbiAgc2VuZFRYKHR4KSB7XHJcbiAgICByZXR1cm4gdGhpcy5icm9hZGNhc3QodHgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQnJvYWRjYXN0IGEgdHJhbnNhY3Rpb24uIFNpbGVuY2UgZXJyb3JzLlxyXG4gICAqIEBwYXJhbSB7VFh9IHR4XHJcbiAgICogQHJldHVybnMge1Byb21pc2V9XHJcbiAgICovXHJcblxyXG4gIHJlbGF5KHR4KSB7XHJcbiAgICByZXR1cm4gdGhpcy5icm9hZGNhc3QodHgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ29ubmVjdCB0byB0aGUgbmV0d29yay5cclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cclxuICAgKi9cclxuXHJcbiAgY29ubmVjdCgpIHtcclxuICAgIHJldHVybiB0aGlzLnBvb2wuY29ubmVjdCgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRGlzY29ubmVjdCBmcm9tIHRoZSBuZXR3b3JrLlxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfVxyXG4gICAqL1xyXG5cclxuICBkaXNjb25uZWN0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMucG9vbC5kaXNjb25uZWN0KCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTdGFydCB0aGUgYmxvY2tjaGFpbiBzeW5jLlxyXG4gICAqL1xyXG5cclxuICBzdGFydFN5bmMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wb29sLnN0YXJ0U3luYygpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU3RvcCBzeW5jaW5nIHRoZSBibG9ja2NoYWluLlxyXG4gICAqL1xyXG5cclxuICBzdG9wU3luYygpIHtcclxuICAgIHJldHVybiB0aGlzLnBvb2wuc3RvcFN5bmMoKTtcclxuICB9XHJcbn1cclxuXHJcbi8qXHJcbiAqIEV4cG9zZVxyXG4gKi9cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gU1BWTm9kZTtcclxuIl19