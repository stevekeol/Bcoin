/*!
 * filters.js - filter object for bcoin
 * Copyright (c) 2019, the bcoin developers (MIT License).
 * https://github.com/bcoin-org/bcoin
 */'use strict';function cov_2mewfb8q20(){var path="E:\\Projects\\Test\\bcoin\\lib\\primitives\\filter.js";var hash="c513d8749f0fbbe867184a6b5b2951a7481aec89";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"E:\\Projects\\Test\\bcoin\\lib\\primitives\\filter.js",statementMap:{"0":{start:{line:9,column:15},end:{line:9,column:31}},"1":{start:{line:10,column:12},end:{line:10,column:28}},"2":{start:{line:11,column:13},end:{line:11,column:37}},"3":{start:{line:12,column:18},end:{line:12,column:50}},"4":{start:{line:13,column:24},end:{line:13,column:43}},"5":{start:{line:19,column:21},end:{line:19,column:36}},"6":{start:{line:37,column:4},end:{line:37,column:38}},"7":{start:{line:38,column:4},end:{line:38,column:31}},"8":{start:{line:40,column:4},end:{line:41,column:32}},"9":{start:{line:41,column:6},end:{line:41,column:32}},"10":{start:{line:51,column:4},end:{line:51,column:48}},"11":{start:{line:52,column:4},end:{line:52,column:44}},"12":{start:{line:53,column:4},end:{line:53,column:44}},"13":{start:{line:54,column:4},end:{line:54,column:33}},"14":{start:{line:55,column:4},end:{line:55,column:33}},"15":{start:{line:56,column:4},end:{line:56,column:16}},"16":{start:{line:66,column:4},end:{line:66,column:43}},"17":{start:{line:75,column:4},end:{line:75,column:30}},"18":{start:{line:76,column:4},end:{line:76,column:31}},"19":{start:{line:77,column:4},end:{line:77,column:14}},"20":{start:{line:86,column:15},end:{line:86,column:16}},"21":{start:{line:87,column:4},end:{line:87,column:15}},"22":{start:{line:88,column:4},end:{line:88,column:31}},"23":{start:{line:89,column:4},end:{line:89,column:16}},"24":{start:{line:98,column:17},end:{line:98,column:31}},"25":{start:{line:99,column:4},end:{line:99,column:51}},"26":{start:{line:109,column:4},end:{line:109,column:32}},"27":{start:{line:110,column:4},end:{line:110,column:57}},"28":{start:{line:111,column:4},end:{line:111,column:16}},"29":{start:{line:121,column:4},end:{line:121,column:43}},"30":{start:{line:131,column:4},end:{line:131,column:37}},"31":{start:{line:141,column:4},end:{line:141,column:36}},"32":{start:{line:151,column:4},end:{line:151,column:45}},"33":{start:{line:152,column:4},end:{line:152,column:72}},"34":{start:{line:153,column:4},end:{line:153,column:72}},"35":{start:{line:154,column:4},end:{line:154,column:43}},"36":{start:{line:155,column:4},end:{line:155,column:43}},"37":{start:{line:156,column:4},end:{line:156,column:16}},"38":{start:{line:166,column:4},end:{line:169,column:6}},"39":{start:{line:179,column:4},end:{line:179,column:37}},"40":{start:{line:188,column:4},end:{line:188,column:54}},"41":{start:{line:198,column:4},end:{line:198,column:33}},"42":{start:{line:206,column:0},end:{line:206,column:24}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:23},end:{line:42,column:3}},line:36},"1":{name:"(anonymous_1)",decl:{start:{line:50,column:2},end:{line:50,column:3}},loc:{start:{line:50,column:23},end:{line:57,column:3}},line:50},"2":{name:"(anonymous_2)",decl:{start:{line:65,column:2},end:{line:65,column:3}},loc:{start:{line:65,column:30},end:{line:67,column:3}},line:65},"3":{name:"(anonymous_3)",decl:{start:{line:74,column:2},end:{line:74,column:3}},loc:{start:{line:74,column:15},end:{line:78,column:3}},line:74},"4":{name:"(anonymous_4)",decl:{start:{line:85,column:2},end:{line:85,column:3}},loc:{start:{line:85,column:12},end:{line:90,column:3}},line:85},"5":{name:"(anonymous_5)",decl:{start:{line:97,column:2},end:{line:97,column:3}},loc:{start:{line:97,column:10},end:{line:100,column:3}},line:97},"6":{name:"(anonymous_6)",decl:{start:{line:108,column:2},end:{line:108,column:3}},loc:{start:{line:108,column:17},end:{line:112,column:3}},line:108},"7":{name:"(anonymous_7)",decl:{start:{line:120,column:2},end:{line:120,column:3}},loc:{start:{line:120,column:16},end:{line:122,column:3}},line:120},"8":{name:"(anonymous_8)",decl:{start:{line:130,column:2},end:{line:130,column:3}},loc:{start:{line:130,column:24},end:{line:132,column:3}},line:130},"9":{name:"(anonymous_9)",decl:{start:{line:140,column:2},end:{line:140,column:3}},loc:{start:{line:140,column:23},end:{line:142,column:3}},line:140},"10":{name:"(anonymous_10)",decl:{start:{line:150,column:2},end:{line:150,column:3}},loc:{start:{line:150,column:17},end:{line:157,column:3}},line:150},"11":{name:"(anonymous_11)",decl:{start:{line:165,column:2},end:{line:165,column:3}},loc:{start:{line:165,column:11},end:{line:170,column:3}},line:165},"12":{name:"(anonymous_12)",decl:{start:{line:178,column:2},end:{line:178,column:3}},loc:{start:{line:178,column:24},end:{line:180,column:3}},line:178},"13":{name:"(anonymous_13)",decl:{start:{line:187,column:2},end:{line:187,column:3}},loc:{start:{line:187,column:20},end:{line:189,column:3}},line:187},"14":{name:"(anonymous_14)",decl:{start:{line:197,column:2},end:{line:197,column:3}},loc:{start:{line:197,column:23},end:{line:199,column:3}},line:197}},branchMap:{"0":{loc:{start:{line:40,column:4},end:{line:41,column:32}},type:"if",locations:[{start:{line:40,column:4},end:{line:41,column:32}},{start:{line:40,column:4},end:{line:41,column:32}}],line:40}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c513d8749f0fbbe867184a6b5b2951a7481aec89"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2mewfb8q20=function(){return actualCoverage;};}return actualCoverage;}cov_2mewfb8q20();const assert=(cov_2mewfb8q20().s[0]++,require('bsert'));const bio=(cov_2mewfb8q20().s[1]++,require('bufio'));const util=(cov_2mewfb8q20().s[2]++,require('../utils/util'));const consensus=(cov_2mewfb8q20().s[3]++,require('../protocol/consensus'));const{inspectSymbol}=(cov_2mewfb8q20().s[4]++,require('../utils'));/*
 * Constants
 */const EMPTY_BUFFER=(cov_2mewfb8q20().s[5]++,Buffer.alloc(0));/**
 * Filter
 * Represents a GCSFilter.
 * @alias module:primitives.Filter
 * @property {Hash} hash
 * @property {Number} index
 */class Filter{/**
   * Create an filter.
   * @constructor
   * @param {Object?} options
   */constructor(options){cov_2mewfb8q20().f[0]++;cov_2mewfb8q20().s[6]++;this.header=consensus.ZERO_HASH;cov_2mewfb8q20().s[7]++;this.filter=EMPTY_BUFFER;cov_2mewfb8q20().s[8]++;if(options){cov_2mewfb8q20().b[0][0]++;cov_2mewfb8q20().s[9]++;this.fromOptions(options);}else{cov_2mewfb8q20().b[0][1]++;}}/**
   * Inject properties from options object.
   * @private
   * @param {Object} options
   */fromOptions(options){cov_2mewfb8q20().f[1]++;cov_2mewfb8q20().s[10]++;assert(options,'Filter data is required.');cov_2mewfb8q20().s[11]++;assert(Buffer.isBuffer(options.header));cov_2mewfb8q20().s[12]++;assert(Buffer.isBuffer(options.filter));cov_2mewfb8q20().s[13]++;this.header=options.header;cov_2mewfb8q20().s[14]++;this.filter=options.filter;cov_2mewfb8q20().s[15]++;return this;}/**
   * Instantate outpoint from options object.
   * @param {Object} options
   * @returns {Filter}
   */static fromOptions(options){cov_2mewfb8q20().f[2]++;cov_2mewfb8q20().s[16]++;return new this().fromOptions(options);}/**
   * Write filter to a buffer writer.
   * @param {BufferWriter} bw
   */toWriter(bw){cov_2mewfb8q20().f[3]++;cov_2mewfb8q20().s[17]++;bw.writeHash(this.header);cov_2mewfb8q20().s[18]++;bw.writeBytes(this.filter);cov_2mewfb8q20().s[19]++;return bw;}/**
   * Calculate size of filter.
   * @returns {Number}
   */getSize(){cov_2mewfb8q20().f[4]++;let size=(cov_2mewfb8q20().s[20]++,0);cov_2mewfb8q20().s[21]++;size+=32;cov_2mewfb8q20().s[22]++;size+=this.filter.length;cov_2mewfb8q20().s[23]++;return size;}/**
   * Serialize filter.
   * @returns {Buffer}
   */toRaw(){cov_2mewfb8q20().f[5]++;const size=(cov_2mewfb8q20().s[24]++,this.getSize());cov_2mewfb8q20().s[25]++;return this.toWriter(bio.write(size)).render();}/**
   * Inject properties from buffer reader.
   * @private
   * @param {BufferReader} br
   */fromReader(br){cov_2mewfb8q20().f[6]++;cov_2mewfb8q20().s[26]++;this.header=br.readHash();cov_2mewfb8q20().s[27]++;this.filter=br.readBytes(br.getSize()-br.offset);cov_2mewfb8q20().s[28]++;return this;}/**
   * Inject properties from serialized data.
   * @private
   * @param {Buffer} data
   */fromRaw(data){cov_2mewfb8q20().f[7]++;cov_2mewfb8q20().s[29]++;return this.fromReader(bio.read(data));}/**
   * Instantiate filter from a buffer reader.
   * @param {BufferReader} br
   * @returns {Filter}
   */static fromReader(br){cov_2mewfb8q20().f[8]++;cov_2mewfb8q20().s[30]++;return new this().fromReader(br);}/**
   * Instantiate filter from serialized data.
   * @param {Buffer} data
   * @returns {Filter}
   */static fromRaw(data){cov_2mewfb8q20().f[9]++;cov_2mewfb8q20().s[31]++;return new this().fromRaw(data);}/**
   * Inject properties from json object.
   * @private
   * @params {Object} json
   */fromJSON(json){cov_2mewfb8q20().f[10]++;cov_2mewfb8q20().s[32]++;assert(json,'Filter data is required.');cov_2mewfb8q20().s[33]++;assert(typeof json.filter==='string','Filter must be a string.');cov_2mewfb8q20().s[34]++;assert(typeof json.header==='string','Header must be a string.');cov_2mewfb8q20().s[35]++;this.filter=Buffer.from(json.filter);cov_2mewfb8q20().s[36]++;this.header=Buffer.from(json.header);cov_2mewfb8q20().s[37]++;return this;}/**
   * Convert the filter to an object suitable
   * for JSON serialization.
   * @returns {Object}
   */toJSON(){cov_2mewfb8q20().f[11]++;cov_2mewfb8q20().s[38]++;return{filter:this.filter.toString('hex'),header:util.revHex(this.header)};}/**
   * Instantiate filter from json object.
   * @param {Object} json
   * @returns {Filter}
   */static fromJSON(json){cov_2mewfb8q20().f[12]++;cov_2mewfb8q20().s[39]++;return new this().fromJSON(json);}/**
   * Convert the filter to a user-friendly string.
   * @returns {String}
   */[inspectSymbol](){cov_2mewfb8q20().f[13]++;cov_2mewfb8q20().s[40]++;return`<Filter: ${this.filter.toString('hex')}>`;}/**
   * Test an object to see if it is an filter.
   * @param {Object} obj
   * @returns {Boolean}
   */static isFilter(obj){cov_2mewfb8q20().f[14]++;cov_2mewfb8q20().s[41]++;return obj instanceof Filter;}}/*
 * Expose
 */cov_2mewfb8q20().s[42]++;module.exports=Filter;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbHRlci5qcyJdLCJuYW1lcyI6WyJhc3NlcnQiLCJyZXF1aXJlIiwiYmlvIiwidXRpbCIsImNvbnNlbnN1cyIsImluc3BlY3RTeW1ib2wiLCJFTVBUWV9CVUZGRVIiLCJCdWZmZXIiLCJhbGxvYyIsIkZpbHRlciIsImNvbnN0cnVjdG9yIiwib3B0aW9ucyIsImhlYWRlciIsIlpFUk9fSEFTSCIsImZpbHRlciIsImZyb21PcHRpb25zIiwiaXNCdWZmZXIiLCJ0b1dyaXRlciIsImJ3Iiwid3JpdGVIYXNoIiwid3JpdGVCeXRlcyIsImdldFNpemUiLCJzaXplIiwibGVuZ3RoIiwidG9SYXciLCJ3cml0ZSIsInJlbmRlciIsImZyb21SZWFkZXIiLCJiciIsInJlYWRIYXNoIiwicmVhZEJ5dGVzIiwib2Zmc2V0IiwiZnJvbVJhdyIsImRhdGEiLCJyZWFkIiwiZnJvbUpTT04iLCJqc29uIiwiZnJvbSIsInRvSlNPTiIsInRvU3RyaW5nIiwicmV2SGV4IiwiaXNGaWx0ZXIiLCJvYmoiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBRUEsYSw2dExBU1k7MkZBUFosS0FBTUEsQ0FBQUEsTUFBTSwwQkFBR0MsT0FBTyxDQUFDLE9BQUQsQ0FBVixDQUFaLENBQ0EsS0FBTUMsQ0FBQUEsR0FBRywwQkFBR0QsT0FBTyxDQUFDLE9BQUQsQ0FBVixDQUFULENBQ0EsS0FBTUUsQ0FBQUEsSUFBSSwwQkFBR0YsT0FBTyxDQUFDLGVBQUQsQ0FBVixDQUFWLENBQ0EsS0FBTUcsQ0FBQUEsU0FBUywwQkFBR0gsT0FBTyxDQUFDLHVCQUFELENBQVYsQ0FBZixDQUNBLEtBQU0sQ0FBQ0ksYUFBRCwyQkFBa0JKLE9BQU8sQ0FBQyxVQUFELENBQXpCLENBQU4sQ0FFQTtBQUNBO0FBQ0EsR0FFQSxLQUFNSyxDQUFBQSxZQUFZLDBCQUFHQyxNQUFNLENBQUNDLEtBQVAsQ0FBYSxDQUFiLENBQUgsQ0FBbEIsQ0FFQTtBQUNBO0FB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QTtBQUNBLEtBRUUsTUFBT0UsQ0FBQUEsUUFBUCxDQUFnQkMsR0FBaEIsQ0FBcUIsbURBQ25CLE1BQU9BLENBQUFBLEdBQUcsV0FBWWpDLENBQUFBLE1BQXRCLENBQ0QsQ0ExS1UsQ0E2S2I7QUFDQTtBQUNBLEcseUJBRUFrQyxNQUFNLENBQUNDLE9BQVAsQ0FBaUJuQyxNQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxyXG4gKiBmaWx0ZXJzLmpzIC0gZmlsdGVyIG9iamVjdCBmb3IgYmNvaW5cclxuICogQ29weXJpZ2h0IChjKSAyMDE5LCB0aGUgYmNvaW4gZGV2ZWxvcGVycyAoTUlUIExpY2Vuc2UpLlxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vYmNvaW4tb3JnL2Jjb2luXHJcbiAqL1xyXG5cclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxuY29uc3QgYXNzZXJ0ID0gcmVxdWlyZSgnYnNlcnQnKTtcclxuY29uc3QgYmlvID0gcmVxdWlyZSgnYnVmaW8nKTtcclxuY29uc3QgdXRpbCA9IHJlcXVpcmUoJy4uL3V0aWxzL3V0aWwnKTtcclxuY29uc3QgY29uc2Vuc3VzID0gcmVxdWlyZSgnLi4vcHJvdG9jb2wvY29uc2Vuc3VzJyk7XHJcbmNvbnN0IHtpbnNwZWN0U3ltYm9sfSA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XHJcblxyXG4vKlxyXG4gKiBDb25zdGFudHNcclxuICovXHJcblxyXG5jb25zdCBFTVBUWV9CVUZGRVIgPSBCdWZmZXIuYWxsb2MoMCk7XHJcblxyXG4vKipcclxuICogRmlsdGVyXHJcbiAqIFJlcHJlc2VudHMgYSBHQ1NGaWx0ZXIuXHJcbiAqIEBhbGlhcyBtb2R1bGU6cHJpbWl0aXZlcy5GaWx0ZXJcclxuICogQHByb3BlcnR5IHtIYXNofSBoYXNoXHJcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBpbmRleFxyXG4gKi9cclxuXHJcbmNsYXNzIEZpbHRlciB7XHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlIGFuIGZpbHRlci5cclxuICAgKiBAY29uc3RydWN0b3JcclxuICAgKiBAcGFyYW0ge09iamVjdD99IG9wdGlvbnNcclxuICAgKi9cclxuXHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgdGhpcy5oZWFkZXIgPSBjb25zZW5zdXMuWkVST19IQVNIO1xyXG4gICAgdGhpcy5maWx0ZXIgPSBFTVBUWV9CVUZGRVI7XHJcblxyXG4gICAgaWYgKG9wdGlvbnMpXHJcbiAgICAgIHRoaXMuZnJvbU9wdGlvbnMob3B0aW9ucyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbmplY3QgcHJvcGVydGllcyBmcm9tIG9wdGlvbnMgb2JqZWN0LlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcclxuICAgKi9cclxuXHJcbiAgZnJvbU9wdGlvbnMob3B0aW9ucykge1xyXG4gICAgYXNzZXJ0KG9wdGlvbnMsICdGaWx0ZXIgZGF0YSBpcyByZXF1aXJlZC4nKTtcclxuICAgIGFzc2VydChCdWZmZXIuaXNCdWZmZXIob3B0aW9ucy5oZWFkZXIpKTtcclxuICAgIGFzc2VydChCdWZmZXIuaXNCdWZmZXIob3B0aW9ucy5maWx0ZXIpKTtcclxuICAgIHRoaXMuaGVhZGVyID0gb3B0aW9ucy5oZWFkZXI7XHJcbiAgICB0aGlzLmZpbHRlciA9IG9wdGlvbnMuZmlsdGVyO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbnN0YW50YXRlIG91dHBvaW50IGZyb20gb3B0aW9ucyBvYmplY3QuXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcclxuICAgKiBAcmV0dXJucyB7RmlsdGVyfVxyXG4gICAqL1xyXG5cclxuICBzdGF0aWMgZnJvbU9wdGlvbnMob3B0aW9ucykge1xyXG4gICAgcmV0dXJuIG5ldyB0aGlzKCkuZnJvbU9wdGlvbnMob3B0aW9ucyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBXcml0ZSBmaWx0ZXIgdG8gYSBidWZmZXIgd3JpdGVyLlxyXG4gICAqIEBwYXJhbSB7QnVmZmVyV3JpdGVyfSBid1xyXG4gICAqL1xyXG5cclxuICB0b1dyaXRlcihidykge1xyXG4gICAgYncud3JpdGVIYXNoKHRoaXMuaGVhZGVyKTtcclxuICAgIGJ3LndyaXRlQnl0ZXModGhpcy5maWx0ZXIpO1xyXG4gICAgcmV0dXJuIGJ3O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2FsY3VsYXRlIHNpemUgb2YgZmlsdGVyLlxyXG4gICAqIEByZXR1cm5zIHtOdW1iZXJ9XHJcbiAgICovXHJcblxyXG4gIGdldFNpemUoKSB7XHJcbiAgICBsZXQgc2l6ZSA9IDA7XHJcbiAgICBzaXplICs9IDMyO1xyXG4gICAgc2l6ZSArPSB0aGlzLmZpbHRlci5sZW5ndGg7XHJcbiAgICByZXR1cm4gc2l6ZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNlcmlhbGl6ZSBmaWx0ZXIuXHJcbiAgICogQHJldHVybnMge0J1ZmZlcn1cclxuICAgKi9cclxuXHJcbiAgdG9SYXcoKSB7XHJcbiAgICBjb25zdCBzaXplID0gdGhpcy5nZXRTaXplKCk7XHJcbiAgICByZXR1cm4gdGhpcy50b1dyaXRlcihiaW8ud3JpdGUoc2l6ZSkpLnJlbmRlcigpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSW5qZWN0IHByb3BlcnRpZXMgZnJvbSBidWZmZXIgcmVhZGVyLlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICogQHBhcmFtIHtCdWZmZXJSZWFkZXJ9IGJyXHJcbiAgICovXHJcblxyXG4gIGZyb21SZWFkZXIoYnIpIHtcclxuICAgIHRoaXMuaGVhZGVyID0gYnIucmVhZEhhc2goKTtcclxuICAgIHRoaXMuZmlsdGVyID0gYnIucmVhZEJ5dGVzKGJyLmdldFNpemUoKSAtIGJyLm9mZnNldCk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEluamVjdCBwcm9wZXJ0aWVzIGZyb20gc2VyaWFsaXplZCBkYXRhLlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICogQHBhcmFtIHtCdWZmZXJ9IGRhdGFcclxuICAgKi9cclxuXHJcbiAgZnJvbVJhdyhkYXRhKSB7XHJcbiAgICByZXR1cm4gdGhpcy5mcm9tUmVhZGVyKGJpby5yZWFkKGRhdGEpKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEluc3RhbnRpYXRlIGZpbHRlciBmcm9tIGEgYnVmZmVyIHJlYWRlci5cclxuICAgKiBAcGFyYW0ge0J1ZmZlclJlYWRlcn0gYnJcclxuICAgKiBAcmV0dXJucyB7RmlsdGVyfVxyXG4gICAqL1xyXG5cclxuICBzdGF0aWMgZnJvbVJlYWRlcihicikge1xyXG4gICAgcmV0dXJuIG5ldyB0aGlzKCkuZnJvbVJlYWRlcihicik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbnN0YW50aWF0ZSBmaWx0ZXIgZnJvbSBzZXJpYWxpemVkIGRhdGEuXHJcbiAgICogQHBhcmFtIHtCdWZmZXJ9IGRhdGFcclxuICAgKiBAcmV0dXJucyB7RmlsdGVyfVxyXG4gICAqL1xyXG5cclxuICBzdGF0aWMgZnJvbVJhdyhkYXRhKSB7XHJcbiAgICByZXR1cm4gbmV3IHRoaXMoKS5mcm9tUmF3KGRhdGEpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSW5qZWN0IHByb3BlcnRpZXMgZnJvbSBqc29uIG9iamVjdC5cclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqIEBwYXJhbXMge09iamVjdH0ganNvblxyXG4gICAqL1xyXG5cclxuICBmcm9tSlNPTihqc29uKSB7XHJcbiAgICBhc3NlcnQoanNvbiwgJ0ZpbHRlciBkYXRhIGlzIHJlcXVpcmVkLicpO1xyXG4gICAgYXNzZXJ0KHR5cGVvZiBqc29uLmZpbHRlciA9PT0gJ3N0cmluZycsICdGaWx0ZXIgbXVzdCBiZSBhIHN0cmluZy4nKTtcclxuICAgIGFzc2VydCh0eXBlb2YganNvbi5oZWFkZXIgPT09ICdzdHJpbmcnLCAnSGVhZGVyIG11c3QgYmUgYSBzdHJpbmcuJyk7XHJcbiAgICB0aGlzLmZpbHRlciA9IEJ1ZmZlci5mcm9tKGpzb24uZmlsdGVyKTtcclxuICAgIHRoaXMuaGVhZGVyID0gQnVmZmVyLmZyb20oanNvbi5oZWFkZXIpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDb252ZXJ0IHRoZSBmaWx0ZXIgdG8gYW4gb2JqZWN0IHN1aXRhYmxlXHJcbiAgICogZm9yIEpTT04gc2VyaWFsaXphdGlvbi5cclxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxyXG4gICAqL1xyXG5cclxuICB0b0pTT04oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBmaWx0ZXI6IHRoaXMuZmlsdGVyLnRvU3RyaW5nKCdoZXgnKSxcclxuICAgICAgaGVhZGVyOiB1dGlsLnJldkhleCh0aGlzLmhlYWRlcilcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbnN0YW50aWF0ZSBmaWx0ZXIgZnJvbSBqc29uIG9iamVjdC5cclxuICAgKiBAcGFyYW0ge09iamVjdH0ganNvblxyXG4gICAqIEByZXR1cm5zIHtGaWx0ZXJ9XHJcbiAgICovXHJcblxyXG4gIHN0YXRpYyBmcm9tSlNPTihqc29uKSB7XHJcbiAgICByZXR1cm4gbmV3IHRoaXMoKS5mcm9tSlNPTihqc29uKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENvbnZlcnQgdGhlIGZpbHRlciB0byBhIHVzZXItZnJpZW5kbHkgc3RyaW5nLlxyXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9XHJcbiAgICovXHJcblxyXG4gIFtpbnNwZWN0U3ltYm9sXSgpIHtcclxuICAgIHJldHVybiBgPEZpbHRlcjogJHt0aGlzLmZpbHRlci50b1N0cmluZygnaGV4Jyl9PmA7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUZXN0IGFuIG9iamVjdCB0byBzZWUgaWYgaXQgaXMgYW4gZmlsdGVyLlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcclxuICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cclxuICAgKi9cclxuXHJcbiAgc3RhdGljIGlzRmlsdGVyKG9iaikge1xyXG4gICAgcmV0dXJuIG9iaiBpbnN0YW5jZW9mIEZpbHRlcjtcclxuICB9XHJcbn1cclxuXHJcbi8qXHJcbiAqIEV4cG9zZVxyXG4gKi9cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gRmlsdGVyO1xyXG4iXX0=