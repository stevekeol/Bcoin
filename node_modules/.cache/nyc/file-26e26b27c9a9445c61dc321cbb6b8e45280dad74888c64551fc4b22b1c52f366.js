/*!
 * blockstore/file.js - file blockstore for bcoin
 * Copyright (c) 2019, Braydon Fuller (MIT License).
 * https://github.com/bcoin-org/bcoin
 */'use strict';function cov_1s9lijb1oc(){var path="E:\\Projects\\Test\\bcoin\\lib\\blockstore\\file.js";var hash="70f8731e67e8451327ef793840dbed31c64eef79";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"E:\\Projects\\Test\\bcoin\\lib\\blockstore\\file.js",statementMap:{"0":{start:{line:9,column:36},end:{line:9,column:51}},"1":{start:{line:10,column:12},end:{line:10,column:26}},"2":{start:{line:11,column:15},end:{line:11,column:31}},"3":{start:{line:12,column:11},end:{line:12,column:27}},"4":{start:{line:13,column:12},end:{line:13,column:28}},"5":{start:{line:14,column:16},end:{line:14,column:46}},"6":{start:{line:15,column:16},end:{line:15,column:46}},"7":{start:{line:16,column:27},end:{line:16,column:48}},"8":{start:{line:17,column:34},end:{line:17,column:54}},"9":{start:{line:18,column:15},end:{line:18,column:34}},"10":{start:{line:19,column:26},end:{line:19,column:45}},"11":{start:{line:35,column:4},end:{line:35,column:19}},"12":{start:{line:37,column:4},end:{line:37,column:67}},"13":{start:{line:39,column:4},end:{line:39,column:37}},"14":{start:{line:40,column:4},end:{line:40,column:59}},"15":{start:{line:42,column:4},end:{line:46,column:7}},"16":{start:{line:48,column:4},end:{line:48,column:68}},"17":{start:{line:50,column:4},end:{line:51,column:34}},"18":{start:{line:53,column:4},end:{line:53,column:35}},"19":{start:{line:55,column:4},end:{line:56,column:50}},"20":{start:{line:56,column:6},end:{line:56,column:50}},"21":{start:{line:58,column:4},end:{line:58,column:39}},"22":{start:{line:70,column:19},end:{line:70,column:33}},"23":{start:{line:71,column:19},end:{line:71,column:58}},"24":{start:{line:72,column:16},end:{line:72,column:47}},"25":{start:{line:73,column:17},end:{line:73,column:48}},"26":{start:{line:73,column:33},end:{line:73,column:47}},"27":{start:{line:74,column:20},end:{line:74,column:63}},"28":{start:{line:74,column:34},end:{line:74,column:62}},"29":{start:{line:76,column:18},end:{line:76,column:23}},"30":{start:{line:78,column:4},end:{line:84,column:5}},"31":{start:{line:79,column:18},end:{line:79,column:66}},"32":{start:{line:80,column:6},end:{line:83,column:7}},"33":{start:{line:81,column:8},end:{line:81,column:23}},"34":{start:{line:82,column:8},end:{line:82,column:14}},"35":{start:{line:86,column:4},end:{line:86,column:30}},"36":{start:{line:99,column:31},end:{line:99,column:53}},"37":{start:{line:101,column:4},end:{line:102,column:13}},"38":{start:{line:102,column:6},end:{line:102,column:13}},"39":{start:{line:104,column:4},end:{line:104,column:56}},"40":{start:{line:106,column:4},end:{line:168,column:5}},"41":{start:{line:107,column:16},end:{line:107,column:31}},"42":{start:{line:108,column:23},end:{line:108,column:50}},"43":{start:{line:109,column:19},end:{line:109,column:46}},"44":{start:{line:110,column:21},end:{line:110,column:35}},"45":{start:{line:111,column:18},end:{line:111,column:22}},"46":{start:{line:112,column:19},end:{line:112,column:20}},"47":{start:{line:114,column:6},end:{line:155,column:7}},"48":{start:{line:115,column:8},end:{line:115,column:33}},"49":{start:{line:119,column:8},end:{line:122,column:9}},"50":{start:{line:120,column:10},end:{line:120,column:26}},"51":{start:{line:121,column:10},end:{line:121,column:19}},"52":{start:{line:124,column:19},end:{line:124,column:23}},"53":{start:{line:125,column:23},end:{line:125,column:24}},"54":{start:{line:126,column:21},end:{line:126,column:22}},"55":{start:{line:128,column:8},end:{line:145,column:9}},"56":{start:{line:129,column:10},end:{line:129,column:36}},"57":{start:{line:131,column:10},end:{line:139,column:11}},"58":{start:{line:132,column:12},end:{line:132,column:37}},"59":{start:{line:133,column:12},end:{line:133,column:62}},"60":{start:{line:134,column:12},end:{line:134,column:37}},"61":{start:{line:136,column:12},end:{line:136,column:37}},"62":{start:{line:137,column:12},end:{line:137,column:37}},"63":{start:{line:138,column:12},end:{line:138,column:32}},"64":{start:{line:141,column:10},end:{line:143,column:35}},"65":{start:{line:144,column:10},end:{line:144,column:19}},"66":{start:{line:147,column:28},end:{line:151,column:10}},"67":{start:{line:153,column:8},end:{line:153,column:20}},"68":{start:{line:154,column:8},end:{line:154,column:64}},"69":{start:{line:157,column:25},end:{line:161,column:8}},"70":{start:{line:163,column:6},end:{line:163,column:63}},"71":{start:{line:165,column:6},end:{line:165,column:22}},"72":{start:{line:167,column:6},end:{line:167,column:73}},"73":{start:{line:180,column:4},end:{line:180,column:35}},"74":{start:{line:181,column:4},end:{line:181,column:36}},"75":{start:{line:182,column:4},end:{line:182,column:34}},"76":{start:{line:193,column:4},end:{line:193,column:41}},"77":{start:{line:203,column:4},end:{line:203,column:50}},"78":{start:{line:205,column:4},end:{line:205,column:25}},"79":{start:{line:206,column:4},end:{line:206,column:65}},"80":{start:{line:208,column:4},end:{line:208,column:23}},"81":{start:{line:217,column:4},end:{line:217,column:50}},"82":{start:{line:219,column:4},end:{line:219,column:26}},"83":{start:{line:232,column:16},end:{line:232,column:17}},"84":{start:{line:234,column:14},end:{line:234,column:33}},"85":{start:{line:236,column:4},end:{line:237,column:48}},"86":{start:{line:237,column:6},end:{line:237,column:48}},"87":{start:{line:239,column:4},end:{line:240,column:22}},"88":{start:{line:240,column:6},end:{line:240,column:22}},"89":{start:{line:242,column:19},end:{line:242,column:23}},"90":{start:{line:244,column:19},end:{line:244,column:33}},"91":{start:{line:246,column:4},end:{line:247,column:46}},"92":{start:{line:247,column:6},end:{line:247,column:46}},"93":{start:{line:249,column:4},end:{line:249,column:58}},"94":{start:{line:251,column:4},end:{line:251,column:20}},"95":{start:{line:264,column:4},end:{line:265,column:61}},"96":{start:{line:265,column:6},end:{line:265,column:61}},"97":{start:{line:267,column:17},end:{line:267,column:18}},"98":{start:{line:268,column:21},end:{line:268,column:25}},"99":{start:{line:269,column:19},end:{line:269,column:23}},"100":{start:{line:271,column:17},end:{line:271,column:57}},"101":{start:{line:272,column:4},end:{line:273,column:36}},"102":{start:{line:273,column:6},end:{line:273,column:36}},"103":{start:{line:275,column:4},end:{line:275,column:43}},"104":{start:{line:277,column:16},end:{line:277,column:64}},"105":{start:{line:279,column:16},end:{line:279,column:21}},"106":{start:{line:281,column:4},end:{line:290,column:5}},"107":{start:{line:282,column:6},end:{line:282,column:43}},"108":{start:{line:284,column:6},end:{line:284,column:19}},"109":{start:{line:285,column:6},end:{line:289,column:9}},"110":{start:{line:292,column:4},end:{line:301,column:5}},"111":{start:{line:293,column:6},end:{line:293,column:18}},"112":{start:{line:294,column:6},end:{line:294,column:45}},"113":{start:{line:295,column:6},end:{line:295,column:19}},"114":{start:{line:296,column:6},end:{line:300,column:9}},"115":{start:{line:303,column:4},end:{line:306,column:5}},"116":{start:{line:304,column:17},end:{line:304,column:45}},"117":{start:{line:305,column:6},end:{line:305,column:25}},"118":{start:{line:308,column:4},end:{line:308,column:42}},"119":{start:{line:319,column:4},end:{line:319,column:49}},"120":{start:{line:330,column:4},end:{line:330,column:47}},"121":{start:{line:341,column:4},end:{line:341,column:48}},"122":{start:{line:352,column:4},end:{line:352,column:49}},"123":{start:{line:367,column:4},end:{line:368,column:42}},"124":{start:{line:368,column:6},end:{line:368,column:42}},"125":{start:{line:370,column:4},end:{line:370,column:30}},"126":{start:{line:372,column:4},end:{line:375,column:5}},"127":{start:{line:373,column:6},end:{line:373,column:33}},"128":{start:{line:374,column:6},end:{line:374,column:19}},"129":{start:{line:377,column:18},end:{line:377,column:19}},"130":{start:{line:382,column:4},end:{line:383,column:20}},"131":{start:{line:383,column:6},end:{line:383,column:20}},"132":{start:{line:385,column:20},end:{line:385,column:31}},"133":{start:{line:386,column:19},end:{line:386,column:40}},"134":{start:{line:388,column:16},end:{line:388,column:34}},"135":{start:{line:390,column:4},end:{line:390,column:37}},"136":{start:{line:391,column:4},end:{line:391,column:26}},"137":{start:{line:393,column:4},end:{line:394,column:26}},"138":{start:{line:394,column:6},end:{line:394,column:26}},"139":{start:{line:396,column:18},end:{line:396,column:30}},"140":{start:{line:402,column:8},end:{line:402,column:41}},"141":{start:{line:404,column:22},end:{line:404,column:37}},"142":{start:{line:405,column:22},end:{line:405,column:47}},"143":{start:{line:407,column:15},end:{line:407,column:44}},"144":{start:{line:409,column:19},end:{line:409,column:20}},"145":{start:{line:410,column:19},end:{line:410,column:20}},"146":{start:{line:412,column:4},end:{line:417,column:5}},"147":{start:{line:413,column:6},end:{line:413,column:66}},"148":{start:{line:414,column:6},end:{line:414,column:65}},"149":{start:{line:416,column:6},end:{line:416,column:25}},"150":{start:{line:419,column:4},end:{line:422,column:5}},"151":{start:{line:420,column:6},end:{line:420,column:33}},"152":{start:{line:421,column:6},end:{line:421,column:54}},"153":{start:{line:424,column:4},end:{line:427,column:5}},"154":{start:{line:425,column:6},end:{line:425,column:33}},"155":{start:{line:426,column:6},end:{line:426,column:48}},"156":{start:{line:429,column:4},end:{line:429,column:27}},"157":{start:{line:430,column:4},end:{line:430,column:30}},"158":{start:{line:432,column:14},end:{line:432,column:29}},"159":{start:{line:434,column:24},end:{line:438,column:6}},"160":{start:{line:440,column:4},end:{line:440,column:60}},"161":{start:{line:441,column:4},end:{line:441,column:61}},"162":{start:{line:443,column:17},end:{line:443,column:55}},"163":{start:{line:444,column:4},end:{line:444,column:39}},"164":{start:{line:446,column:4},end:{line:446,column:20}},"165":{start:{line:448,column:4},end:{line:448,column:31}},"166":{start:{line:450,column:4},end:{line:450,column:16}},"167":{start:{line:460,column:4},end:{line:460,column:42}},"168":{start:{line:470,column:4},end:{line:470,column:40}},"169":{start:{line:484,column:4},end:{line:484,column:57}},"170":{start:{line:494,column:4},end:{line:494,column:42}},"171":{start:{line:504,column:4},end:{line:504,column:49}},"172":{start:{line:519,column:16},end:{line:519,column:62}},"173":{start:{line:520,column:4},end:{line:521,column:18}},"174":{start:{line:521,column:6},end:{line:521,column:18}},"175":{start:{line:523,column:24},end:{line:523,column:48}},"176":{start:{line:525,column:21},end:{line:525,column:58}},"177":{start:{line:527,column:19},end:{line:527,column:39}},"178":{start:{line:529,column:4},end:{line:530,column:25}},"179":{start:{line:530,column:6},end:{line:530,column:25}},"180":{start:{line:532,column:4},end:{line:533,column:43}},"181":{start:{line:533,column:6},end:{line:533,column:43}},"182":{start:{line:535,column:4},end:{line:536,column:34}},"183":{start:{line:536,column:6},end:{line:536,column:34}},"184":{start:{line:538,column:4},end:{line:539,column:45}},"185":{start:{line:539,column:6},end:{line:539,column:45}},"186":{start:{line:541,column:17},end:{line:541,column:37}},"187":{start:{line:543,column:15},end:{line:543,column:43}},"188":{start:{line:544,column:16},end:{line:544,column:17}},"189":{start:{line:546,column:4},end:{line:550,column:5}},"190":{start:{line:547,column:6},end:{line:547,column:59}},"191":{start:{line:549,column:6},end:{line:549,column:25}},"192":{start:{line:552,column:4},end:{line:553,column:53}},"193":{start:{line:553,column:6},end:{line:553,column:53}},"194":{start:{line:555,column:4},end:{line:555,column:16}},"195":{start:{line:565,column:4},end:{line:565,column:43}},"196":{start:{line:575,column:4},end:{line:575,column:41}},"197":{start:{line:585,column:4},end:{line:585,column:42}},"198":{start:{line:595,column:4},end:{line:595,column:43}},"199":{start:{line:609,column:17},end:{line:609,column:63}},"200":{start:{line:610,column:4},end:{line:611,column:19}},"201":{start:{line:611,column:6},end:{line:611,column:19}},"202":{start:{line:613,column:24},end:{line:613,column:49}},"203":{start:{line:615,column:17},end:{line:615,column:75}},"204":{start:{line:616,column:4},end:{line:617,column:19}},"205":{start:{line:617,column:6},end:{line:617,column:19}},"206":{start:{line:619,column:23},end:{line:619,column:47}},"207":{start:{line:621,column:4},end:{line:621,column:27}},"208":{start:{line:623,column:14},end:{line:623,column:29}},"209":{start:{line:625,column:4},end:{line:628,column:73}},"210":{start:{line:626,column:6},end:{line:626,column:53}},"211":{start:{line:628,column:6},end:{line:628,column:73}},"212":{start:{line:630,column:4},end:{line:630,column:39}},"213":{start:{line:632,column:4},end:{line:632,column:20}},"214":{start:{line:634,column:4},end:{line:635,column:61}},"215":{start:{line:635,column:6},end:{line:635,column:61}},"216":{start:{line:637,column:4},end:{line:637,column:16}},"217":{start:{line:648,column:4},end:{line:648,column:66}},"218":{start:{line:659,column:4},end:{line:659,column:64}},"219":{start:{line:670,column:4},end:{line:670,column:66}},"220":{start:{line:680,column:4},end:{line:680,column:65}},"221":{start:{line:688,column:0},end:{line:688,column:32}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:23},end:{line:59,column:3}},line:34},"1":{name:"(anonymous_1)",decl:{start:{line:69,column:2},end:{line:69,column:3}},loc:{start:{line:69,column:20},end:{line:87,column:3}},line:69},"2":{name:"(anonymous_2)",decl:{start:{line:73,column:28},end:{line:73,column:29}},loc:{start:{line:73,column:33},end:{line:73,column:47}},line:73},"3":{name:"(anonymous_3)",decl:{start:{line:74,column:29},end:{line:74,column:30}},loc:{start:{line:74,column:34},end:{line:74,column:62}},line:74},"4":{name:"(anonymous_4)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:21},end:{line:169,column:3}},line:98},"5":{name:"(anonymous_5)",decl:{start:{line:179,column:2},end:{line:179,column:3}},loc:{start:{line:179,column:16},end:{line:183,column:3}},line:179},"6":{name:"(anonymous_6)",decl:{start:{line:192,column:2},end:{line:192,column:3}},loc:{start:{line:192,column:17},end:{line:194,column:3}},line:192},"7":{name:"(anonymous_7)",decl:{start:{line:202,column:2},end:{line:202,column:3}},loc:{start:{line:202,column:15},end:{line:209,column:3}},line:202},"8":{name:"(anonymous_8)",decl:{start:{line:216,column:2},end:{line:216,column:3}},loc:{start:{line:216,column:16},end:{line:220,column:3}},line:216},"9":{name:"(anonymous_9)",decl:{start:{line:231,column:2},end:{line:231,column:3}},loc:{start:{line:231,column:25},end:{line:252,column:3}},line:231},"10":{name:"(anonymous_10)",decl:{start:{line:263,column:2},end:{line:263,column:3}},loc:{start:{line:263,column:31},end:{line:309,column:3}},line:263},"11":{name:"(anonymous_11)",decl:{start:{line:318,column:2},end:{line:318,column:3}},loc:{start:{line:318,column:32},end:{line:320,column:3}},line:318},"12":{name:"(anonymous_12)",decl:{start:{line:329,column:2},end:{line:329,column:3}},loc:{start:{line:329,column:30},end:{line:331,column:3}},line:329},"13":{name:"(anonymous_13)",decl:{start:{line:340,column:2},end:{line:340,column:3}},loc:{start:{line:340,column:26},end:{line:342,column:3}},line:340},"14":{name:"(anonymous_14)",decl:{start:{line:351,column:2},end:{line:351,column:3}},loc:{start:{line:351,column:32},end:{line:353,column:3}},line:351},"15":{name:"(anonymous_15)",decl:{start:{line:366,column:2},end:{line:366,column:3}},loc:{start:{line:366,column:33},end:{line:451,column:3}},line:366},"16":{name:"(anonymous_16)",decl:{start:{line:459,column:2},end:{line:459,column:3}},loc:{start:{line:459,column:25},end:{line:461,column:3}},line:459},"17":{name:"(anonymous_17)",decl:{start:{line:469,column:2},end:{line:469,column:3}},loc:{start:{line:469,column:23},end:{line:471,column:3}},line:469},"18":{name:"(anonymous_18)",decl:{start:{line:483,column:2},end:{line:483,column:3}},loc:{start:{line:483,column:35},end:{line:485,column:3}},line:483},"19":{name:"(anonymous_19)",decl:{start:{line:493,column:2},end:{line:493,column:3}},loc:{start:{line:493,column:25},end:{line:495,column:3}},line:493},"20":{name:"(anonymous_20)",decl:{start:{line:503,column:2},end:{line:503,column:3}},loc:{start:{line:503,column:31},end:{line:505,column:3}},line:503},"21":{name:"(anonymous_21)",decl:{start:{line:518,column:2},end:{line:518,column:3}},loc:{start:{line:518,column:42},end:{line:556,column:3}},line:518},"22":{name:"(anonymous_22)",decl:{start:{line:564,column:2},end:{line:564,column:3}},loc:{start:{line:564,column:26},end:{line:566,column:3}},line:564},"23":{name:"(anonymous_23)",decl:{start:{line:574,column:2},end:{line:574,column:3}},loc:{start:{line:574,column:24},end:{line:576,column:3}},line:574},"24":{name:"(anonymous_24)",decl:{start:{line:584,column:2},end:{line:584,column:3}},loc:{start:{line:584,column:20},end:{line:586,column:3}},line:584},"25":{name:"(anonymous_25)",decl:{start:{line:594,column:2},end:{line:594,column:3}},loc:{start:{line:594,column:26},end:{line:596,column:3}},line:594},"26":{name:"(anonymous_26)",decl:{start:{line:608,column:2},end:{line:608,column:3}},loc:{start:{line:608,column:27},end:{line:638,column:3}},line:608},"27":{name:"(anonymous_27)",decl:{start:{line:647,column:2},end:{line:647,column:3}},loc:{start:{line:647,column:24},end:{line:649,column:3}},line:647},"28":{name:"(anonymous_28)",decl:{start:{line:658,column:2},end:{line:658,column:3}},loc:{start:{line:658,column:22},end:{line:660,column:3}},line:658},"29":{name:"(anonymous_29)",decl:{start:{line:669,column:2},end:{line:669,column:3}},loc:{start:{line:669,column:24},end:{line:671,column:3}},line:669},"30":{name:"(anonymous_30)",decl:{start:{line:679,column:2},end:{line:679,column:3}},loc:{start:{line:679,column:18},end:{line:681,column:3}},line:679}},branchMap:{"0":{loc:{start:{line:48,column:25},end:{line:48,column:67}},type:"binary-expr",locations:[{start:{line:48,column:25},end:{line:48,column:46}},{start:{line:48,column:50},end:{line:48,column:67}}],line:48},"1":{loc:{start:{line:55,column:4},end:{line:56,column:50}},type:"if",locations:[{start:{line:55,column:4},end:{line:56,column:50}},{start:{line:55,column:4},end:{line:56,column:50}}],line:55},"2":{loc:{start:{line:80,column:6},end:{line:83,column:7}},type:"if",locations:[{start:{line:80,column:6},end:{line:83,column:7}},{start:{line:80,column:6},end:{line:83,column:7}}],line:80},"3":{loc:{start:{line:101,column:4},end:{line:102,column:13}},type:"if",locations:[{start:{line:101,column:4},end:{line:102,column:13}},{start:{line:101,column:4},end:{line:102,column:13}}],line:101},"4":{loc:{start:{line:119,column:8},end:{line:122,column:9}},type:"if",locations:[{start:{line:119,column:8},end:{line:122,column:9}},{start:{line:119,column:8},end:{line:122,column:9}}],line:119},"5":{loc:{start:{line:131,column:10},end:{line:139,column:11}},type:"if",locations:[{start:{line:131,column:10},end:{line:139,column:11}},{start:{line:131,column:10},end:{line:139,column:11}}],line:131},"6":{loc:{start:{line:131,column:14},end:{line:131,column:59}},type:"binary-expr",locations:[{start:{line:131,column:14},end:{line:131,column:34}},{start:{line:131,column:38},end:{line:131,column:59}}],line:131},"7":{loc:{start:{line:236,column:4},end:{line:237,column:48}},type:"if",locations:[{start:{line:236,column:4},end:{line:237,column:48}},{start:{line:236,column:4},end:{line:237,column:48}}],line:236},"8":{loc:{start:{line:246,column:4},end:{line:247,column:46}},type:"if",locations:[{start:{line:246,column:4},end:{line:247,column:46}},{start:{line:246,column:4},end:{line:247,column:46}}],line:246},"9":{loc:{start:{line:264,column:4},end:{line:265,column:61}},type:"if",locations:[{start:{line:264,column:4},end:{line:265,column:61}},{start:{line:264,column:4},end:{line:265,column:61}}],line:264},"10":{loc:{start:{line:272,column:4},end:{line:273,column:36}},type:"if",locations:[{start:{line:272,column:4},end:{line:273,column:36}},{start:{line:272,column:4},end:{line:273,column:36}}],line:272},"11":{loc:{start:{line:281,column:4},end:{line:290,column:5}},type:"if",locations:[{start:{line:281,column:4},end:{line:290,column:5}},{start:{line:281,column:4},end:{line:290,column:5}}],line:281},"12":{loc:{start:{line:292,column:4},end:{line:301,column:5}},type:"if",locations:[{start:{line:292,column:4},end:{line:301,column:5}},{start:{line:292,column:4},end:{line:301,column:5}}],line:292},"13":{loc:{start:{line:303,column:4},end:{line:306,column:5}},type:"if",locations:[{start:{line:303,column:4},end:{line:306,column:5}},{start:{line:303,column:4},end:{line:306,column:5}}],line:303},"14":{loc:{start:{line:367,column:4},end:{line:368,column:42}},type:"if",locations:[{start:{line:367,column:4},end:{line:368,column:42}},{start:{line:367,column:4},end:{line:368,column:42}}],line:367},"15":{loc:{start:{line:372,column:4},end:{line:375,column:5}},type:"if",locations:[{start:{line:372,column:4},end:{line:375,column:5}},{start:{line:372,column:4},end:{line:375,column:5}}],line:372},"16":{loc:{start:{line:382,column:4},end:{line:383,column:20}},type:"if",locations:[{start:{line:382,column:4},end:{line:383,column:20}},{start:{line:382,column:4},end:{line:383,column:20}}],line:382},"17":{loc:{start:{line:382,column:8},end:{line:382,column:53}},type:"binary-expr",locations:[{start:{line:382,column:8},end:{line:382,column:28}},{start:{line:382,column:32},end:{line:382,column:53}}],line:382},"18":{loc:{start:{line:393,column:4},end:{line:394,column:26}},type:"if",locations:[{start:{line:393,column:4},end:{line:394,column:26}},{start:{line:393,column:4},end:{line:394,column:26}}],line:393},"19":{loc:{start:{line:393,column:8},end:{line:393,column:53}},type:"binary-expr",locations:[{start:{line:393,column:8},end:{line:393,column:28}},{start:{line:393,column:32},end:{line:393,column:53}}],line:393},"20":{loc:{start:{line:419,column:4},end:{line:422,column:5}},type:"if",locations:[{start:{line:419,column:4},end:{line:422,column:5}},{start:{line:419,column:4},end:{line:422,column:5}}],line:419},"21":{loc:{start:{line:424,column:4},end:{line:427,column:5}},type:"if",locations:[{start:{line:424,column:4},end:{line:427,column:5}},{start:{line:424,column:4},end:{line:427,column:5}}],line:424},"22":{loc:{start:{line:520,column:4},end:{line:521,column:18}},type:"if",locations:[{start:{line:520,column:4},end:{line:521,column:18}},{start:{line:520,column:4},end:{line:521,column:18}}],line:520},"23":{loc:{start:{line:529,column:4},end:{line:530,column:25}},type:"if",locations:[{start:{line:529,column:4},end:{line:530,column:25}},{start:{line:529,column:4},end:{line:530,column:25}}],line:529},"24":{loc:{start:{line:532,column:4},end:{line:533,column:43}},type:"if",locations:[{start:{line:532,column:4},end:{line:533,column:43}},{start:{line:532,column:4},end:{line:533,column:43}}],line:532},"25":{loc:{start:{line:532,column:8},end:{line:532,column:29}},type:"binary-expr",locations:[{start:{line:532,column:8},end:{line:532,column:15}},{start:{line:532,column:19},end:{line:532,column:29}}],line:532},"26":{loc:{start:{line:535,column:4},end:{line:536,column:34}},type:"if",locations:[{start:{line:535,column:4},end:{line:536,column:34}},{start:{line:535,column:4},end:{line:536,column:34}}],line:535},"27":{loc:{start:{line:538,column:4},end:{line:539,column:45}},type:"if",locations:[{start:{line:538,column:4},end:{line:539,column:45}},{start:{line:538,column:4},end:{line:539,column:45}}],line:538},"28":{loc:{start:{line:552,column:4},end:{line:553,column:53}},type:"if",locations:[{start:{line:552,column:4},end:{line:553,column:53}},{start:{line:552,column:4},end:{line:553,column:53}}],line:552},"29":{loc:{start:{line:610,column:4},end:{line:611,column:19}},type:"if",locations:[{start:{line:610,column:4},end:{line:611,column:19}},{start:{line:610,column:4},end:{line:611,column:19}}],line:610},"30":{loc:{start:{line:616,column:4},end:{line:617,column:19}},type:"if",locations:[{start:{line:616,column:4},end:{line:617,column:19}},{start:{line:616,column:4},end:{line:617,column:19}}],line:616},"31":{loc:{start:{line:625,column:4},end:{line:628,column:73}},type:"if",locations:[{start:{line:625,column:4},end:{line:628,column:73}},{start:{line:625,column:4},end:{line:628,column:73}}],line:625},"32":{loc:{start:{line:634,column:4},end:{line:635,column:61}},type:"if",locations:[{start:{line:634,column:4},end:{line:635,column:61}},{start:{line:634,column:4},end:{line:635,column:61}}],line:634}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"70f8731e67e8451327ef793840dbed31c64eef79"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1s9lijb1oc=function(){return actualCoverage;};}return actualCoverage;}cov_1s9lijb1oc();const{isAbsolute,resolve,join}=(cov_1s9lijb1oc().s[0]++,require('path'));const bdb=(cov_1s9lijb1oc().s[1]++,require('bdb'));const assert=(cov_1s9lijb1oc().s[2]++,require('bsert'));const fs=(cov_1s9lijb1oc().s[3]++,require('bfile'));const bio=(cov_1s9lijb1oc().s[4]++,require('bufio'));const hash256=(cov_1s9lijb1oc().s[5]++,require('bcrypto/lib/hash256'));const Network=(cov_1s9lijb1oc().s[6]++,require('../protocol/network'));const AbstractBlockStore=(cov_1s9lijb1oc().s[7]++,require('./abstract'));const{BlockRecord,FileRecord}=(cov_1s9lijb1oc().s[8]++,require('./records'));const layout=(cov_1s9lijb1oc().s[9]++,require('./layout'));const{types,prefixes}=(cov_1s9lijb1oc().s[10]++,require('./common'));/**
 * File Block Store
 *
 * @alias module:blockstore:FileBlockStore
 * @abstract
 */class FileBlockStore extends AbstractBlockStore{/**
   * Create a blockstore that stores blocks in files.
   * @constructor
   */constructor(options){cov_1s9lijb1oc().f[0]++;cov_1s9lijb1oc().s[11]++;super(options);cov_1s9lijb1oc().s[12]++;assert(isAbsolute(options.location),'Location not absolute.');cov_1s9lijb1oc().s[13]++;this.location=options.location;cov_1s9lijb1oc().s[14]++;this.indexLocation=resolve(this.location,'./index');cov_1s9lijb1oc().s[15]++;this.db=bdb.create({location:this.indexLocation,cacheSize:options.cacheSize,compression:false});cov_1s9lijb1oc().s[16]++;this.maxFileLength=(cov_1s9lijb1oc().b[0][0]++,options.maxFileLength)||(cov_1s9lijb1oc().b[0][1]++,128*1024*1024);cov_1s9lijb1oc().s[17]++;assert(Number.isSafeInteger(this.maxFileLength),'Invalid max file length.');cov_1s9lijb1oc().s[18]++;this.network=Network.primary;cov_1s9lijb1oc().s[19]++;if(options.network!=null){cov_1s9lijb1oc().b[1][0]++;cov_1s9lijb1oc().s[20]++;this.network=Network.get(options.network);}else{cov_1s9lijb1oc().b[1][1]++;}cov_1s9lijb1oc().s[21]++;this.writing=Object.create(null);}/**
   * Compares the number of files in the directory
   * with the recorded number of files.
   * @param {Number} type - The type of block data
   * @private
   * @returns {Promise}
   */async check(type){cov_1s9lijb1oc().f[1]++;const prefix=(cov_1s9lijb1oc().s[22]++,prefixes[type]);const regexp=(cov_1s9lijb1oc().s[23]++,new RegExp(`^${prefix}(\\d{5})\\.dat$`));const all=(cov_1s9lijb1oc().s[24]++,await fs.readdir(this.location));const dats=(cov_1s9lijb1oc().s[25]++,all.filter(f=>{cov_1s9lijb1oc().f[2]++;cov_1s9lijb1oc().s[26]++;return regexp.test(f);}));const filenos=(cov_1s9lijb1oc().s[27]++,dats.map(f=>{cov_1s9lijb1oc().f[3]++;cov_1s9lijb1oc().s[28]++;return parseInt(f.match(regexp)[1]);}));let missing=(cov_1s9lijb1oc().s[29]++,false);cov_1s9lijb1oc().s[30]++;for(const fileno of filenos){const rec=(cov_1s9lijb1oc().s[31]++,await this.db.get(layout.f.encode(type,fileno)));cov_1s9lijb1oc().s[32]++;if(!rec){cov_1s9lijb1oc().b[2][0]++;cov_1s9lijb1oc().s[33]++;missing=true;cov_1s9lijb1oc().s[34]++;break;}else{cov_1s9lijb1oc().b[2][1]++;}}cov_1s9lijb1oc().s[35]++;return{missing,filenos};}/**
   * Creates indexes from files for a block type. Reads the hash of
   * the block data from the magic prefix, except for a block which
   * the hash is read from the block header.
   * @private
   * @param {Number} type - The type of block data
   * @returns {Promise}
   */async _index(type){cov_1s9lijb1oc().f[4]++;const{missing,filenos}=(cov_1s9lijb1oc().s[36]++,await this.check(type));cov_1s9lijb1oc().s[37]++;if(!missing){cov_1s9lijb1oc().b[3][0]++;cov_1s9lijb1oc().s[38]++;return;}else{cov_1s9lijb1oc().b[3][1]++;}cov_1s9lijb1oc().s[39]++;this.logger.info('Indexing block type %d...',type);cov_1s9lijb1oc().s[40]++;for(const fileno of filenos){const b=(cov_1s9lijb1oc().s[41]++,this.db.batch());const filepath=(cov_1s9lijb1oc().s[42]++,this.filepath(type,fileno));const data=(cov_1s9lijb1oc().s[43]++,await fs.readFile(filepath));const reader=(cov_1s9lijb1oc().s[44]++,bio.read(data));let magic=(cov_1s9lijb1oc().s[45]++,null);let blocks=(cov_1s9lijb1oc().s[46]++,0);cov_1s9lijb1oc().s[47]++;while(reader.left()>=4){cov_1s9lijb1oc().s[48]++;magic=reader.readU32();// Move forward a byte from the last read
// if the magic doesn't match.
cov_1s9lijb1oc().s[49]++;if(magic!==this.network.magic){cov_1s9lijb1oc().b[4][0]++;cov_1s9lijb1oc().s[50]++;reader.seek(-3);cov_1s9lijb1oc().s[51]++;continue;}else{cov_1s9lijb1oc().b[4][1]++;}let hash=(cov_1s9lijb1oc().s[52]++,null);let position=(cov_1s9lijb1oc().s[53]++,0);let length=(cov_1s9lijb1oc().s[54]++,0);cov_1s9lijb1oc().s[55]++;try{cov_1s9lijb1oc().s[56]++;length=reader.readU32();cov_1s9lijb1oc().s[57]++;if((cov_1s9lijb1oc().b[6][0]++,type===types.BLOCK)||(cov_1s9lijb1oc().b[6][1]++,type===types.MERKLE)){cov_1s9lijb1oc().b[5][0]++;cov_1s9lijb1oc().s[58]++;position=reader.offset;cov_1s9lijb1oc().s[59]++;hash=hash256.digest(reader.readBytes(80,true));cov_1s9lijb1oc().s[60]++;reader.seek(length-80);}else{cov_1s9lijb1oc().b[5][1]++;cov_1s9lijb1oc().s[61]++;hash=reader.readHash();cov_1s9lijb1oc().s[62]++;position=reader.offset;cov_1s9lijb1oc().s[63]++;reader.seek(length);}}catch(err){cov_1s9lijb1oc().s[64]++;this.logger.warning('Unknown block in file: %s, reason: %s',filepath,err.message);cov_1s9lijb1oc().s[65]++;continue;}const blockrecord=(cov_1s9lijb1oc().s[66]++,new BlockRecord({file:fileno,position:position,length:length}));cov_1s9lijb1oc().s[67]++;blocks+=1;cov_1s9lijb1oc().s[68]++;b.put(layout.b.encode(type,hash),blockrecord.toRaw());}const filerecord=(cov_1s9lijb1oc().s[69]++,new FileRecord({blocks:blocks,used:reader.offset,length:this.maxFileLength}));cov_1s9lijb1oc().s[70]++;b.put(layout.f.encode(type,fileno),filerecord.toRaw());cov_1s9lijb1oc().s[71]++;await b.write();cov_1s9lijb1oc().s[72]++;this.logger.info('Indexed %d blocks (file=%s).',blocks,filepath);}}/**
   * Compares the number of files in the directory
   * with the recorded number of files. If there are any
   * inconsistencies it will reindex all blocks.
   * @private
   * @returns {Promise}
   */async index(){cov_1s9lijb1oc().f[5]++;cov_1s9lijb1oc().s[73]++;await this._index(types.BLOCK);cov_1s9lijb1oc().s[74]++;await this._index(types.MERKLE);cov_1s9lijb1oc().s[75]++;await this._index(types.UNDO);}/**
   * This method ensures that both the block storage directory
   * and index directory exist.
   * before opening.
   * @returns {Promise}
   */async ensure(){cov_1s9lijb1oc().f[6]++;cov_1s9lijb1oc().s[76]++;return fs.mkdirp(this.indexLocation);}/**
   * Opens the file block store. It will regenerate necessary block
   * indexing if the index is missing or inconsistent.
   * @returns {Promise}
   */async open(){cov_1s9lijb1oc().f[7]++;cov_1s9lijb1oc().s[77]++;this.logger.info('Opening FileBlockStore...');cov_1s9lijb1oc().s[78]++;await this.db.open();cov_1s9lijb1oc().s[79]++;await this.db.verify(layout.V.encode(),'fileblockstore',0);cov_1s9lijb1oc().s[80]++;await this.index();}/**
   * This closes the file block store and underlying
   * indexing databases.
   */async close(){cov_1s9lijb1oc().f[8]++;cov_1s9lijb1oc().s[81]++;this.logger.info('Closing FileBlockStore...');cov_1s9lijb1oc().s[82]++;await this.db.close();}/**
   * This method will determine the file path based on the file number
   * and the current block data location.
   * @private
   * @param {Number} type - The type of block data
   * @param {Number} fileno - The number of the file.
   * @returns {Promise}
   */filepath(type,fileno){cov_1s9lijb1oc().f[9]++;const pad=(cov_1s9lijb1oc().s[83]++,5);let num=(cov_1s9lijb1oc().s[84]++,fileno.toString(10));cov_1s9lijb1oc().s[85]++;if(num.length>pad){cov_1s9lijb1oc().b[7][0]++;cov_1s9lijb1oc().s[86]++;throw new Error('File number too large.');}else{cov_1s9lijb1oc().b[7][1]++;}cov_1s9lijb1oc().s[87]++;while(num.length<pad){cov_1s9lijb1oc().s[88]++;num=`0${num}`;}let filepath=(cov_1s9lijb1oc().s[89]++,null);const prefix=(cov_1s9lijb1oc().s[90]++,prefixes[type]);cov_1s9lijb1oc().s[91]++;if(!prefix){cov_1s9lijb1oc().b[8][0]++;cov_1s9lijb1oc().s[92]++;throw new Error('Unknown file prefix.');}else{cov_1s9lijb1oc().b[8][1]++;}cov_1s9lijb1oc().s[93]++;filepath=join(this.location,`${prefix}${num}.dat`);cov_1s9lijb1oc().s[94]++;return filepath;}/**
   * This method will select and potentially allocate a file to
   * write a block based on the size and type.
   * @private
   * @param {Number} type - The type of block data
   * @param {Number} length - The number of bytes
   * @returns {Promise}
   */async allocate(type,length){cov_1s9lijb1oc().f[10]++;cov_1s9lijb1oc().s[95]++;if(length>this.maxFileLength){cov_1s9lijb1oc().b[9][0]++;cov_1s9lijb1oc().s[96]++;throw new Error('Block length above max file length.');}else{cov_1s9lijb1oc().b[9][1]++;}let fileno=(cov_1s9lijb1oc().s[97]++,0);let filerecord=(cov_1s9lijb1oc().s[98]++,null);let filepath=(cov_1s9lijb1oc().s[99]++,null);const last=(cov_1s9lijb1oc().s[100]++,await this.db.get(layout.F.encode(type)));cov_1s9lijb1oc().s[101]++;if(last){cov_1s9lijb1oc().b[10][0]++;cov_1s9lijb1oc().s[102]++;fileno=bio.readU32(last,0);}else{cov_1s9lijb1oc().b[10][1]++;}cov_1s9lijb1oc().s[103]++;filepath=this.filepath(type,fileno);const rec=(cov_1s9lijb1oc().s[104]++,await this.db.get(layout.f.encode(type,fileno)));let touch=(cov_1s9lijb1oc().s[105]++,false);cov_1s9lijb1oc().s[106]++;if(rec){cov_1s9lijb1oc().b[11][0]++;cov_1s9lijb1oc().s[107]++;filerecord=FileRecord.fromRaw(rec);}else{cov_1s9lijb1oc().b[11][1]++;cov_1s9lijb1oc().s[108]++;touch=true;cov_1s9lijb1oc().s[109]++;filerecord=new FileRecord({blocks:0,used:0,length:this.maxFileLength});}cov_1s9lijb1oc().s[110]++;if(filerecord.used+length>filerecord.length){cov_1s9lijb1oc().b[12][0]++;cov_1s9lijb1oc().s[111]++;fileno+=1;cov_1s9lijb1oc().s[112]++;filepath=this.filepath(type,fileno);cov_1s9lijb1oc().s[113]++;touch=true;cov_1s9lijb1oc().s[114]++;filerecord=new FileRecord({blocks:0,used:0,length:this.maxFileLength});}else{cov_1s9lijb1oc().b[12][1]++;}cov_1s9lijb1oc().s[115]++;if(touch){cov_1s9lijb1oc().b[13][0]++;const fd=(cov_1s9lijb1oc().s[116]++,await fs.open(filepath,'w'));cov_1s9lijb1oc().s[117]++;await fs.close(fd);}else{cov_1s9lijb1oc().b[13][1]++;}cov_1s9lijb1oc().s[118]++;return{fileno,filerecord,filepath};}/**
   * This method stores merkle block data in files.
   * @param {Buffer} hash - The block hash
   * @param {Buffer} data - The block data
   * @returns {Promise}
   */async writeMerkle(hash,data){cov_1s9lijb1oc().f[11]++;cov_1s9lijb1oc().s[119]++;return this._write(types.MERKLE,hash,data);}/**
   * This method stores block undo coin data in files.
   * @param {Buffer} hash - The block hash
   * @param {Buffer} data - The block data
   * @returns {Promise}
   */async writeUndo(hash,data){cov_1s9lijb1oc().f[12]++;cov_1s9lijb1oc().s[120]++;return this._write(types.UNDO,hash,data);}/**
   * This method stores block data in files.
   * @param {Buffer} hash - The block hash
   * @param {Buffer} data - The block data
   * @returns {Promise}
   */async write(hash,data){cov_1s9lijb1oc().f[13]++;cov_1s9lijb1oc().s[121]++;return this._write(types.BLOCK,hash,data);}/**
   * This method stores serialized block filter data in files.
   * @param {Buffer} hash - The block hash
   * @param {Buffer} data - The serialized block filter data.
   * @returns {Promise}
   */async writeFilter(hash,data){cov_1s9lijb1oc().f[14]++;cov_1s9lijb1oc().s[122]++;return this._write(types.FILTER,hash,data);}/**
   * This method stores block data in files with by appending
   * data to the last written file and updating indexes to point
   * to the file and position.
   * @private
   * @param {Number} type - The type of block data
   * @param {Buffer} hash - The block hash
   * @param {Buffer} data - The block data
   * @returns {Promise}
   */async _write(type,hash,data){cov_1s9lijb1oc().f[15]++;cov_1s9lijb1oc().s[123]++;if(this.writing[type]){cov_1s9lijb1oc().b[14][0]++;cov_1s9lijb1oc().s[124]++;throw new Error('Already writing.');}else{cov_1s9lijb1oc().b[14][1]++;}cov_1s9lijb1oc().s[125]++;this.writing[type]=true;cov_1s9lijb1oc().s[126]++;if(await this.db.has(layout.b.encode(type,hash))){cov_1s9lijb1oc().b[15][0]++;cov_1s9lijb1oc().s[127]++;this.writing[type]=false;cov_1s9lijb1oc().s[128]++;return false;}else{cov_1s9lijb1oc().b[15][1]++;}let mlength=(cov_1s9lijb1oc().s[129]++,8);// Hash for a block is not stored with
// the magic prefix as it's read from the header
// of the block data.
cov_1s9lijb1oc().s[130]++;if((cov_1s9lijb1oc().b[17][0]++,type!==types.BLOCK)&&(cov_1s9lijb1oc().b[17][1]++,type!==types.MERKLE)){cov_1s9lijb1oc().b[16][0]++;cov_1s9lijb1oc().s[131]++;mlength+=32;}else{cov_1s9lijb1oc().b[16][1]++;}const blength=(cov_1s9lijb1oc().s[132]++,data.length);const length=(cov_1s9lijb1oc().s[133]++,data.length+mlength);const bwm=(cov_1s9lijb1oc().s[134]++,bio.write(mlength));cov_1s9lijb1oc().s[135]++;bwm.writeU32(this.network.magic);cov_1s9lijb1oc().s[136]++;bwm.writeU32(blength);cov_1s9lijb1oc().s[137]++;if((cov_1s9lijb1oc().b[19][0]++,type!==types.BLOCK)&&(cov_1s9lijb1oc().b[19][1]++,type!==types.MERKLE)){cov_1s9lijb1oc().b[18][0]++;cov_1s9lijb1oc().s[138]++;bwm.writeHash(hash);}else{cov_1s9lijb1oc().b[18][1]++;}const magic=(cov_1s9lijb1oc().s[139]++,bwm.render());const{fileno,filerecord,filepath}=(cov_1s9lijb1oc().s[140]++,await this.allocate(type,length));const mposition=(cov_1s9lijb1oc().s[141]++,filerecord.used);const bposition=(cov_1s9lijb1oc().s[142]++,filerecord.used+mlength);const fd=(cov_1s9lijb1oc().s[143]++,await fs.open(filepath,'r+'));let mwritten=(cov_1s9lijb1oc().s[144]++,0);let bwritten=(cov_1s9lijb1oc().s[145]++,0);cov_1s9lijb1oc().s[146]++;try{cov_1s9lijb1oc().s[147]++;mwritten=await fs.write(fd,magic,0,mlength,mposition);cov_1s9lijb1oc().s[148]++;bwritten=await fs.write(fd,data,0,blength,bposition);}finally{cov_1s9lijb1oc().s[149]++;await fs.close(fd);}cov_1s9lijb1oc().s[150]++;if(mwritten!==mlength){cov_1s9lijb1oc().b[20][0]++;cov_1s9lijb1oc().s[151]++;this.writing[type]=false;cov_1s9lijb1oc().s[152]++;throw new Error('Could not write block magic.');}else{cov_1s9lijb1oc().b[20][1]++;}cov_1s9lijb1oc().s[153]++;if(bwritten!==blength){cov_1s9lijb1oc().b[21][0]++;cov_1s9lijb1oc().s[154]++;this.writing[type]=false;cov_1s9lijb1oc().s[155]++;throw new Error('Could not write block.');}else{cov_1s9lijb1oc().b[21][1]++;}cov_1s9lijb1oc().s[156]++;filerecord.blocks+=1;cov_1s9lijb1oc().s[157]++;filerecord.used+=length;const b=(cov_1s9lijb1oc().s[158]++,this.db.batch());const blockrecord=(cov_1s9lijb1oc().s[159]++,new BlockRecord({file:fileno,position:bposition,length:blength}));cov_1s9lijb1oc().s[160]++;b.put(layout.b.encode(type,hash),blockrecord.toRaw());cov_1s9lijb1oc().s[161]++;b.put(layout.f.encode(type,fileno),filerecord.toRaw());const last=(cov_1s9lijb1oc().s[162]++,bio.write(4).writeU32(fileno).render());cov_1s9lijb1oc().s[163]++;b.put(layout.F.encode(type),last);cov_1s9lijb1oc().s[164]++;await b.write();cov_1s9lijb1oc().s[165]++;this.writing[type]=false;cov_1s9lijb1oc().s[166]++;return true;}/**
   * This method will retrieve merkle block data.
   * @param {Buffer} hash - The block hash
   * @returns {Promise}
   */async readMerkle(hash){cov_1s9lijb1oc().f[16]++;cov_1s9lijb1oc().s[167]++;return this._read(types.MERKLE,hash);}/**
   * This method will retrieve block undo coin data.
   * @param {Buffer} hash - The block hash
   * @returns {Promise}
   */async readUndo(hash){cov_1s9lijb1oc().f[17]++;cov_1s9lijb1oc().s[168]++;return this._read(types.UNDO,hash);}/**
   * This method will retrieve block data. Smaller portions of the
   * block (e.g. transactions) can be read by using the offset and
   * length arguments.
   * @param {Buffer} hash - The block hash
   * @param {Number} offset - The offset within the block
   * @param {Number} length - The number of bytes of the data
   * @returns {Promise}
   */async read(hash,offset,length){cov_1s9lijb1oc().f[18]++;cov_1s9lijb1oc().s[169]++;return this._read(types.BLOCK,hash,offset,length);}/**
   * This method will retrieve serialized block filter data.
   * @param {Buffer} hash - The block hash
   * @returns {Promise}
   */async readFilter(hash){cov_1s9lijb1oc().f[19]++;cov_1s9lijb1oc().s[170]++;return this._read(types.FILTER,hash);}/**
   * This method will retrieve block filter header only.
   * @param {Buffer} hash - The block hash
   * @returns {Promise}
   */async readFilterHeader(hash){cov_1s9lijb1oc().f[20]++;cov_1s9lijb1oc().s[171]++;return this._read(types.FILTER,hash,0,32);}/**
   * This methods reads data from disk by retrieving the index of
   * the data and reading from the corresponding file and location.
   * @private
   * @param {Number} type - The type of block data
   * @param {Buffer} hash - The block hash
   * @param {Number} offset - The offset within the block
   * @param {Number} length - The number of bytes of the data
   * @returns {Promise}
   */async _read(type,hash,offset,length){cov_1s9lijb1oc().f[21]++;const raw=(cov_1s9lijb1oc().s[172]++,await this.db.get(layout.b.encode(type,hash)));cov_1s9lijb1oc().s[173]++;if(!raw){cov_1s9lijb1oc().b[22][0]++;cov_1s9lijb1oc().s[174]++;return null;}else{cov_1s9lijb1oc().b[22][1]++;}const blockrecord=(cov_1s9lijb1oc().s[175]++,BlockRecord.fromRaw(raw));const filepath=(cov_1s9lijb1oc().s[176]++,this.filepath(type,blockrecord.file));let position=(cov_1s9lijb1oc().s[177]++,blockrecord.position);cov_1s9lijb1oc().s[178]++;if(offset){cov_1s9lijb1oc().b[23][0]++;cov_1s9lijb1oc().s[179]++;position+=offset;}else{cov_1s9lijb1oc().b[23][1]++;}cov_1s9lijb1oc().s[180]++;if((cov_1s9lijb1oc().b[25][0]++,!length)&&(cov_1s9lijb1oc().b[25][1]++,offset>0)){cov_1s9lijb1oc().b[24][0]++;cov_1s9lijb1oc().s[181]++;length=blockrecord.length-offset;}else{cov_1s9lijb1oc().b[24][1]++;}cov_1s9lijb1oc().s[182]++;if(!length){cov_1s9lijb1oc().b[26][0]++;cov_1s9lijb1oc().s[183]++;length=blockrecord.length;}else{cov_1s9lijb1oc().b[26][1]++;}cov_1s9lijb1oc().s[184]++;if(offset+length>blockrecord.length){cov_1s9lijb1oc().b[27][0]++;cov_1s9lijb1oc().s[185]++;throw new Error('Out-of-bounds read.');}else{cov_1s9lijb1oc().b[27][1]++;}const data=(cov_1s9lijb1oc().s[186]++,Buffer.alloc(length));const fd=(cov_1s9lijb1oc().s[187]++,await fs.open(filepath,'r'));let bytes=(cov_1s9lijb1oc().s[188]++,0);cov_1s9lijb1oc().s[189]++;try{cov_1s9lijb1oc().s[190]++;bytes=await fs.read(fd,data,0,length,position);}finally{cov_1s9lijb1oc().s[191]++;await fs.close(fd);}cov_1s9lijb1oc().s[192]++;if(bytes!==length){cov_1s9lijb1oc().b[28][0]++;cov_1s9lijb1oc().s[193]++;throw new Error('Wrong number of bytes read.');}else{cov_1s9lijb1oc().b[28][1]++;}cov_1s9lijb1oc().s[194]++;return data;}/**
   * This will free resources for storing merkle block data.
   * @param {Buffer} hash - The block hash
   * @returns {Promise}
   */async pruneMerkle(hash){cov_1s9lijb1oc().f[22]++;cov_1s9lijb1oc().s[195]++;return this._prune(types.MERKLE,hash);}/**
   * This will free resources for storing the block undo coin data.
   * @param {Buffer} hash - The block hash
   * @returns {Promise}
   */async pruneUndo(hash){cov_1s9lijb1oc().f[23]++;cov_1s9lijb1oc().s[196]++;return this._prune(types.UNDO,hash);}/**
   * This will free resources for storing the block data.
   * @param {Buffer} hash - The block hash
   * @returns {Promise}
   */async prune(hash){cov_1s9lijb1oc().f[24]++;cov_1s9lijb1oc().s[197]++;return this._prune(types.BLOCK,hash);}/**
   * This will free resources for storing the serialized block filter data.
   * @param {Buffer} hash - The block hash
   * @returns {Promise}
   */async pruneFilter(hash){cov_1s9lijb1oc().f[25]++;cov_1s9lijb1oc().s[198]++;return this._prune(types.FILTER,hash);}/**
   * This will free resources for storing the block data. The block
   * data may not be deleted from disk immediately, the index for the
   * block is removed and will not be able to be read. The underlying
   * file is unlinked when all blocks in a file have been pruned.
   * @private
   * @param {Buffer} hash - The block hash
   * @returns {Promise}
   */async _prune(type,hash){cov_1s9lijb1oc().f[26]++;const braw=(cov_1s9lijb1oc().s[199]++,await this.db.get(layout.b.encode(type,hash)));cov_1s9lijb1oc().s[200]++;if(!braw){cov_1s9lijb1oc().b[29][0]++;cov_1s9lijb1oc().s[201]++;return false;}else{cov_1s9lijb1oc().b[29][1]++;}const blockrecord=(cov_1s9lijb1oc().s[202]++,BlockRecord.fromRaw(braw));const fraw=(cov_1s9lijb1oc().s[203]++,await this.db.get(layout.f.encode(type,blockrecord.file)));cov_1s9lijb1oc().s[204]++;if(!fraw){cov_1s9lijb1oc().b[30][0]++;cov_1s9lijb1oc().s[205]++;return false;}else{cov_1s9lijb1oc().b[30][1]++;}const filerecord=(cov_1s9lijb1oc().s[206]++,FileRecord.fromRaw(fraw));cov_1s9lijb1oc().s[207]++;filerecord.blocks-=1;const b=(cov_1s9lijb1oc().s[208]++,this.db.batch());cov_1s9lijb1oc().s[209]++;if(filerecord.blocks===0){cov_1s9lijb1oc().b[31][0]++;cov_1s9lijb1oc().s[210]++;b.del(layout.f.encode(type,blockrecord.file));}else{cov_1s9lijb1oc().b[31][1]++;cov_1s9lijb1oc().s[211]++;b.put(layout.f.encode(type,blockrecord.file),filerecord.toRaw());}cov_1s9lijb1oc().s[212]++;b.del(layout.b.encode(type,hash));cov_1s9lijb1oc().s[213]++;await b.write();cov_1s9lijb1oc().s[214]++;if(filerecord.blocks===0){cov_1s9lijb1oc().b[32][0]++;cov_1s9lijb1oc().s[215]++;await fs.unlink(this.filepath(type,blockrecord.file));}else{cov_1s9lijb1oc().b[32][1]++;}cov_1s9lijb1oc().s[216]++;return true;}/**
   * This will check if merkle block data has been stored
   * and is available.
   * @param {Buffer} hash - The block hash
   * @returns {Promise}
   */async hasMerkle(hash){cov_1s9lijb1oc().f[27]++;cov_1s9lijb1oc().s[217]++;return await this.db.has(layout.b.encode(types.MERKLE,hash));}/**
   * This will check if a block undo coin has been stored
   * and is available.
   * @param {Buffer} hash - The block hash
   * @returns {Promise}
   */async hasUndo(hash){cov_1s9lijb1oc().f[28]++;cov_1s9lijb1oc().s[218]++;return await this.db.has(layout.b.encode(types.UNDO,hash));}/**
   * This will check if a block filter has been stored
   * and is available.
   * @param {Buffer} hash - The block hash
   * @returns {Promise}
   */async hasFilter(hash){cov_1s9lijb1oc().f[29]++;cov_1s9lijb1oc().s[219]++;return await this.db.has(layout.b.encode(types.FILTER,hash));}/**
   * This will check if a block has been stored and is available.
   * @param {Buffer} hash - The block hash
   * @returns {Promise}
   */async has(hash){cov_1s9lijb1oc().f[30]++;cov_1s9lijb1oc().s[220]++;return await this.db.has(layout.b.encode(types.BLOCK,hash));}}/*
 * Expose
 */cov_1s9lijb1oc().s[221]++;module.exports=FileBlockStore;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGUuanMiXSwibmFtZXMiOlsiaXNBYnNvbHV0ZSIsInJlc29sdmUiLCJqb2luIiwicmVxdWlyZSIsImJkYiIsImFzc2VydCIsImZzIiwiYmlvIiwiaGFzaDI1NiIsIk5ldHdvcmsiLCJBYnN0cmFjdEJsb2NrU3RvcmUiLCJCbG9ja1JlY29yZCIsIkZpbGVSZWNvcmQiLCJsYXlvdXQiLCJ0eXBlcyIsInByZWZpeGVzIiwiRmlsZUJsb2NrU3RvcmUiLCJjb25zdHJ1Y3RvciIsIm9wdGlvbnMiLCJsb2NhdGlvbiIsImluZGV4TG9jYXRpb24iLCJkYiIsImNyZWF0ZSIsImNhY2hlU2l6ZSIsImNvbXByZXNzaW9uIiwibWF4RmlsZUxlbmd0aCIsIk51bWJlciIsImlzU2FmZUludGVnZXIiLCJuZXR3b3JrIiwicHJpbWFyeSIsImdldCIsIndyaXRpbmciLCJPYmplY3QiLCJjaGVjayIsInR5cGUiLCJwcmVmaXgiLCJyZWdleHAiLCJSZWdFeHAiLCJhbGwiLCJyZWFkZGlyIiwiZGF0cyIsImZpbHRlciIsImYiLCJ0ZXN0IiwiZmlsZW5vcyIsIm1hcCIsInBhcnNlSW50IiwibWF0Y2giLCJtaXNzaW5nIiwiZmlsZW5vIiwicmVjIiwiZW5jb2RlIiwiX2luZGV4IiwibG9nZ2VyIiwiaW5mbyIsImIiLCJiYXRjaCIsImZpbGVwYXRoIiwiZGF0YSIsInJlYWRGaWxlIiwicmVhZGVyIiwicmVhZCIsIm1hZ2ljIiwiYmxvY2tzIiwibGVmdCIsInJlYWRVMzIiLCJzZWVrIiwiaGFzaCIsInBvc2l0aW9uIiwibGVuZ3RoIiwiQkxPQ0siLCJNRVJLTEUiLCJvZmZzZXQiLCJkaWdlc3QiLCJyZWFkQnl0ZXMiLCJyZWFkSGFzaCIsImVyciIsIndhcm5pbmciLCJtZXNzYWdlIiwiYmxvY2tyZWNvcmQiLCJmaWxlIiwicHV0IiwidG9SYXciLCJmaWxlcmVjb3JkIiwidXNlZCIsIndyaXRlIiwiaW5kZXgiLCJVTkRPIiwiZW5zdXJlIiwibWtkaXJwIiwib3BlbiIsInZlcmlmeSIsIlYiLCJjbG9zZSIsInBhZCIsIm51bSIsInRvU3RyaW5nIiwiRXJyb3IiLCJhbGxvY2F0ZSIsImxhc3QiLCJGIiwidG91Y2giLCJmcm9tUmF3IiwiZmQiLCJ3cml0ZU1lcmtsZSIsIl93cml0ZSIsIndyaXRlVW5kbyIsIndyaXRlRmlsdGVyIiwiRklMVEVSIiwiaGFzIiwibWxlbmd0aCIsImJsZW5ndGgiLCJid20iLCJ3cml0ZVUzMiIsIndyaXRlSGFzaCIsInJlbmRlciIsIm1wb3NpdGlvbiIsImJwb3NpdGlvbiIsIm13cml0dGVuIiwiYndyaXR0ZW4iLCJyZWFkTWVya2xlIiwiX3JlYWQiLCJyZWFkVW5kbyIsInJlYWRGaWx0ZXIiLCJyZWFkRmlsdGVySGVhZGVyIiwicmF3IiwiQnVmZmVyIiwiYWxsb2MiLCJieXRlcyIsInBydW5lTWVya2xlIiwiX3BydW5lIiwicHJ1bmVVbmRvIiwicHJ1bmUiLCJwcnVuZUZpbHRlciIsImJyYXciLCJmcmF3IiwiZGVsIiwidW5saW5rIiwiaGFzTWVya2xlIiwiaGFzVW5kbyIsImhhc0ZpbHRlciIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FFQSxhLDQ5MEJBU1k7MkZBUFosS0FBTSxDQUFDQSxVQUFELENBQWFDLE9BQWIsQ0FBc0JDLElBQXRCLDJCQUE4QkMsT0FBTyxDQUFDLE1BQUQsQ0FBckMsQ0FBTixDQUNBLEtBQU1DLENBQUFBLEdBQUcsMEJBQUdELE9BQU8sQ0FBQyxLQUFELENBQVYsQ0FBVCxDQUNBLEtBQU1FLENBQUFBLE1BQU0sMEJBQUdGLE9BQU8sQ0FBQyxPQUFELENBQVYsQ0FBWixDQUNBLEtBQU1HLENBQUFBLEVBQUUsMEJBQUdILE9BQU8sQ0FBQyxPQUFELENBQVYsQ0FBUixDQUNBLEtBQU1JLENBQUFBLEdBQUcsMEJBQUdKLE9BQU8sQ0FBQyxPQUFELENBQVYsQ0FBVCxDQUNBLEtBQU1LLENBQUFBLE9BQU8sMEJBQUdMLE9BQU8sQ0FBQyxxQkFBRCxDQUFWLENBQWIsQ0FDQSxL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QzhGLE1BQXRCLENBQThCekMsSUFBOUIsQ0FBWixDQUFiLENBQ0QsQ0FFRDtBQUNGO0FBQ0E7QUFDQTtBQUNBLEtBRUUsS0FBTTBDLENBQUFBLEdBQU4sQ0FBVTFDLElBQVYsQ0FBZ0Isb0RBQ2QsTUFBTyxNQUFNLE1BQUs5QyxFQUFMLENBQVF3RixHQUFSLENBQVloRyxNQUFNLENBQUMwQyxDQUFQLENBQVNKLE1BQVQsQ0FBZ0JyQyxLQUFLLENBQUN3RCxLQUF0QixDQUE2QkgsSUFBN0IsQ0FBWixDQUFiLENBQ0QsQ0E3b0I2QyxDQWdwQmhEO0FBQ0E7QUFDQSxHLDBCQUVBMEUsTUFBTSxDQUFDQyxPQUFQLENBQWlCOUgsY0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcclxuICogYmxvY2tzdG9yZS9maWxlLmpzIC0gZmlsZSBibG9ja3N0b3JlIGZvciBiY29pblxyXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTksIEJyYXlkb24gRnVsbGVyIChNSVQgTGljZW5zZSkuXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9iY29pbi1vcmcvYmNvaW5cclxuICovXHJcblxyXG4ndXNlIHN0cmljdCc7XHJcblxyXG5jb25zdCB7aXNBYnNvbHV0ZSwgcmVzb2x2ZSwgam9pbn0gPSByZXF1aXJlKCdwYXRoJyk7XHJcbmNvbnN0IGJkYiA9IHJlcXVpcmUoJ2JkYicpO1xyXG5jb25zdCBhc3NlcnQgPSByZXF1aXJlKCdic2VydCcpO1xyXG5jb25zdCBmcyA9IHJlcXVpcmUoJ2JmaWxlJyk7XHJcbmNvbnN0IGJpbyA9IHJlcXVpcmUoJ2J1ZmlvJyk7XHJcbmNvbnN0IGhhc2gyNTYgPSByZXF1aXJlKCdiY3J5cHRvL2xpYi9oYXNoMjU2Jyk7XHJcbmNvbnN0IE5ldHdvcmsgPSByZXF1aXJlKCcuLi9wcm90b2NvbC9uZXR3b3JrJyk7XHJcbmNvbnN0IEFic3RyYWN0QmxvY2tTdG9yZSA9IHJlcXVpcmUoJy4vYWJzdHJhY3QnKTtcclxuY29uc3Qge0Jsb2NrUmVjb3JkLCBGaWxlUmVjb3JkfSA9IHJlcXVpcmUoJy4vcmVjb3JkcycpO1xyXG5jb25zdCBsYXlvdXQgPSByZXF1aXJlKCcuL2xheW91dCcpO1xyXG5jb25zdCB7dHlwZXMsIHByZWZpeGVzfSA9IHJlcXVpcmUoJy4vY29tbW9uJyk7XHJcblxyXG4vKipcclxuICogRmlsZSBCbG9jayBTdG9yZVxyXG4gKlxyXG4gKiBAYWxpYXMgbW9kdWxlOmJsb2Nrc3RvcmU6RmlsZUJsb2NrU3RvcmVcclxuICogQGFic3RyYWN0XHJcbiAqL1xyXG5cclxuY2xhc3MgRmlsZUJsb2NrU3RvcmUgZXh0ZW5kcyBBYnN0cmFjdEJsb2NrU3RvcmUge1xyXG4gIC8qKlxyXG4gICAqIENyZWF0ZSBhIGJsb2Nrc3RvcmUgdGhhdCBzdG9yZXMgYmxvY2tzIGluIGZpbGVzLlxyXG4gICAqIEBjb25zdHJ1Y3RvclxyXG4gICAqL1xyXG5cclxuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICBzdXBlcihvcHRpb25zKTtcclxuXHJcbiAgICBhc3NlcnQoaXNBYnNvbHV0ZShvcHRpb25zLmxvY2F0aW9uKSwgJ0xvY2F0aW9uIG5vdCBhYnNvbHV0ZS4nKTtcclxuXHJcbiAgICB0aGlzLmxvY2F0aW9uID0gb3B0aW9ucy5sb2NhdGlvbjtcclxuICAgIHRoaXMuaW5kZXhMb2NhdGlvbiA9IHJlc29sdmUodGhpcy5sb2NhdGlvbiwgJy4vaW5kZXgnKTtcclxuXHJcbiAgICB0aGlzLmRiID0gYmRiLmNyZWF0ZSh7XHJcbiAgICAgIGxvY2F0aW9uOiB0aGlzLmluZGV4TG9jYXRpb24sXHJcbiAgICAgIGNhY2hlU2l6ZTogb3B0aW9ucy5jYWNoZVNpemUsXHJcbiAgICAgIGNvbXByZXNzaW9uOiBmYWxzZVxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5tYXhGaWxlTGVuZ3RoID0gb3B0aW9ucy5tYXhGaWxlTGVuZ3RoIHx8IDEyOCAqIDEwMjQgKiAxMDI0O1xyXG5cclxuICAgIGFzc2VydChOdW1iZXIuaXNTYWZlSW50ZWdlcih0aGlzLm1heEZpbGVMZW5ndGgpLFxyXG4gICAgICAnSW52YWxpZCBtYXggZmlsZSBsZW5ndGguJyk7XHJcblxyXG4gICAgdGhpcy5uZXR3b3JrID0gTmV0d29yay5wcmltYXJ5O1xyXG5cclxuICAgIGlmIChvcHRpb25zLm5ldHdvcmsgIT0gbnVsbClcclxuICAgICAgdGhpcy5uZXR3b3JrID0gTmV0d29yay5nZXQob3B0aW9ucy5uZXR3b3JrKTtcclxuXHJcbiAgICB0aGlzLndyaXRpbmcgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ29tcGFyZXMgdGhlIG51bWJlciBvZiBmaWxlcyBpbiB0aGUgZGlyZWN0b3J5XHJcbiAgICogd2l0aCB0aGUgcmVjb3JkZWQgbnVtYmVyIG9mIGZpbGVzLlxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB0eXBlIC0gVGhlIHR5cGUgb2YgYmxvY2sgZGF0YVxyXG4gICAqIEBwcml2YXRlXHJcbiAgICogQHJldHVybnMge1Byb21pc2V9XHJcbiAgICovXHJcblxyXG4gIGFzeW5jIGNoZWNrKHR5cGUpIHtcclxuICAgIGNvbnN0IHByZWZpeCA9IHByZWZpeGVzW3R5cGVdO1xyXG4gICAgY29uc3QgcmVnZXhwID0gbmV3IFJlZ0V4cChgXiR7cHJlZml4fShcXFxcZHs1fSlcXFxcLmRhdCRgKTtcclxuICAgIGNvbnN0IGFsbCA9IGF3YWl0IGZzLnJlYWRkaXIodGhpcy5sb2NhdGlvbik7XHJcbiAgICBjb25zdCBkYXRzID0gYWxsLmZpbHRlcihmID0+IHJlZ2V4cC50ZXN0KGYpKTtcclxuICAgIGNvbnN0IGZpbGVub3MgPSBkYXRzLm1hcChmID0+IHBhcnNlSW50KGYubWF0Y2gocmVnZXhwKVsxXSkpO1xyXG5cclxuICAgIGxldCBtaXNzaW5nID0gZmFsc2U7XHJcblxyXG4gICAgZm9yIChjb25zdCBmaWxlbm8gb2YgZmlsZW5vcykge1xyXG4gICAgICBjb25zdCByZWMgPSBhd2FpdCB0aGlzLmRiLmdldChsYXlvdXQuZi5lbmNvZGUodHlwZSwgZmlsZW5vKSk7XHJcbiAgICAgIGlmICghcmVjKSB7XHJcbiAgICAgICAgbWlzc2luZyA9IHRydWU7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge21pc3NpbmcsIGZpbGVub3N9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyBpbmRleGVzIGZyb20gZmlsZXMgZm9yIGEgYmxvY2sgdHlwZS4gUmVhZHMgdGhlIGhhc2ggb2ZcclxuICAgKiB0aGUgYmxvY2sgZGF0YSBmcm9tIHRoZSBtYWdpYyBwcmVmaXgsIGV4Y2VwdCBmb3IgYSBibG9jayB3aGljaFxyXG4gICAqIHRoZSBoYXNoIGlzIHJlYWQgZnJvbSB0aGUgYmxvY2sgaGVhZGVyLlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHR5cGUgLSBUaGUgdHlwZSBvZiBibG9jayBkYXRhXHJcbiAgICogQHJldHVybnMge1Byb21pc2V9XHJcbiAgICovXHJcblxyXG4gIGFzeW5jIF9pbmRleCh0eXBlKSB7XHJcbiAgICBjb25zdCB7bWlzc2luZywgZmlsZW5vc30gPSBhd2FpdCB0aGlzLmNoZWNrKHR5cGUpO1xyXG5cclxuICAgIGlmICghbWlzc2luZylcclxuICAgICAgcmV0dXJuO1xyXG5cclxuICAgIHRoaXMubG9nZ2VyLmluZm8oJ0luZGV4aW5nIGJsb2NrIHR5cGUgJWQuLi4nLCB0eXBlKTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IGZpbGVubyBvZiBmaWxlbm9zKSB7XHJcbiAgICAgIGNvbnN0IGIgPSB0aGlzLmRiLmJhdGNoKCk7XHJcbiAgICAgIGNvbnN0IGZpbGVwYXRoID0gdGhpcy5maWxlcGF0aCh0eXBlLCBmaWxlbm8pO1xyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgZnMucmVhZEZpbGUoZmlsZXBhdGgpO1xyXG4gICAgICBjb25zdCByZWFkZXIgPSBiaW8ucmVhZChkYXRhKTtcclxuICAgICAgbGV0IG1hZ2ljID0gbnVsbDtcclxuICAgICAgbGV0IGJsb2NrcyA9IDA7XHJcblxyXG4gICAgICB3aGlsZSAocmVhZGVyLmxlZnQoKSA+PSA0KSB7XHJcbiAgICAgICAgbWFnaWMgPSByZWFkZXIucmVhZFUzMigpO1xyXG5cclxuICAgICAgICAvLyBNb3ZlIGZvcndhcmQgYSBieXRlIGZyb20gdGhlIGxhc3QgcmVhZFxyXG4gICAgICAgIC8vIGlmIHRoZSBtYWdpYyBkb2Vzbid0IG1hdGNoLlxyXG4gICAgICAgIGlmIChtYWdpYyAhPT0gdGhpcy5uZXR3b3JrLm1hZ2ljKSB7XHJcbiAgICAgICAgICByZWFkZXIuc2VlaygtMyk7XHJcbiAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBoYXNoID0gbnVsbDtcclxuICAgICAgICBsZXQgcG9zaXRpb24gPSAwO1xyXG4gICAgICAgIGxldCBsZW5ndGggPSAwO1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgbGVuZ3RoID0gcmVhZGVyLnJlYWRVMzIoKTtcclxuXHJcbiAgICAgICAgICBpZiAodHlwZSA9PT0gdHlwZXMuQkxPQ0sgfHwgdHlwZSA9PT0gdHlwZXMuTUVSS0xFKSB7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uID0gcmVhZGVyLm9mZnNldDtcclxuICAgICAgICAgICAgaGFzaCA9IGhhc2gyNTYuZGlnZXN0KHJlYWRlci5yZWFkQnl0ZXMoODAsIHRydWUpKTtcclxuICAgICAgICAgICAgcmVhZGVyLnNlZWsobGVuZ3RoIC0gODApO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaGFzaCA9IHJlYWRlci5yZWFkSGFzaCgpO1xyXG4gICAgICAgICAgICBwb3NpdGlvbiA9IHJlYWRlci5vZmZzZXQ7XHJcbiAgICAgICAgICAgIHJlYWRlci5zZWVrKGxlbmd0aCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuaW5nKFxyXG4gICAgICAgICAgICAnVW5rbm93biBibG9jayBpbiBmaWxlOiAlcywgcmVhc29uOiAlcycsXHJcbiAgICAgICAgICAgIGZpbGVwYXRoLCBlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGJsb2NrcmVjb3JkID0gbmV3IEJsb2NrUmVjb3JkKHtcclxuICAgICAgICAgIGZpbGU6IGZpbGVubyxcclxuICAgICAgICAgIHBvc2l0aW9uOiBwb3NpdGlvbixcclxuICAgICAgICAgIGxlbmd0aDogbGVuZ3RoXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGJsb2NrcyArPSAxO1xyXG4gICAgICAgIGIucHV0KGxheW91dC5iLmVuY29kZSh0eXBlLCBoYXNoKSwgYmxvY2tyZWNvcmQudG9SYXcoKSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGZpbGVyZWNvcmQgPSBuZXcgRmlsZVJlY29yZCh7XHJcbiAgICAgICAgYmxvY2tzOiBibG9ja3MsXHJcbiAgICAgICAgdXNlZDogcmVhZGVyLm9mZnNldCxcclxuICAgICAgICBsZW5ndGg6IHRoaXMubWF4RmlsZUxlbmd0aFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGIucHV0KGxheW91dC5mLmVuY29kZSh0eXBlLCBmaWxlbm8pLCBmaWxlcmVjb3JkLnRvUmF3KCkpO1xyXG5cclxuICAgICAgYXdhaXQgYi53cml0ZSgpO1xyXG5cclxuICAgICAgdGhpcy5sb2dnZXIuaW5mbygnSW5kZXhlZCAlZCBibG9ja3MgKGZpbGU9JXMpLicsIGJsb2NrcywgZmlsZXBhdGgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ29tcGFyZXMgdGhlIG51bWJlciBvZiBmaWxlcyBpbiB0aGUgZGlyZWN0b3J5XHJcbiAgICogd2l0aCB0aGUgcmVjb3JkZWQgbnVtYmVyIG9mIGZpbGVzLiBJZiB0aGVyZSBhcmUgYW55XHJcbiAgICogaW5jb25zaXN0ZW5jaWVzIGl0IHdpbGwgcmVpbmRleCBhbGwgYmxvY2tzLlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICogQHJldHVybnMge1Byb21pc2V9XHJcbiAgICovXHJcblxyXG4gIGFzeW5jIGluZGV4KCkge1xyXG4gICAgYXdhaXQgdGhpcy5faW5kZXgodHlwZXMuQkxPQ0spO1xyXG4gICAgYXdhaXQgdGhpcy5faW5kZXgodHlwZXMuTUVSS0xFKTtcclxuICAgIGF3YWl0IHRoaXMuX2luZGV4KHR5cGVzLlVORE8pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhpcyBtZXRob2QgZW5zdXJlcyB0aGF0IGJvdGggdGhlIGJsb2NrIHN0b3JhZ2UgZGlyZWN0b3J5XHJcbiAgICogYW5kIGluZGV4IGRpcmVjdG9yeSBleGlzdC5cclxuICAgKiBiZWZvcmUgb3BlbmluZy5cclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cclxuICAgKi9cclxuXHJcbiAgYXN5bmMgZW5zdXJlKCkge1xyXG4gICAgcmV0dXJuIGZzLm1rZGlycCh0aGlzLmluZGV4TG9jYXRpb24pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogT3BlbnMgdGhlIGZpbGUgYmxvY2sgc3RvcmUuIEl0IHdpbGwgcmVnZW5lcmF0ZSBuZWNlc3NhcnkgYmxvY2tcclxuICAgKiBpbmRleGluZyBpZiB0aGUgaW5kZXggaXMgbWlzc2luZyBvciBpbmNvbnNpc3RlbnQuXHJcbiAgICogQHJldHVybnMge1Byb21pc2V9XHJcbiAgICovXHJcblxyXG4gIGFzeW5jIG9wZW4oKSB7XHJcbiAgICB0aGlzLmxvZ2dlci5pbmZvKCdPcGVuaW5nIEZpbGVCbG9ja1N0b3JlLi4uJyk7XHJcblxyXG4gICAgYXdhaXQgdGhpcy5kYi5vcGVuKCk7XHJcbiAgICBhd2FpdCB0aGlzLmRiLnZlcmlmeShsYXlvdXQuVi5lbmNvZGUoKSwgJ2ZpbGVibG9ja3N0b3JlJywgMCk7XHJcblxyXG4gICAgYXdhaXQgdGhpcy5pbmRleCgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhpcyBjbG9zZXMgdGhlIGZpbGUgYmxvY2sgc3RvcmUgYW5kIHVuZGVybHlpbmdcclxuICAgKiBpbmRleGluZyBkYXRhYmFzZXMuXHJcbiAgICovXHJcblxyXG4gIGFzeW5jIGNsb3NlKCkge1xyXG4gICAgdGhpcy5sb2dnZXIuaW5mbygnQ2xvc2luZyBGaWxlQmxvY2tTdG9yZS4uLicpO1xyXG5cclxuICAgIGF3YWl0IHRoaXMuZGIuY2xvc2UoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoaXMgbWV0aG9kIHdpbGwgZGV0ZXJtaW5lIHRoZSBmaWxlIHBhdGggYmFzZWQgb24gdGhlIGZpbGUgbnVtYmVyXHJcbiAgICogYW5kIHRoZSBjdXJyZW50IGJsb2NrIGRhdGEgbG9jYXRpb24uXHJcbiAgICogQHByaXZhdGVcclxuICAgKiBAcGFyYW0ge051bWJlcn0gdHlwZSAtIFRoZSB0eXBlIG9mIGJsb2NrIGRhdGFcclxuICAgKiBAcGFyYW0ge051bWJlcn0gZmlsZW5vIC0gVGhlIG51bWJlciBvZiB0aGUgZmlsZS5cclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cclxuICAgKi9cclxuXHJcbiAgZmlsZXBhdGgodHlwZSwgZmlsZW5vKSB7XHJcbiAgICBjb25zdCBwYWQgPSA1O1xyXG5cclxuICAgIGxldCBudW0gPSBmaWxlbm8udG9TdHJpbmcoMTApO1xyXG5cclxuICAgIGlmIChudW0ubGVuZ3RoID4gcGFkKVxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZpbGUgbnVtYmVyIHRvbyBsYXJnZS4nKTtcclxuXHJcbiAgICB3aGlsZSAobnVtLmxlbmd0aCA8IHBhZClcclxuICAgICAgbnVtID0gYDAke251bX1gO1xyXG5cclxuICAgIGxldCBmaWxlcGF0aCA9IG51bGw7XHJcblxyXG4gICAgY29uc3QgcHJlZml4ID0gcHJlZml4ZXNbdHlwZV07XHJcblxyXG4gICAgaWYgKCFwcmVmaXgpXHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignVW5rbm93biBmaWxlIHByZWZpeC4nKTtcclxuXHJcbiAgICBmaWxlcGF0aCA9IGpvaW4odGhpcy5sb2NhdGlvbiwgYCR7cHJlZml4fSR7bnVtfS5kYXRgKTtcclxuXHJcbiAgICByZXR1cm4gZmlsZXBhdGg7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUaGlzIG1ldGhvZCB3aWxsIHNlbGVjdCBhbmQgcG90ZW50aWFsbHkgYWxsb2NhdGUgYSBmaWxlIHRvXHJcbiAgICogd3JpdGUgYSBibG9jayBiYXNlZCBvbiB0aGUgc2l6ZSBhbmQgdHlwZS5cclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB0eXBlIC0gVGhlIHR5cGUgb2YgYmxvY2sgZGF0YVxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBsZW5ndGggLSBUaGUgbnVtYmVyIG9mIGJ5dGVzXHJcbiAgICogQHJldHVybnMge1Byb21pc2V9XHJcbiAgICovXHJcblxyXG4gIGFzeW5jIGFsbG9jYXRlKHR5cGUsIGxlbmd0aCkge1xyXG4gICAgaWYgKGxlbmd0aCA+IHRoaXMubWF4RmlsZUxlbmd0aClcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdCbG9jayBsZW5ndGggYWJvdmUgbWF4IGZpbGUgbGVuZ3RoLicpO1xyXG5cclxuICAgIGxldCBmaWxlbm8gPSAwO1xyXG4gICAgbGV0IGZpbGVyZWNvcmQgPSBudWxsO1xyXG4gICAgbGV0IGZpbGVwYXRoID0gbnVsbDtcclxuXHJcbiAgICBjb25zdCBsYXN0ID0gYXdhaXQgdGhpcy5kYi5nZXQobGF5b3V0LkYuZW5jb2RlKHR5cGUpKTtcclxuICAgIGlmIChsYXN0KVxyXG4gICAgICBmaWxlbm8gPSBiaW8ucmVhZFUzMihsYXN0LCAwKTtcclxuXHJcbiAgICBmaWxlcGF0aCA9IHRoaXMuZmlsZXBhdGgodHlwZSwgZmlsZW5vKTtcclxuXHJcbiAgICBjb25zdCByZWMgPSBhd2FpdCB0aGlzLmRiLmdldChsYXlvdXQuZi5lbmNvZGUodHlwZSwgZmlsZW5vKSk7XHJcblxyXG4gICAgbGV0IHRvdWNoID0gZmFsc2U7XHJcblxyXG4gICAgaWYgKHJlYykge1xyXG4gICAgICBmaWxlcmVjb3JkID0gRmlsZVJlY29yZC5mcm9tUmF3KHJlYyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0b3VjaCA9IHRydWU7XHJcbiAgICAgIGZpbGVyZWNvcmQgPSBuZXcgRmlsZVJlY29yZCh7XHJcbiAgICAgICAgYmxvY2tzOiAwLFxyXG4gICAgICAgIHVzZWQ6IDAsXHJcbiAgICAgICAgbGVuZ3RoOiB0aGlzLm1heEZpbGVMZW5ndGhcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGZpbGVyZWNvcmQudXNlZCArIGxlbmd0aCA+IGZpbGVyZWNvcmQubGVuZ3RoKSB7XHJcbiAgICAgIGZpbGVubyArPSAxO1xyXG4gICAgICBmaWxlcGF0aCA9IHRoaXMuZmlsZXBhdGgodHlwZSwgZmlsZW5vKTtcclxuICAgICAgdG91Y2ggPSB0cnVlO1xyXG4gICAgICBmaWxlcmVjb3JkID0gbmV3IEZpbGVSZWNvcmQoe1xyXG4gICAgICAgIGJsb2NrczogMCxcclxuICAgICAgICB1c2VkOiAwLFxyXG4gICAgICAgIGxlbmd0aDogdGhpcy5tYXhGaWxlTGVuZ3RoXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0b3VjaCkge1xyXG4gICAgICBjb25zdCBmZCA9IGF3YWl0IGZzLm9wZW4oZmlsZXBhdGgsICd3Jyk7XHJcbiAgICAgIGF3YWl0IGZzLmNsb3NlKGZkKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge2ZpbGVubywgZmlsZXJlY29yZCwgZmlsZXBhdGh9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhpcyBtZXRob2Qgc3RvcmVzIG1lcmtsZSBibG9jayBkYXRhIGluIGZpbGVzLlxyXG4gICAqIEBwYXJhbSB7QnVmZmVyfSBoYXNoIC0gVGhlIGJsb2NrIGhhc2hcclxuICAgKiBAcGFyYW0ge0J1ZmZlcn0gZGF0YSAtIFRoZSBibG9jayBkYXRhXHJcbiAgICogQHJldHVybnMge1Byb21pc2V9XHJcbiAgICovXHJcblxyXG4gIGFzeW5jIHdyaXRlTWVya2xlKGhhc2gsIGRhdGEpIHtcclxuICAgIHJldHVybiB0aGlzLl93cml0ZSh0eXBlcy5NRVJLTEUsIGhhc2gsIGRhdGEpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhpcyBtZXRob2Qgc3RvcmVzIGJsb2NrIHVuZG8gY29pbiBkYXRhIGluIGZpbGVzLlxyXG4gICAqIEBwYXJhbSB7QnVmZmVyfSBoYXNoIC0gVGhlIGJsb2NrIGhhc2hcclxuICAgKiBAcGFyYW0ge0J1ZmZlcn0gZGF0YSAtIFRoZSBibG9jayBkYXRhXHJcbiAgICogQHJldHVybnMge1Byb21pc2V9XHJcbiAgICovXHJcblxyXG4gIGFzeW5jIHdyaXRlVW5kbyhoYXNoLCBkYXRhKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fd3JpdGUodHlwZXMuVU5ETywgaGFzaCwgZGF0YSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUaGlzIG1ldGhvZCBzdG9yZXMgYmxvY2sgZGF0YSBpbiBmaWxlcy5cclxuICAgKiBAcGFyYW0ge0J1ZmZlcn0gaGFzaCAtIFRoZSBibG9jayBoYXNoXHJcbiAgICogQHBhcmFtIHtCdWZmZXJ9IGRhdGEgLSBUaGUgYmxvY2sgZGF0YVxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfVxyXG4gICAqL1xyXG5cclxuICBhc3luYyB3cml0ZShoYXNoLCBkYXRhKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fd3JpdGUodHlwZXMuQkxPQ0ssIGhhc2gsIGRhdGEpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhpcyBtZXRob2Qgc3RvcmVzIHNlcmlhbGl6ZWQgYmxvY2sgZmlsdGVyIGRhdGEgaW4gZmlsZXMuXHJcbiAgICogQHBhcmFtIHtCdWZmZXJ9IGhhc2ggLSBUaGUgYmxvY2sgaGFzaFxyXG4gICAqIEBwYXJhbSB7QnVmZmVyfSBkYXRhIC0gVGhlIHNlcmlhbGl6ZWQgYmxvY2sgZmlsdGVyIGRhdGEuXHJcbiAgICogQHJldHVybnMge1Byb21pc2V9XHJcbiAgICovXHJcblxyXG4gIGFzeW5jIHdyaXRlRmlsdGVyKGhhc2gsIGRhdGEpIHtcclxuICAgIHJldHVybiB0aGlzLl93cml0ZSh0eXBlcy5GSUxURVIsIGhhc2gsIGRhdGEpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhpcyBtZXRob2Qgc3RvcmVzIGJsb2NrIGRhdGEgaW4gZmlsZXMgd2l0aCBieSBhcHBlbmRpbmdcclxuICAgKiBkYXRhIHRvIHRoZSBsYXN0IHdyaXR0ZW4gZmlsZSBhbmQgdXBkYXRpbmcgaW5kZXhlcyB0byBwb2ludFxyXG4gICAqIHRvIHRoZSBmaWxlIGFuZCBwb3NpdGlvbi5cclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB0eXBlIC0gVGhlIHR5cGUgb2YgYmxvY2sgZGF0YVxyXG4gICAqIEBwYXJhbSB7QnVmZmVyfSBoYXNoIC0gVGhlIGJsb2NrIGhhc2hcclxuICAgKiBAcGFyYW0ge0J1ZmZlcn0gZGF0YSAtIFRoZSBibG9jayBkYXRhXHJcbiAgICogQHJldHVybnMge1Byb21pc2V9XHJcbiAgICovXHJcblxyXG4gIGFzeW5jIF93cml0ZSh0eXBlLCBoYXNoLCBkYXRhKSB7XHJcbiAgICBpZiAodGhpcy53cml0aW5nW3R5cGVdKVxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FscmVhZHkgd3JpdGluZy4nKTtcclxuXHJcbiAgICB0aGlzLndyaXRpbmdbdHlwZV0gPSB0cnVlO1xyXG5cclxuICAgIGlmIChhd2FpdCB0aGlzLmRiLmhhcyhsYXlvdXQuYi5lbmNvZGUodHlwZSwgaGFzaCkpKSB7XHJcbiAgICAgIHRoaXMud3JpdGluZ1t0eXBlXSA9IGZhbHNlO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IG1sZW5ndGggPSA4O1xyXG5cclxuICAgIC8vIEhhc2ggZm9yIGEgYmxvY2sgaXMgbm90IHN0b3JlZCB3aXRoXHJcbiAgICAvLyB0aGUgbWFnaWMgcHJlZml4IGFzIGl0J3MgcmVhZCBmcm9tIHRoZSBoZWFkZXJcclxuICAgIC8vIG9mIHRoZSBibG9jayBkYXRhLlxyXG4gICAgaWYgKHR5cGUgIT09IHR5cGVzLkJMT0NLICYmIHR5cGUgIT09IHR5cGVzLk1FUktMRSlcclxuICAgICAgbWxlbmd0aCArPSAzMjtcclxuXHJcbiAgICBjb25zdCBibGVuZ3RoID0gZGF0YS5sZW5ndGg7XHJcbiAgICBjb25zdCBsZW5ndGggPSBkYXRhLmxlbmd0aCArIG1sZW5ndGg7XHJcblxyXG4gICAgY29uc3QgYndtID0gYmlvLndyaXRlKG1sZW5ndGgpO1xyXG5cclxuICAgIGJ3bS53cml0ZVUzMih0aGlzLm5ldHdvcmsubWFnaWMpO1xyXG4gICAgYndtLndyaXRlVTMyKGJsZW5ndGgpO1xyXG5cclxuICAgIGlmICh0eXBlICE9PSB0eXBlcy5CTE9DSyAmJiB0eXBlICE9PSB0eXBlcy5NRVJLTEUpXHJcbiAgICAgIGJ3bS53cml0ZUhhc2goaGFzaCk7XHJcblxyXG4gICAgY29uc3QgbWFnaWMgPSBid20ucmVuZGVyKCk7XHJcblxyXG4gICAgY29uc3Qge1xyXG4gICAgICBmaWxlbm8sXHJcbiAgICAgIGZpbGVyZWNvcmQsXHJcbiAgICAgIGZpbGVwYXRoXHJcbiAgICB9ID0gYXdhaXQgdGhpcy5hbGxvY2F0ZSh0eXBlLCBsZW5ndGgpO1xyXG5cclxuICAgIGNvbnN0IG1wb3NpdGlvbiA9IGZpbGVyZWNvcmQudXNlZDtcclxuICAgIGNvbnN0IGJwb3NpdGlvbiA9IGZpbGVyZWNvcmQudXNlZCArIG1sZW5ndGg7XHJcblxyXG4gICAgY29uc3QgZmQgPSBhd2FpdCBmcy5vcGVuKGZpbGVwYXRoLCAncisnKTtcclxuXHJcbiAgICBsZXQgbXdyaXR0ZW4gPSAwO1xyXG4gICAgbGV0IGJ3cml0dGVuID0gMDtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBtd3JpdHRlbiA9IGF3YWl0IGZzLndyaXRlKGZkLCBtYWdpYywgMCwgbWxlbmd0aCwgbXBvc2l0aW9uKTtcclxuICAgICAgYndyaXR0ZW4gPSBhd2FpdCBmcy53cml0ZShmZCwgZGF0YSwgMCwgYmxlbmd0aCwgYnBvc2l0aW9uKTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIGF3YWl0IGZzLmNsb3NlKGZkKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAobXdyaXR0ZW4gIT09IG1sZW5ndGgpIHtcclxuICAgICAgdGhpcy53cml0aW5nW3R5cGVdID0gZmFsc2U7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IHdyaXRlIGJsb2NrIG1hZ2ljLicpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChid3JpdHRlbiAhPT0gYmxlbmd0aCkge1xyXG4gICAgICB0aGlzLndyaXRpbmdbdHlwZV0gPSBmYWxzZTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3Qgd3JpdGUgYmxvY2suJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZmlsZXJlY29yZC5ibG9ja3MgKz0gMTtcclxuICAgIGZpbGVyZWNvcmQudXNlZCArPSBsZW5ndGg7XHJcblxyXG4gICAgY29uc3QgYiA9IHRoaXMuZGIuYmF0Y2goKTtcclxuXHJcbiAgICBjb25zdCBibG9ja3JlY29yZCA9IG5ldyBCbG9ja1JlY29yZCh7XHJcbiAgICAgIGZpbGU6IGZpbGVubyxcclxuICAgICAgcG9zaXRpb246IGJwb3NpdGlvbixcclxuICAgICAgbGVuZ3RoOiBibGVuZ3RoXHJcbiAgICB9KTtcclxuXHJcbiAgICBiLnB1dChsYXlvdXQuYi5lbmNvZGUodHlwZSwgaGFzaCksIGJsb2NrcmVjb3JkLnRvUmF3KCkpO1xyXG4gICAgYi5wdXQobGF5b3V0LmYuZW5jb2RlKHR5cGUsIGZpbGVubyksIGZpbGVyZWNvcmQudG9SYXcoKSk7XHJcblxyXG4gICAgY29uc3QgbGFzdCA9IGJpby53cml0ZSg0KS53cml0ZVUzMihmaWxlbm8pLnJlbmRlcigpO1xyXG4gICAgYi5wdXQobGF5b3V0LkYuZW5jb2RlKHR5cGUpLCBsYXN0KTtcclxuXHJcbiAgICBhd2FpdCBiLndyaXRlKCk7XHJcblxyXG4gICAgdGhpcy53cml0aW5nW3R5cGVdID0gZmFsc2U7XHJcblxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUaGlzIG1ldGhvZCB3aWxsIHJldHJpZXZlIG1lcmtsZSBibG9jayBkYXRhLlxyXG4gICAqIEBwYXJhbSB7QnVmZmVyfSBoYXNoIC0gVGhlIGJsb2NrIGhhc2hcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cclxuICAgKi9cclxuXHJcbiAgYXN5bmMgcmVhZE1lcmtsZShoYXNoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVhZCh0eXBlcy5NRVJLTEUsIGhhc2gpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhpcyBtZXRob2Qgd2lsbCByZXRyaWV2ZSBibG9jayB1bmRvIGNvaW4gZGF0YS5cclxuICAgKiBAcGFyYW0ge0J1ZmZlcn0gaGFzaCAtIFRoZSBibG9jayBoYXNoXHJcbiAgICogQHJldHVybnMge1Byb21pc2V9XHJcbiAgICovXHJcblxyXG4gIGFzeW5jIHJlYWRVbmRvKGhhc2gpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZWFkKHR5cGVzLlVORE8sIGhhc2gpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhpcyBtZXRob2Qgd2lsbCByZXRyaWV2ZSBibG9jayBkYXRhLiBTbWFsbGVyIHBvcnRpb25zIG9mIHRoZVxyXG4gICAqIGJsb2NrIChlLmcuIHRyYW5zYWN0aW9ucykgY2FuIGJlIHJlYWQgYnkgdXNpbmcgdGhlIG9mZnNldCBhbmRcclxuICAgKiBsZW5ndGggYXJndW1lbnRzLlxyXG4gICAqIEBwYXJhbSB7QnVmZmVyfSBoYXNoIC0gVGhlIGJsb2NrIGhhc2hcclxuICAgKiBAcGFyYW0ge051bWJlcn0gb2Zmc2V0IC0gVGhlIG9mZnNldCB3aXRoaW4gdGhlIGJsb2NrXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGxlbmd0aCAtIFRoZSBudW1iZXIgb2YgYnl0ZXMgb2YgdGhlIGRhdGFcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cclxuICAgKi9cclxuXHJcbiAgYXN5bmMgcmVhZChoYXNoLCBvZmZzZXQsIGxlbmd0aCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlYWQodHlwZXMuQkxPQ0ssIGhhc2gsIG9mZnNldCwgbGVuZ3RoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoaXMgbWV0aG9kIHdpbGwgcmV0cmlldmUgc2VyaWFsaXplZCBibG9jayBmaWx0ZXIgZGF0YS5cclxuICAgKiBAcGFyYW0ge0J1ZmZlcn0gaGFzaCAtIFRoZSBibG9jayBoYXNoXHJcbiAgICogQHJldHVybnMge1Byb21pc2V9XHJcbiAgICovXHJcblxyXG4gIGFzeW5jIHJlYWRGaWx0ZXIoaGFzaCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlYWQodHlwZXMuRklMVEVSLCBoYXNoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoaXMgbWV0aG9kIHdpbGwgcmV0cmlldmUgYmxvY2sgZmlsdGVyIGhlYWRlciBvbmx5LlxyXG4gICAqIEBwYXJhbSB7QnVmZmVyfSBoYXNoIC0gVGhlIGJsb2NrIGhhc2hcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cclxuICAgKi9cclxuXHJcbiAgYXN5bmMgcmVhZEZpbHRlckhlYWRlcihoYXNoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVhZCh0eXBlcy5GSUxURVIsIGhhc2gsIDAsIDMyKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoaXMgbWV0aG9kcyByZWFkcyBkYXRhIGZyb20gZGlzayBieSByZXRyaWV2aW5nIHRoZSBpbmRleCBvZlxyXG4gICAqIHRoZSBkYXRhIGFuZCByZWFkaW5nIGZyb20gdGhlIGNvcnJlc3BvbmRpbmcgZmlsZSBhbmQgbG9jYXRpb24uXHJcbiAgICogQHByaXZhdGVcclxuICAgKiBAcGFyYW0ge051bWJlcn0gdHlwZSAtIFRoZSB0eXBlIG9mIGJsb2NrIGRhdGFcclxuICAgKiBAcGFyYW0ge0J1ZmZlcn0gaGFzaCAtIFRoZSBibG9jayBoYXNoXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IG9mZnNldCAtIFRoZSBvZmZzZXQgd2l0aGluIHRoZSBibG9ja1xyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBsZW5ndGggLSBUaGUgbnVtYmVyIG9mIGJ5dGVzIG9mIHRoZSBkYXRhXHJcbiAgICogQHJldHVybnMge1Byb21pc2V9XHJcbiAgICovXHJcblxyXG4gIGFzeW5jIF9yZWFkKHR5cGUsIGhhc2gsIG9mZnNldCwgbGVuZ3RoKSB7XHJcbiAgICBjb25zdCByYXcgPSBhd2FpdCB0aGlzLmRiLmdldChsYXlvdXQuYi5lbmNvZGUodHlwZSwgaGFzaCkpO1xyXG4gICAgaWYgKCFyYXcpXHJcbiAgICAgIHJldHVybiBudWxsO1xyXG5cclxuICAgIGNvbnN0IGJsb2NrcmVjb3JkID0gQmxvY2tSZWNvcmQuZnJvbVJhdyhyYXcpO1xyXG5cclxuICAgIGNvbnN0IGZpbGVwYXRoID0gdGhpcy5maWxlcGF0aCh0eXBlLCBibG9ja3JlY29yZC5maWxlKTtcclxuXHJcbiAgICBsZXQgcG9zaXRpb24gPSBibG9ja3JlY29yZC5wb3NpdGlvbjtcclxuXHJcbiAgICBpZiAob2Zmc2V0KVxyXG4gICAgICBwb3NpdGlvbiArPSBvZmZzZXQ7XHJcblxyXG4gICAgaWYgKCFsZW5ndGggJiYgb2Zmc2V0ID4gMClcclxuICAgICAgbGVuZ3RoID0gYmxvY2tyZWNvcmQubGVuZ3RoIC0gb2Zmc2V0O1xyXG5cclxuICAgIGlmICghbGVuZ3RoKVxyXG4gICAgICBsZW5ndGggPSBibG9ja3JlY29yZC5sZW5ndGg7XHJcblxyXG4gICAgaWYgKG9mZnNldCArIGxlbmd0aCA+IGJsb2NrcmVjb3JkLmxlbmd0aClcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdPdXQtb2YtYm91bmRzIHJlYWQuJyk7XHJcblxyXG4gICAgY29uc3QgZGF0YSA9IEJ1ZmZlci5hbGxvYyhsZW5ndGgpO1xyXG5cclxuICAgIGNvbnN0IGZkID0gYXdhaXQgZnMub3BlbihmaWxlcGF0aCwgJ3InKTtcclxuICAgIGxldCBieXRlcyA9IDA7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgYnl0ZXMgPSBhd2FpdCBmcy5yZWFkKGZkLCBkYXRhLCAwLCBsZW5ndGgsIHBvc2l0aW9uKTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIGF3YWl0IGZzLmNsb3NlKGZkKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoYnl0ZXMgIT09IGxlbmd0aClcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyBudW1iZXIgb2YgYnl0ZXMgcmVhZC4nKTtcclxuXHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoaXMgd2lsbCBmcmVlIHJlc291cmNlcyBmb3Igc3RvcmluZyBtZXJrbGUgYmxvY2sgZGF0YS5cclxuICAgKiBAcGFyYW0ge0J1ZmZlcn0gaGFzaCAtIFRoZSBibG9jayBoYXNoXHJcbiAgICogQHJldHVybnMge1Byb21pc2V9XHJcbiAgICovXHJcblxyXG4gIGFzeW5jIHBydW5lTWVya2xlKGhhc2gpIHtcclxuICAgIHJldHVybiB0aGlzLl9wcnVuZSh0eXBlcy5NRVJLTEUsIGhhc2gpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhpcyB3aWxsIGZyZWUgcmVzb3VyY2VzIGZvciBzdG9yaW5nIHRoZSBibG9jayB1bmRvIGNvaW4gZGF0YS5cclxuICAgKiBAcGFyYW0ge0J1ZmZlcn0gaGFzaCAtIFRoZSBibG9jayBoYXNoXHJcbiAgICogQHJldHVybnMge1Byb21pc2V9XHJcbiAgICovXHJcblxyXG4gIGFzeW5jIHBydW5lVW5kbyhoYXNoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcHJ1bmUodHlwZXMuVU5ETywgaGFzaCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUaGlzIHdpbGwgZnJlZSByZXNvdXJjZXMgZm9yIHN0b3JpbmcgdGhlIGJsb2NrIGRhdGEuXHJcbiAgICogQHBhcmFtIHtCdWZmZXJ9IGhhc2ggLSBUaGUgYmxvY2sgaGFzaFxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfVxyXG4gICAqL1xyXG5cclxuICBhc3luYyBwcnVuZShoYXNoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcHJ1bmUodHlwZXMuQkxPQ0ssIGhhc2gpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhpcyB3aWxsIGZyZWUgcmVzb3VyY2VzIGZvciBzdG9yaW5nIHRoZSBzZXJpYWxpemVkIGJsb2NrIGZpbHRlciBkYXRhLlxyXG4gICAqIEBwYXJhbSB7QnVmZmVyfSBoYXNoIC0gVGhlIGJsb2NrIGhhc2hcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cclxuICAgKi9cclxuXHJcbiAgYXN5bmMgcHJ1bmVGaWx0ZXIoaGFzaCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3BydW5lKHR5cGVzLkZJTFRFUiwgaGFzaCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUaGlzIHdpbGwgZnJlZSByZXNvdXJjZXMgZm9yIHN0b3JpbmcgdGhlIGJsb2NrIGRhdGEuIFRoZSBibG9ja1xyXG4gICAqIGRhdGEgbWF5IG5vdCBiZSBkZWxldGVkIGZyb20gZGlzayBpbW1lZGlhdGVseSwgdGhlIGluZGV4IGZvciB0aGVcclxuICAgKiBibG9jayBpcyByZW1vdmVkIGFuZCB3aWxsIG5vdCBiZSBhYmxlIHRvIGJlIHJlYWQuIFRoZSB1bmRlcmx5aW5nXHJcbiAgICogZmlsZSBpcyB1bmxpbmtlZCB3aGVuIGFsbCBibG9ja3MgaW4gYSBmaWxlIGhhdmUgYmVlbiBwcnVuZWQuXHJcbiAgICogQHByaXZhdGVcclxuICAgKiBAcGFyYW0ge0J1ZmZlcn0gaGFzaCAtIFRoZSBibG9jayBoYXNoXHJcbiAgICogQHJldHVybnMge1Byb21pc2V9XHJcbiAgICovXHJcblxyXG4gIGFzeW5jIF9wcnVuZSh0eXBlLCBoYXNoKSB7XHJcbiAgICBjb25zdCBicmF3ID0gYXdhaXQgdGhpcy5kYi5nZXQobGF5b3V0LmIuZW5jb2RlKHR5cGUsIGhhc2gpKTtcclxuICAgIGlmICghYnJhdylcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgIGNvbnN0IGJsb2NrcmVjb3JkID0gQmxvY2tSZWNvcmQuZnJvbVJhdyhicmF3KTtcclxuXHJcbiAgICBjb25zdCBmcmF3ID0gYXdhaXQgdGhpcy5kYi5nZXQobGF5b3V0LmYuZW5jb2RlKHR5cGUsIGJsb2NrcmVjb3JkLmZpbGUpKTtcclxuICAgIGlmICghZnJhdylcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgIGNvbnN0IGZpbGVyZWNvcmQgPSBGaWxlUmVjb3JkLmZyb21SYXcoZnJhdyk7XHJcblxyXG4gICAgZmlsZXJlY29yZC5ibG9ja3MgLT0gMTtcclxuXHJcbiAgICBjb25zdCBiID0gdGhpcy5kYi5iYXRjaCgpO1xyXG5cclxuICAgIGlmIChmaWxlcmVjb3JkLmJsb2NrcyA9PT0gMClcclxuICAgICAgYi5kZWwobGF5b3V0LmYuZW5jb2RlKHR5cGUsIGJsb2NrcmVjb3JkLmZpbGUpKTtcclxuICAgIGVsc2VcclxuICAgICAgYi5wdXQobGF5b3V0LmYuZW5jb2RlKHR5cGUsIGJsb2NrcmVjb3JkLmZpbGUpLCBmaWxlcmVjb3JkLnRvUmF3KCkpO1xyXG5cclxuICAgIGIuZGVsKGxheW91dC5iLmVuY29kZSh0eXBlLCBoYXNoKSk7XHJcblxyXG4gICAgYXdhaXQgYi53cml0ZSgpO1xyXG5cclxuICAgIGlmIChmaWxlcmVjb3JkLmJsb2NrcyA9PT0gMClcclxuICAgICAgYXdhaXQgZnMudW5saW5rKHRoaXMuZmlsZXBhdGgodHlwZSwgYmxvY2tyZWNvcmQuZmlsZSkpO1xyXG5cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhpcyB3aWxsIGNoZWNrIGlmIG1lcmtsZSBibG9jayBkYXRhIGhhcyBiZWVuIHN0b3JlZFxyXG4gICAqIGFuZCBpcyBhdmFpbGFibGUuXHJcbiAgICogQHBhcmFtIHtCdWZmZXJ9IGhhc2ggLSBUaGUgYmxvY2sgaGFzaFxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfVxyXG4gICAqL1xyXG5cclxuICBhc3luYyBoYXNNZXJrbGUoaGFzaCkge1xyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuZGIuaGFzKGxheW91dC5iLmVuY29kZSh0eXBlcy5NRVJLTEUsIGhhc2gpKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoaXMgd2lsbCBjaGVjayBpZiBhIGJsb2NrIHVuZG8gY29pbiBoYXMgYmVlbiBzdG9yZWRcclxuICAgKiBhbmQgaXMgYXZhaWxhYmxlLlxyXG4gICAqIEBwYXJhbSB7QnVmZmVyfSBoYXNoIC0gVGhlIGJsb2NrIGhhc2hcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cclxuICAgKi9cclxuXHJcbiAgYXN5bmMgaGFzVW5kbyhoYXNoKSB7XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5kYi5oYXMobGF5b3V0LmIuZW5jb2RlKHR5cGVzLlVORE8sIGhhc2gpKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoaXMgd2lsbCBjaGVjayBpZiBhIGJsb2NrIGZpbHRlciBoYXMgYmVlbiBzdG9yZWRcclxuICAgKiBhbmQgaXMgYXZhaWxhYmxlLlxyXG4gICAqIEBwYXJhbSB7QnVmZmVyfSBoYXNoIC0gVGhlIGJsb2NrIGhhc2hcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cclxuICAgKi9cclxuXHJcbiAgYXN5bmMgaGFzRmlsdGVyKGhhc2gpIHtcclxuICAgIHJldHVybiBhd2FpdCB0aGlzLmRiLmhhcyhsYXlvdXQuYi5lbmNvZGUodHlwZXMuRklMVEVSLCBoYXNoKSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUaGlzIHdpbGwgY2hlY2sgaWYgYSBibG9jayBoYXMgYmVlbiBzdG9yZWQgYW5kIGlzIGF2YWlsYWJsZS5cclxuICAgKiBAcGFyYW0ge0J1ZmZlcn0gaGFzaCAtIFRoZSBibG9jayBoYXNoXHJcbiAgICogQHJldHVybnMge1Byb21pc2V9XHJcbiAgICovXHJcblxyXG4gIGFzeW5jIGhhcyhoYXNoKSB7XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5kYi5oYXMobGF5b3V0LmIuZW5jb2RlKHR5cGVzLkJMT0NLLCBoYXNoKSk7XHJcbiAgfVxyXG59XHJcblxyXG4vKlxyXG4gKiBFeHBvc2VcclxuICovXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEZpbGVCbG9ja1N0b3JlO1xyXG4iXX0=