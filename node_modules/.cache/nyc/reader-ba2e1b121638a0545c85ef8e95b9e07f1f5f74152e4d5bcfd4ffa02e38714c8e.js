/*!
 * reader.js - bit reader for bcoin
 * Copyright (c) 2017, Christopher Jeffrey (MIT License).
 * https://github.com/bcoin-org/bcoin
 */'use strict';function cov_2jrakku4zx(){var path="E:\\Projects\\Test\\bcoin\\lib\\golomb\\reader.js";var hash="74cf511aa104a3b3b194cabe2cc4bff88be8d1a2";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"E:\\Projects\\Test\\bcoin\\lib\\golomb\\reader.js",statementMap:{"0":{start:{line:9,column:15},end:{line:9,column:31}},"1":{start:{line:10,column:14},end:{line:10,column:28}},"2":{start:{line:25,column:4},end:{line:25,column:23}},"3":{start:{line:26,column:4},end:{line:26,column:17}},"4":{start:{line:27,column:4},end:{line:27,column:20}},"5":{start:{line:36,column:4},end:{line:37,column:29}},"6":{start:{line:37,column:6},end:{line:37,column:29}},"7":{start:{line:39,column:4},end:{line:46,column:5}},"8":{start:{line:40,column:6},end:{line:40,column:20}},"9":{start:{line:42,column:6},end:{line:43,column:31}},"10":{start:{line:43,column:8},end:{line:43,column:31}},"11":{start:{line:45,column:6},end:{line:45,column:22}},"12":{start:{line:48,column:4},end:{line:48,column:21}},"13":{start:{line:50,column:4},end:{line:50,column:54}},"14":{start:{line:59,column:4},end:{line:60,column:29}},"15":{start:{line:60,column:6},end:{line:60,column:29}},"16":{start:{line:62,column:4},end:{line:69,column:5}},"17":{start:{line:63,column:6},end:{line:63,column:20}},"18":{start:{line:65,column:6},end:{line:66,column:31}},"19":{start:{line:66,column:8},end:{line:66,column:31}},"20":{start:{line:68,column:6},end:{line:68,column:22}},"21":{start:{line:71,column:4},end:{line:75,column:5}},"22":{start:{line:72,column:17},end:{line:72,column:38}},"23":{start:{line:73,column:6},end:{line:73,column:20}},"24":{start:{line:74,column:6},end:{line:74,column:16}},"25":{start:{line:77,column:13},end:{line:77,column:61}},"26":{start:{line:78,column:4},end:{line:78,column:27}},"27":{start:{line:80,column:4},end:{line:80,column:18}},"28":{start:{line:82,column:4},end:{line:83,column:29}},"29":{start:{line:83,column:6},end:{line:83,column:29}},"30":{start:{line:85,column:4},end:{line:85,column:47}},"31":{start:{line:87,column:4},end:{line:87,column:14}},"32":{start:{line:96,column:4},end:{line:96,column:23}},"33":{start:{line:97,column:4},end:{line:97,column:24}},"34":{start:{line:99,column:14},end:{line:99,column:15}},"35":{start:{line:101,column:4},end:{line:105,column:5}},"36":{start:{line:102,column:6},end:{line:102,column:16}},"37":{start:{line:103,column:6},end:{line:103,column:29}},"38":{start:{line:104,column:6},end:{line:104,column:17}},"39":{start:{line:107,column:4},end:{line:111,column:5}},"40":{start:{line:108,column:6},end:{line:108,column:16}},"41":{start:{line:109,column:6},end:{line:109,column:28}},"42":{start:{line:110,column:6},end:{line:110,column:17}},"43":{start:{line:113,column:4},end:{line:113,column:15}},"44":{start:{line:122,column:4},end:{line:122,column:23}},"45":{start:{line:123,column:4},end:{line:123,column:24}},"46":{start:{line:125,column:16},end:{line:125,column:25}},"47":{start:{line:127,column:4},end:{line:132,column:5}},"48":{start:{line:128,column:6},end:{line:128,column:41}},"49":{start:{line:129,column:6},end:{line:129,column:33}},"50":{start:{line:131,column:6},end:{line:131,column:36}},"51":{start:{line:134,column:4},end:{line:134,column:15}},"52":{start:{line:142,column:0},end:{line:142,column:27}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:20},end:{line:28,column:3}},line:24},"1":{name:"(anonymous_1)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:12},end:{line:51,column:3}},line:35},"2":{name:"(anonymous_2)",decl:{start:{line:58,column:2},end:{line:58,column:3}},loc:{start:{line:58,column:13},end:{line:88,column:3}},line:58},"3":{name:"(anonymous_3)",decl:{start:{line:95,column:2},end:{line:95,column:3}},loc:{start:{line:95,column:18},end:{line:114,column:3}},line:95},"4":{name:"(anonymous_4)",decl:{start:{line:121,column:2},end:{line:121,column:3}},loc:{start:{line:121,column:20},end:{line:135,column:3}},line:121}},branchMap:{"0":{loc:{start:{line:36,column:4},end:{line:37,column:29}},type:"if",locations:[{start:{line:36,column:4},end:{line:37,column:29}},{start:{line:36,column:4},end:{line:37,column:29}}],line:36},"1":{loc:{start:{line:39,column:4},end:{line:46,column:5}},type:"if",locations:[{start:{line:39,column:4},end:{line:46,column:5}},{start:{line:39,column:4},end:{line:46,column:5}}],line:39},"2":{loc:{start:{line:42,column:6},end:{line:43,column:31}},type:"if",locations:[{start:{line:42,column:6},end:{line:43,column:31}},{start:{line:42,column:6},end:{line:43,column:31}}],line:42},"3":{loc:{start:{line:59,column:4},end:{line:60,column:29}},type:"if",locations:[{start:{line:59,column:4},end:{line:60,column:29}},{start:{line:59,column:4},end:{line:60,column:29}}],line:59},"4":{loc:{start:{line:62,column:4},end:{line:69,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:69,column:5}},{start:{line:62,column:4},end:{line:69,column:5}}],line:62},"5":{loc:{start:{line:65,column:6},end:{line:66,column:31}},type:"if",locations:[{start:{line:65,column:6},end:{line:66,column:31}},{start:{line:65,column:6},end:{line:66,column:31}}],line:65},"6":{loc:{start:{line:71,column:4},end:{line:75,column:5}},type:"if",locations:[{start:{line:71,column:4},end:{line:75,column:5}},{start:{line:71,column:4},end:{line:75,column:5}}],line:71},"7":{loc:{start:{line:82,column:4},end:{line:83,column:29}},type:"if",locations:[{start:{line:82,column:4},end:{line:83,column:29}},{start:{line:82,column:4},end:{line:83,column:29}}],line:82},"8":{loc:{start:{line:127,column:4},end:{line:132,column:5}},type:"if",locations:[{start:{line:127,column:4},end:{line:132,column:5}},{start:{line:127,column:4},end:{line:132,column:5}}],line:127}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"74cf511aa104a3b3b194cabe2cc4bff88be8d1a2"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2jrakku4zx=function(){return actualCoverage;};}return actualCoverage;}cov_2jrakku4zx();const assert=(cov_2jrakku4zx().s[0]++,require('bsert'));const{U64}=(cov_2jrakku4zx().s[1]++,require('n64'));/**
 * Bit Reader - as specified by BIP 158 for Golomb Rice Coding
 * @see https://github.com/bitcoin/bips/blob/master/bip-0158.mediawiki#golomb-rice-coding
 */class BitReader{/**
   * Create a bit reader.
   * @constructor
   * @ignore
   */constructor(data){cov_2jrakku4zx().f[0]++;cov_2jrakku4zx().s[2]++;this.stream=data;cov_2jrakku4zx().s[3]++;this.pos=0;cov_2jrakku4zx().s[4]++;this.remain=8;}/**
   * Read bit.
   * @returns {Buffer} bit
   */readBit(){cov_2jrakku4zx().f[1]++;cov_2jrakku4zx().s[5]++;if(this.pos>=this.stream.length){cov_2jrakku4zx().b[0][0]++;cov_2jrakku4zx().s[6]++;throw new Error('EOF');}else{cov_2jrakku4zx().b[0][1]++;}cov_2jrakku4zx().s[7]++;if(this.remain===0){cov_2jrakku4zx().b[1][0]++;cov_2jrakku4zx().s[8]++;this.pos+=1;cov_2jrakku4zx().s[9]++;if(this.pos>=this.stream.length){cov_2jrakku4zx().b[2][0]++;cov_2jrakku4zx().s[10]++;throw new Error('EOF');}else{cov_2jrakku4zx().b[2][1]++;}cov_2jrakku4zx().s[11]++;this.remain=8;}else{cov_2jrakku4zx().b[1][1]++;}cov_2jrakku4zx().s[12]++;this.remain-=1;cov_2jrakku4zx().s[13]++;return this.stream[this.pos]>>this.remain&1;}/**
   * Read byte.
   * @returns {Buffer} data
   */readByte(){cov_2jrakku4zx().f[2]++;cov_2jrakku4zx().s[14]++;if(this.pos>=this.stream.length){cov_2jrakku4zx().b[3][0]++;cov_2jrakku4zx().s[15]++;throw new Error('EOF');}else{cov_2jrakku4zx().b[3][1]++;}cov_2jrakku4zx().s[16]++;if(this.remain===0){cov_2jrakku4zx().b[4][0]++;cov_2jrakku4zx().s[17]++;this.pos+=1;cov_2jrakku4zx().s[18]++;if(this.pos>=this.stream.length){cov_2jrakku4zx().b[5][0]++;cov_2jrakku4zx().s[19]++;throw new Error('EOF');}else{cov_2jrakku4zx().b[5][1]++;}cov_2jrakku4zx().s[20]++;this.remain=8;}else{cov_2jrakku4zx().b[4][1]++;}cov_2jrakku4zx().s[21]++;if(this.remain===8){cov_2jrakku4zx().b[6][0]++;const ch=(cov_2jrakku4zx().s[22]++,this.stream[this.pos]);cov_2jrakku4zx().s[23]++;this.pos+=1;cov_2jrakku4zx().s[24]++;return ch;}else{cov_2jrakku4zx().b[6][1]++;}let ch=(cov_2jrakku4zx().s[25]++,this.stream[this.pos]&(1<<this.remain)-1);cov_2jrakku4zx().s[26]++;ch<<=8-this.remain;cov_2jrakku4zx().s[27]++;this.pos+=1;cov_2jrakku4zx().s[28]++;if(this.pos>=this.stream.length){cov_2jrakku4zx().b[7][0]++;cov_2jrakku4zx().s[29]++;throw new Error('EOF');}else{cov_2jrakku4zx().b[7][1]++;}cov_2jrakku4zx().s[30]++;ch|=this.stream[this.pos]>>this.remain;cov_2jrakku4zx().s[31]++;return ch;}/**
   * Read bits.
   * @returns {Buffer} data
   */readBits(count){cov_2jrakku4zx().f[3]++;cov_2jrakku4zx().s[32]++;assert(count>=0);cov_2jrakku4zx().s[33]++;assert(count<=32);let num=(cov_2jrakku4zx().s[34]++,0);cov_2jrakku4zx().s[35]++;while(count>=8){cov_2jrakku4zx().s[36]++;num<<=8;cov_2jrakku4zx().s[37]++;num|=this.readByte();cov_2jrakku4zx().s[38]++;count-=8;}cov_2jrakku4zx().s[39]++;while(count>0){cov_2jrakku4zx().s[40]++;num<<=1;cov_2jrakku4zx().s[41]++;num|=this.readBit();cov_2jrakku4zx().s[42]++;count-=1;}cov_2jrakku4zx().s[43]++;return num;}/**
   * Read bits. 64-bit.
   * @returns {Buffer} data
   */readBits64(count){cov_2jrakku4zx().f[4]++;cov_2jrakku4zx().s[44]++;assert(count>=0);cov_2jrakku4zx().s[45]++;assert(count<=64);const num=(cov_2jrakku4zx().s[46]++,new U64());cov_2jrakku4zx().s[47]++;if(count>32){cov_2jrakku4zx().b[8][0]++;cov_2jrakku4zx().s[48]++;num.hi=this.readBits(count-32);cov_2jrakku4zx().s[49]++;num.lo=this.readBits(32);}else{cov_2jrakku4zx().b[8][1]++;cov_2jrakku4zx().s[50]++;num.lo=this.readBits(count);}cov_2jrakku4zx().s[51]++;return num;}}/*
 * Expose
 */cov_2jrakku4zx().s[52]++;module.exports=BitReader;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlYWRlci5qcyJdLCJuYW1lcyI6WyJhc3NlcnQiLCJyZXF1aXJlIiwiVTY0IiwiQml0UmVhZGVyIiwiY29uc3RydWN0b3IiLCJkYXRhIiwic3RyZWFtIiwicG9zIiwicmVtYWluIiwicmVhZEJpdCIsImxlbmd0aCIsIkVycm9yIiwicmVhZEJ5dGUiLCJjaCIsInJlYWRCaXRzIiwiY291bnQiLCJudW0iLCJyZWFkQml0czY0IiwiaGkiLCJsbyIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FFQSxhLDQzTUFTWTsyRkFQWixLQUFNQSxDQUFBQSxNQUFNLDBCQUFHQyxPQUFPLENBQUMsT0FBRCxDQUFWLENBQVosQ0FDQSxLQUFNLENBQUNDLEdBQUQsMkJBQVFELE9BQU8sQ0FBQyxLQUFELENBQWYsQ0FBTixDQUVBO0FBQ0E7QUFDQTtBQUNBLEdBRUEsS0FBTUUsQ0FBQUEsU0FBVSxDQUNkO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsS0FFRUMsV0FBVyxDQUFDQyxJQUFELENBQU8saURBQ2hCLEtBQUtDLE1BQUwsQ0FBY0QsSUFBZCxDQURnQix3QkFFaEIsS0FBS0UsR0FBTCxDQUFXLENBQVgsQ0FGZ0Isd0JBR2hCLEtBQUtDLE1BQUwsQ0FBYyxDQUFkLENBQ0QsQ0FFRDtBQUNGO0FBQ0E7QUFDQSxLQUVFQyxPQUFPLEVBQUcsaURBQ1IsR0FBSSxLQUFLRixHQUFMLEVBQVksS0FBS0QsTUFBTCxDQUFZSSxNQUE1QixDQUNFLHlEQUFNLElBQUlDLENBQUFBLEtBQUosQ0FBVSxLQUFWLENBQU4sQ0FBdUIsQ0FEekIsaUNBRFEsd0JBSVIsR0FBSSxLQUFLSCxNQUFMLEdBQWdCLENBQXBCLENBQXVCLG9EQUNyQixLQUFLRCxHQUFMLEVBQVksQ0FBWixDQURxQix3QkFHckIsR0FBSSxLQUFLQSxHQUFMLEVBQVksS0FBS0QsTUFBTCxDQUFZSSxNQUE1QixDQUNFLDBEQUFNLElBQUlDLENBQUFBLEtBQUosQ0FBVSxL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aEIsR0FBSWEsS0FBSyxDQUFHLEVBQVosQ0FBZ0IscURBQ2RDLEdBQUcsQ0FBQ0UsRUFBSixDQUFTLEtBQUtKLFFBQUwsQ0FBY0MsS0FBSyxDQUFHLEVBQXRCLENBQVQsQ0FEYyx5QkFFZEMsR0FBRyxDQUFDRyxFQUFKLENBQVMsS0FBS0wsUUFBTCxDQUFjLEVBQWQsQ0FBVCxDQUNELENBSEQsSUFHTyxxREFDTEUsR0FBRyxDQUFDRyxFQUFKLENBQVMsS0FBS0wsUUFBTCxDQUFjQyxLQUFkLENBQVQsQ0FDRCxDQVhlLHlCQWFoQixNQUFPQyxDQUFBQSxHQUFQLENBQ0QsQ0F0SGEsQ0F5SGhCO0FBQ0E7QUFDQSxHLHlCQUVBSSxNQUFNLENBQUNDLE9BQVAsQ0FBaUJsQixTQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxyXG4gKiByZWFkZXIuanMgLSBiaXQgcmVhZGVyIGZvciBiY29pblxyXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcsIENocmlzdG9waGVyIEplZmZyZXkgKE1JVCBMaWNlbnNlKS5cclxuICogaHR0cHM6Ly9naXRodWIuY29tL2Jjb2luLW9yZy9iY29pblxyXG4gKi9cclxuXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbmNvbnN0IGFzc2VydCA9IHJlcXVpcmUoJ2JzZXJ0Jyk7XHJcbmNvbnN0IHtVNjR9ID0gcmVxdWlyZSgnbjY0Jyk7XHJcblxyXG4vKipcclxuICogQml0IFJlYWRlciAtIGFzIHNwZWNpZmllZCBieSBCSVAgMTU4IGZvciBHb2xvbWIgUmljZSBDb2RpbmdcclxuICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vYml0Y29pbi9iaXBzL2Jsb2IvbWFzdGVyL2JpcC0wMTU4Lm1lZGlhd2lraSNnb2xvbWItcmljZS1jb2RpbmdcclxuICovXHJcblxyXG5jbGFzcyBCaXRSZWFkZXIge1xyXG4gIC8qKlxyXG4gICAqIENyZWF0ZSBhIGJpdCByZWFkZXIuXHJcbiAgICogQGNvbnN0cnVjdG9yXHJcbiAgICogQGlnbm9yZVxyXG4gICAqL1xyXG5cclxuICBjb25zdHJ1Y3RvcihkYXRhKSB7XHJcbiAgICB0aGlzLnN0cmVhbSA9IGRhdGE7XHJcbiAgICB0aGlzLnBvcyA9IDA7XHJcbiAgICB0aGlzLnJlbWFpbiA9IDg7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZWFkIGJpdC5cclxuICAgKiBAcmV0dXJucyB7QnVmZmVyfSBiaXRcclxuICAgKi9cclxuXHJcbiAgcmVhZEJpdCgpIHtcclxuICAgIGlmICh0aGlzLnBvcyA+PSB0aGlzLnN0cmVhbS5sZW5ndGgpXHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignRU9GJyk7XHJcblxyXG4gICAgaWYgKHRoaXMucmVtYWluID09PSAwKSB7XHJcbiAgICAgIHRoaXMucG9zICs9IDE7XHJcblxyXG4gICAgICBpZiAodGhpcy5wb3MgPj0gdGhpcy5zdHJlYW0ubGVuZ3RoKVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRU9GJyk7XHJcblxyXG4gICAgICB0aGlzLnJlbWFpbiA9IDg7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5yZW1haW4gLT0gMTtcclxuXHJcbiAgICByZXR1cm4gKHRoaXMuc3RyZWFtW3RoaXMucG9zXSA+PiB0aGlzLnJlbWFpbikgJiAxO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVhZCBieXRlLlxyXG4gICAqIEByZXR1cm5zIHtCdWZmZXJ9IGRhdGFcclxuICAgKi9cclxuXHJcbiAgcmVhZEJ5dGUoKSB7XHJcbiAgICBpZiAodGhpcy5wb3MgPj0gdGhpcy5zdHJlYW0ubGVuZ3RoKVxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VPRicpO1xyXG5cclxuICAgIGlmICh0aGlzLnJlbWFpbiA9PT0gMCkge1xyXG4gICAgICB0aGlzLnBvcyArPSAxO1xyXG5cclxuICAgICAgaWYgKHRoaXMucG9zID49IHRoaXMuc3RyZWFtLmxlbmd0aClcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VPRicpO1xyXG5cclxuICAgICAgdGhpcy5yZW1haW4gPSA4O1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLnJlbWFpbiA9PT0gOCkge1xyXG4gICAgICBjb25zdCBjaCA9IHRoaXMuc3RyZWFtW3RoaXMucG9zXTtcclxuICAgICAgdGhpcy5wb3MgKz0gMTtcclxuICAgICAgcmV0dXJuIGNoO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBjaCA9IHRoaXMuc3RyZWFtW3RoaXMucG9zXSAmICgoMSA8PCB0aGlzLnJlbWFpbikgLSAxKTtcclxuICAgIGNoIDw8PSA4IC0gdGhpcy5yZW1haW47XHJcblxyXG4gICAgdGhpcy5wb3MgKz0gMTtcclxuXHJcbiAgICBpZiAodGhpcy5wb3MgPj0gdGhpcy5zdHJlYW0ubGVuZ3RoKVxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VPRicpO1xyXG5cclxuICAgIGNoIHw9IHRoaXMuc3RyZWFtW3RoaXMucG9zXSA+PiB0aGlzLnJlbWFpbjtcclxuXHJcbiAgICByZXR1cm4gY2g7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZWFkIGJpdHMuXHJcbiAgICogQHJldHVybnMge0J1ZmZlcn0gZGF0YVxyXG4gICAqL1xyXG5cclxuICByZWFkQml0cyhjb3VudCkge1xyXG4gICAgYXNzZXJ0KGNvdW50ID49IDApO1xyXG4gICAgYXNzZXJ0KGNvdW50IDw9IDMyKTtcclxuXHJcbiAgICBsZXQgbnVtID0gMDtcclxuXHJcbiAgICB3aGlsZSAoY291bnQgPj0gOCkge1xyXG4gICAgICBudW0gPDw9IDg7XHJcbiAgICAgIG51bSB8PSB0aGlzLnJlYWRCeXRlKCk7XHJcbiAgICAgIGNvdW50IC09IDg7XHJcbiAgICB9XHJcblxyXG4gICAgd2hpbGUgKGNvdW50ID4gMCkge1xyXG4gICAgICBudW0gPDw9IDE7XHJcbiAgICAgIG51bSB8PSB0aGlzLnJlYWRCaXQoKTtcclxuICAgICAgY291bnQgLT0gMTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbnVtO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVhZCBiaXRzLiA2NC1iaXQuXHJcbiAgICogQHJldHVybnMge0J1ZmZlcn0gZGF0YVxyXG4gICAqL1xyXG5cclxuICByZWFkQml0czY0KGNvdW50KSB7XHJcbiAgICBhc3NlcnQoY291bnQgPj0gMCk7XHJcbiAgICBhc3NlcnQoY291bnQgPD0gNjQpO1xyXG5cclxuICAgIGNvbnN0IG51bSA9IG5ldyBVNjQoKTtcclxuXHJcbiAgICBpZiAoY291bnQgPiAzMikge1xyXG4gICAgICBudW0uaGkgPSB0aGlzLnJlYWRCaXRzKGNvdW50IC0gMzIpO1xyXG4gICAgICBudW0ubG8gPSB0aGlzLnJlYWRCaXRzKDMyKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG51bS5sbyA9IHRoaXMucmVhZEJpdHMoY291bnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBudW07XHJcbiAgfVxyXG59XHJcblxyXG4vKlxyXG4gKiBFeHBvc2VcclxuICovXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEJpdFJlYWRlcjtcclxuIl19