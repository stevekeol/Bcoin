/*!
 * common.js - common functions for hd
 * Copyright (c) 2015-2016, Christopher Jeffrey (MIT License).
 * https://github.com/bcoin-org/bcoin
 */'use strict';function cov_ttmh6rw2a(){var path="E:\\Projects\\Test\\bcoin\\lib\\hd\\common.js";var hash="45bd3c7d1dbd5331bcf2eee00e2189956bb2e17b";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"E:\\Projects\\Test\\bcoin\\lib\\hd\\common.js",statementMap:{"0":{start:{line:9,column:15},end:{line:9,column:31}},"1":{start:{line:10,column:12},end:{line:10,column:27}},"2":{start:{line:11,column:15},end:{line:11,column:22}},"3":{start:{line:19,column:0},end:{line:19,column:29}},"4":{start:{line:27,column:0},end:{line:27,column:25}},"5":{start:{line:35,column:0},end:{line:35,column:25}},"6":{start:{line:42,column:0},end:{line:42,column:28}},"7":{start:{line:52,column:0},end:{line:101,column:2}},"8":{start:{line:53,column:2},end:{line:53,column:35}},"9":{start:{line:54,column:2},end:{line:54,column:36}},"10":{start:{line:55,column:2},end:{line:55,column:27}},"11":{start:{line:56,column:2},end:{line:56,column:30}},"12":{start:{line:58,column:16},end:{line:58,column:31}},"13":{start:{line:59,column:15},end:{line:59,column:23}},"14":{start:{line:61,column:2},end:{line:66,column:3}},"15":{start:{line:65,column:4},end:{line:65,column:42}},"16":{start:{line:68,column:17},end:{line:68,column:19}},"17":{start:{line:70,column:2},end:{line:98,column:3}},"18":{start:{line:70,column:15},end:{line:70,column:16}},"19":{start:{line:71,column:15},end:{line:71,column:23}},"20":{start:{line:73,column:21},end:{line:73,column:51}},"21":{start:{line:75,column:4},end:{line:76,column:31}},"22":{start:{line:76,column:6},end:{line:76,column:31}},"23":{start:{line:78,column:4},end:{line:79,column:47}},"24":{start:{line:79,column:6},end:{line:79,column:47}},"25":{start:{line:81,column:4},end:{line:82,column:52}},"26":{start:{line:82,column:6},end:{line:82,column:52}},"27":{start:{line:84,column:16},end:{line:84,column:34}},"28":{start:{line:86,column:4},end:{line:87,column:50}},"29":{start:{line:87,column:6},end:{line:87,column:50}},"30":{start:{line:89,column:4},end:{line:92,column:5}},"31":{start:{line:90,column:6},end:{line:90,column:31}},"32":{start:{line:91,column:6},end:{line:91,column:19}},"33":{start:{line:94,column:4},end:{line:95,column:56}},"34":{start:{line:95,column:6},end:{line:95,column:56}},"35":{start:{line:97,column:4},end:{line:97,column:23}},"36":{start:{line:100,column:2},end:{line:100,column:16}},"37":{start:{line:109,column:0},end:{line:113,column:2}},"38":{start:{line:110,column:2},end:{line:112,column:35}},"39":{start:{line:122,column:0},end:{line:129,column:2}},"40":{start:{line:123,column:2},end:{line:127,column:3}},"41":{start:{line:124,column:18},end:{line:124,column:51}},"42":{start:{line:125,column:4},end:{line:126,column:19}},"43":{start:{line:126,column:6},end:{line:126,column:19}},"44":{start:{line:128,column:2},end:{line:128,column:69}},"45":{start:{line:137,column:0},end:{line:137,column:41}}},fnMap:{"0":{name:"parsePath",decl:{start:{line:52,column:28},end:{line:52,column:37}},loc:{start:{line:52,column:50},end:{line:101,column:1}},line:52},"1":{name:"isMaster",decl:{start:{line:109,column:27},end:{line:109,column:35}},loc:{start:{line:109,column:41},end:{line:113,column:1}},line:109},"2":{name:"isAccount",decl:{start:{line:122,column:28},end:{line:122,column:37}},loc:{start:{line:122,column:52},end:{line:129,column:1}},line:122}},branchMap:{"0":{loc:{start:{line:61,column:2},end:{line:66,column:3}},type:"if",locations:[{start:{line:61,column:2},end:{line:66,column:3}},{start:{line:61,column:2},end:{line:66,column:3}}],line:61},"1":{loc:{start:{line:61,column:6},end:{line:64,column:23}},type:"binary-expr",locations:[{start:{line:61,column:6},end:{line:61,column:18}},{start:{line:62,column:9},end:{line:62,column:21}},{start:{line:63,column:9},end:{line:63,column:23}},{start:{line:64,column:9},end:{line:64,column:23}}],line:61},"2":{loc:{start:{line:75,column:4},end:{line:76,column:31}},type:"if",locations:[{start:{line:75,column:4},end:{line:76,column:31}},{start:{line:75,column:4},end:{line:76,column:31}}],line:75},"3":{loc:{start:{line:78,column:4},end:{line:79,column:47}},type:"if",locations:[{start:{line:78,column:4},end:{line:79,column:47}},{start:{line:78,column:4},end:{line:79,column:47}}],line:78},"4":{loc:{start:{line:81,column:4},end:{line:82,column:52}},type:"if",locations:[{start:{line:81,column:4},end:{line:82,column:52}},{start:{line:81,column:4},end:{line:82,column:52}}],line:81},"5":{loc:{start:{line:86,column:4},end:{line:87,column:50}},type:"if",locations:[{start:{line:86,column:4},end:{line:87,column:50}},{start:{line:86,column:4},end:{line:87,column:50}}],line:86},"6":{loc:{start:{line:89,column:4},end:{line:92,column:5}},type:"if",locations:[{start:{line:89,column:4},end:{line:92,column:5}},{start:{line:89,column:4},end:{line:92,column:5}}],line:89},"7":{loc:{start:{line:94,column:4},end:{line:95,column:56}},type:"if",locations:[{start:{line:94,column:4},end:{line:95,column:56}},{start:{line:94,column:4},end:{line:95,column:56}}],line:94},"8":{loc:{start:{line:94,column:8},end:{line:94,column:42}},type:"binary-expr",locations:[{start:{line:94,column:8},end:{line:94,column:13}},{start:{line:94,column:18},end:{line:94,column:41}}],line:94},"9":{loc:{start:{line:110,column:9},end:{line:112,column:34}},type:"binary-expr",locations:[{start:{line:110,column:9},end:{line:110,column:24}},{start:{line:111,column:7},end:{line:111,column:27}},{start:{line:112,column:7},end:{line:112,column:34}}],line:110},"10":{loc:{start:{line:123,column:2},end:{line:127,column:3}},type:"if",locations:[{start:{line:123,column:2},end:{line:127,column:3}},{start:{line:123,column:2},end:{line:127,column:3}}],line:123},"11":{loc:{start:{line:125,column:4},end:{line:126,column:19}},type:"if",locations:[{start:{line:125,column:4},end:{line:126,column:19}},{start:{line:125,column:4},end:{line:126,column:19}}],line:125},"12":{loc:{start:{line:128,column:9},end:{line:128,column:68}},type:"binary-expr",locations:[{start:{line:128,column:9},end:{line:128,column:24}},{start:{line:128,column:28},end:{line:128,column:68}}],line:128}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0,0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0,0],"10":[0,0],"11":[0,0],"12":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"45bd3c7d1dbd5331bcf2eee00e2189956bb2e17b"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_ttmh6rw2a=function(){return actualCoverage;};}return actualCoverage;}cov_ttmh6rw2a();const assert=(cov_ttmh6rw2a().s[0]++,require('bsert'));const LRU=(cov_ttmh6rw2a().s[1]++,require('blru'));const common=(cov_ttmh6rw2a().s[2]++,exports);/**
 * Index at which hardening begins.
 * @const {Number}
 * @default
 */cov_ttmh6rw2a().s[3]++;common.HARDENED=0x80000000;/**
 * Min entropy bits.
 * @const {Number}
 * @default
 */cov_ttmh6rw2a().s[4]++;common.MIN_ENTROPY=128;/**
 * Max entropy bits.
 * @const {Number}
 * @default
 */cov_ttmh6rw2a().s[5]++;common.MAX_ENTROPY=512;/**
 * LRU cache to avoid deriving keys twice.
 * @type {LRU}
 */cov_ttmh6rw2a().s[6]++;common.cache=new LRU(500);/**
 * Parse a derivation path and return an array of indexes.
 * @see https://github.com/bitcoin/bips/blob/master/bip-0044.mediawiki
 * @param {String} path
 * @param {Boolean} hard
 * @returns {Number[]}
 */cov_ttmh6rw2a().s[7]++;common.parsePath=function parsePath(path,hard){cov_ttmh6rw2a().f[0]++;cov_ttmh6rw2a().s[8]++;assert(typeof path==='string');cov_ttmh6rw2a().s[9]++;assert(typeof hard==='boolean');cov_ttmh6rw2a().s[10]++;assert(path.length>=1);cov_ttmh6rw2a().s[11]++;assert(path.length<=3062);const parts=(cov_ttmh6rw2a().s[12]++,path.split('/'));const root=(cov_ttmh6rw2a().s[13]++,parts[0]);cov_ttmh6rw2a().s[14]++;if((cov_ttmh6rw2a().b[1][0]++,root!=='m')&&(cov_ttmh6rw2a().b[1][1]++,root!=='M')&&(cov_ttmh6rw2a().b[1][2]++,root!=='m\'')&&(cov_ttmh6rw2a().b[1][3]++,root!=='M\'')){cov_ttmh6rw2a().b[0][0]++;cov_ttmh6rw2a().s[15]++;throw new Error('Invalid path root.');}else{cov_ttmh6rw2a().b[0][1]++;}const result=(cov_ttmh6rw2a().s[16]++,[]);cov_ttmh6rw2a().s[17]++;for(let i=(cov_ttmh6rw2a().s[18]++,1);i<parts.length;i++){let part=(cov_ttmh6rw2a().s[19]++,parts[i]);const hardened=(cov_ttmh6rw2a().s[20]++,part[part.length-1]==='\'');cov_ttmh6rw2a().s[21]++;if(hardened){cov_ttmh6rw2a().b[2][0]++;cov_ttmh6rw2a().s[22]++;part=part.slice(0,-1);}else{cov_ttmh6rw2a().b[2][1]++;}cov_ttmh6rw2a().s[23]++;if(part.length>10){cov_ttmh6rw2a().b[3][0]++;cov_ttmh6rw2a().s[24]++;throw new Error('Path index too large.');}else{cov_ttmh6rw2a().b[3][1]++;}cov_ttmh6rw2a().s[25]++;if(!/^\d+$/.test(part)){cov_ttmh6rw2a().b[4][0]++;cov_ttmh6rw2a().s[26]++;throw new Error('Path index is non-numeric.');}else{cov_ttmh6rw2a().b[4][1]++;}let index=(cov_ttmh6rw2a().s[27]++,parseInt(part,10));cov_ttmh6rw2a().s[28]++;if(index>>>0!==index){cov_ttmh6rw2a().b[5][0]++;cov_ttmh6rw2a().s[29]++;throw new Error('Path index out of range.');}else{cov_ttmh6rw2a().b[5][1]++;}cov_ttmh6rw2a().s[30]++;if(hardened){cov_ttmh6rw2a().b[6][0]++;cov_ttmh6rw2a().s[31]++;index|=common.HARDENED;cov_ttmh6rw2a().s[32]++;index>>>=0;}else{cov_ttmh6rw2a().b[6][1]++;}cov_ttmh6rw2a().s[33]++;if((cov_ttmh6rw2a().b[8][0]++,!hard)&&(cov_ttmh6rw2a().b[8][1]++,index&common.HARDENED)){cov_ttmh6rw2a().b[7][0]++;cov_ttmh6rw2a().s[34]++;throw new Error('Path index cannot be hardened.');}else{cov_ttmh6rw2a().b[7][1]++;}cov_ttmh6rw2a().s[35]++;result.push(index);}cov_ttmh6rw2a().s[36]++;return result;};/**
 * Test whether the key is a master key.
 * @param {HDPrivateKey|HDPublicKey} key
 * @returns {Boolean}
 */cov_ttmh6rw2a().s[37]++;common.isMaster=function isMaster(key){cov_ttmh6rw2a().f[1]++;cov_ttmh6rw2a().s[38]++;return(cov_ttmh6rw2a().b[9][0]++,key.depth===0)&&(cov_ttmh6rw2a().b[9][1]++,key.childIndex===0)&&(cov_ttmh6rw2a().b[9][2]++,key.parentFingerPrint===0);};/**
 * Test whether the key is (most likely) a BIP44 account key.
 * @param {HDPrivateKey|HDPublicKey} key
 * @param {Number?} account
 * @returns {Boolean}
 */cov_ttmh6rw2a().s[39]++;common.isAccount=function isAccount(key,account){cov_ttmh6rw2a().f[2]++;cov_ttmh6rw2a().s[40]++;if(account!=null){cov_ttmh6rw2a().b[10][0]++;const index=(cov_ttmh6rw2a().s[41]++,(common.HARDENED|account)>>>0);cov_ttmh6rw2a().s[42]++;if(key.childIndex!==index){cov_ttmh6rw2a().b[11][0]++;cov_ttmh6rw2a().s[43]++;return false;}else{cov_ttmh6rw2a().b[11][1]++;}}else{cov_ttmh6rw2a().b[10][1]++;}cov_ttmh6rw2a().s[44]++;return(cov_ttmh6rw2a().b[12][0]++,key.depth===3)&&(cov_ttmh6rw2a().b[12][1]++,(key.childIndex&common.HARDENED)!==0);};/**
 * A compressed pubkey of all zeroes.
 * @const {Buffer}
 * @default
 */cov_ttmh6rw2a().s[45]++;common.ZERO_KEY=Buffer.alloc(33,0x00);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyJhc3NlcnQiLCJyZXF1aXJlIiwiTFJVIiwiY29tbW9uIiwiZXhwb3J0cyIsIkhBUkRFTkVEIiwiTUlOX0VOVFJPUFkiLCJNQVhfRU5UUk9QWSIsImNhY2hlIiwicGFyc2VQYXRoIiwicGF0aCIsImhhcmQiLCJsZW5ndGgiLCJwYXJ0cyIsInNwbGl0Iiwicm9vdCIsIkVycm9yIiwicmVzdWx0IiwiaSIsInBhcnQiLCJoYXJkZW5lZCIsInNsaWNlIiwidGVzdCIsImluZGV4IiwicGFyc2VJbnQiLCJwdXNoIiwiaXNNYXN0ZXIiLCJrZXkiLCJkZXB0aCIsImNoaWxkSW5kZXgiLCJwYXJlbnRGaW5nZXJQcmludCIsImlzQWNjb3VudCIsImFjY291bnQiLCJaRVJPX0tFWSIsIkJ1ZmZlciIsImFsbG9jIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBRUEsYSxncE5BU1k7eUZBUFosS0FBTUEsQ0FBQUEsTUFBTSx5QkFBR0MsT0FBTyxDQUFDLE9BQUQsQ0FBVixDQUFaLENBQ0EsS0FBTUMsQ0FBQUEsR0FBRyx5QkFBR0QsT0FBTyxDQUFDLE1BQUQsQ0FBVixDQUFULENBQ0EsS0FBTUUsQ0FBQUEsTUFBTSx5QkFBR0MsT0FBSCxDQUFaLENBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHLHVCQUVBRCxNQUFNLENBQUNFLFFBQVAsQ0FBa0IsVUFBbEIsQ0FFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEcsdUJBRUFGLE1BQU0sQ0FBQ0csV0FBUCxDQUFxQixHQUFyQixDQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRyx1QkFFQUgsTUFBTSxDQUFDSSxXQUFQLENBQXFCLEdBQXJCLENBRUE7QUFDQTtBQUNBO0FBQ0EsRyx1QkFFQUosTUFBTSxDQUFDSyxLQUFQLENBQWUsR0FBSU4sQ0FBQUEsR0FBSixDQUFRLEdBQVIsQ0FBZixDQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEcsdUJBRUFDLE1BQU0s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QSxHQUFHLENBQUNDLEtBQUosR0FBYyxDQUFkLDhCQUNGRCxHQUFHLENBQUNFLFVBQUosR0FBbUIsQ0FEakIsOEJBRUZGLEdBQUcsQ0FBQ0csaUJBQUosR0FBMEIsQ0FGeEIsQ0FBUCxDQUdELENBSkQsQ0FNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRyx3QkFFQTNCLE1BQU0sQ0FBQzRCLFNBQVAsQ0FBbUIsUUFBU0EsQ0FBQUEsU0FBVCxDQUFtQkosR0FBbkIsQ0FBd0JLLE9BQXhCLENBQWlDLGdEQUNsRCxHQUFJQSxPQUFPLEVBQUksSUFBZixDQUFxQiw0QkFDbkIsS0FBTVQsQ0FBQUEsS0FBSywwQkFBRyxDQUFDcEIsTUFBTSxDQUFDRSxRQUFQLENBQWtCMkIsT0FBbkIsSUFBZ0MsQ0FBbkMsQ0FBWCxDQURtQix3QkFFbkIsR0FBSUwsR0FBRyxDQUFDRSxVQUFKLEdBQW1CTixLQUF2QixDQUNFLDBEQUFPLE1BQVAsQ0FBYSxDQURmLGlDQUVELENBSkQsaUNBRGtELHdCQU1sRCxNQUFPLDRCQUFBSSxHQUFHLENBQUNDLEtBQUosR0FBYyxDQUFkLCtCQUFtQixDQUFDRCxHQUFHLENBQUNFLFVBQUosQ0FBaUIxQixNQUFNLENBQUNFLFFBQXpCLElBQXVDLENBQTFELENBQVAsQ0FDRCxDQVBELENBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHLHdCQUVBRixNQUFNLENBQUM4QixRQUFQLENBQWtCQyxNQUFNLENBQUNDLEtBQVAsQ0FBYSxFQUFiLENBQWlCLElBQWpCLENBQWxCIiwic291cmNlc0NvbnRlbnQiOlsiLyohXHJcbiAqIGNvbW1vbi5qcyAtIGNvbW1vbiBmdW5jdGlvbnMgZm9yIGhkXHJcbiAqIENvcHlyaWdodCAoYykgMjAxNS0yMDE2LCBDaHJpc3RvcGhlciBKZWZmcmV5IChNSVQgTGljZW5zZSkuXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9iY29pbi1vcmcvYmNvaW5cclxuICovXHJcblxyXG4ndXNlIHN0cmljdCc7XHJcblxyXG5jb25zdCBhc3NlcnQgPSByZXF1aXJlKCdic2VydCcpO1xyXG5jb25zdCBMUlUgPSByZXF1aXJlKCdibHJ1Jyk7XHJcbmNvbnN0IGNvbW1vbiA9IGV4cG9ydHM7XHJcblxyXG4vKipcclxuICogSW5kZXggYXQgd2hpY2ggaGFyZGVuaW5nIGJlZ2lucy5cclxuICogQGNvbnN0IHtOdW1iZXJ9XHJcbiAqIEBkZWZhdWx0XHJcbiAqL1xyXG5cclxuY29tbW9uLkhBUkRFTkVEID0gMHg4MDAwMDAwMDtcclxuXHJcbi8qKlxyXG4gKiBNaW4gZW50cm9weSBiaXRzLlxyXG4gKiBAY29uc3Qge051bWJlcn1cclxuICogQGRlZmF1bHRcclxuICovXHJcblxyXG5jb21tb24uTUlOX0VOVFJPUFkgPSAxMjg7XHJcblxyXG4vKipcclxuICogTWF4IGVudHJvcHkgYml0cy5cclxuICogQGNvbnN0IHtOdW1iZXJ9XHJcbiAqIEBkZWZhdWx0XHJcbiAqL1xyXG5cclxuY29tbW9uLk1BWF9FTlRST1BZID0gNTEyO1xyXG5cclxuLyoqXHJcbiAqIExSVSBjYWNoZSB0byBhdm9pZCBkZXJpdmluZyBrZXlzIHR3aWNlLlxyXG4gKiBAdHlwZSB7TFJVfVxyXG4gKi9cclxuXHJcbmNvbW1vbi5jYWNoZSA9IG5ldyBMUlUoNTAwKTtcclxuXHJcbi8qKlxyXG4gKiBQYXJzZSBhIGRlcml2YXRpb24gcGF0aCBhbmQgcmV0dXJuIGFuIGFycmF5IG9mIGluZGV4ZXMuXHJcbiAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2JpdGNvaW4vYmlwcy9ibG9iL21hc3Rlci9iaXAtMDA0NC5tZWRpYXdpa2lcclxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcclxuICogQHBhcmFtIHtCb29sZWFufSBoYXJkXHJcbiAqIEByZXR1cm5zIHtOdW1iZXJbXX1cclxuICovXHJcblxyXG5jb21tb24ucGFyc2VQYXRoID0gZnVuY3Rpb24gcGFyc2VQYXRoKHBhdGgsIGhhcmQpIHtcclxuICBhc3NlcnQodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKTtcclxuICBhc3NlcnQodHlwZW9mIGhhcmQgPT09ICdib29sZWFuJyk7XHJcbiAgYXNzZXJ0KHBhdGgubGVuZ3RoID49IDEpO1xyXG4gIGFzc2VydChwYXRoLmxlbmd0aCA8PSAzMDYyKTtcclxuXHJcbiAgY29uc3QgcGFydHMgPSBwYXRoLnNwbGl0KCcvJyk7XHJcbiAgY29uc3Qgcm9vdCA9IHBhcnRzWzBdO1xyXG5cclxuICBpZiAocm9vdCAhPT0gJ20nXHJcbiAgICAgICYmIHJvb3QgIT09ICdNJ1xyXG4gICAgICAmJiByb290ICE9PSAnbVxcJydcclxuICAgICAgJiYgcm9vdCAhPT0gJ01cXCcnKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcGF0aCByb290LicpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgcmVzdWx0ID0gW107XHJcblxyXG4gIGZvciAobGV0IGkgPSAxOyBpIDwgcGFydHMubGVuZ3RoOyBpKyspIHtcclxuICAgIGxldCBwYXJ0ID0gcGFydHNbaV07XHJcblxyXG4gICAgY29uc3QgaGFyZGVuZWQgPSBwYXJ0W3BhcnQubGVuZ3RoIC0gMV0gPT09ICdcXCcnO1xyXG5cclxuICAgIGlmIChoYXJkZW5lZClcclxuICAgICAgcGFydCA9IHBhcnQuc2xpY2UoMCwgLTEpO1xyXG5cclxuICAgIGlmIChwYXJ0Lmxlbmd0aCA+IDEwKVxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BhdGggaW5kZXggdG9vIGxhcmdlLicpO1xyXG5cclxuICAgIGlmICghL15cXGQrJC8udGVzdChwYXJ0KSlcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdQYXRoIGluZGV4IGlzIG5vbi1udW1lcmljLicpO1xyXG5cclxuICAgIGxldCBpbmRleCA9IHBhcnNlSW50KHBhcnQsIDEwKTtcclxuXHJcbiAgICBpZiAoKGluZGV4ID4+PiAwKSAhPT0gaW5kZXgpXHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignUGF0aCBpbmRleCBvdXQgb2YgcmFuZ2UuJyk7XHJcblxyXG4gICAgaWYgKGhhcmRlbmVkKSB7XHJcbiAgICAgIGluZGV4IHw9IGNvbW1vbi5IQVJERU5FRDtcclxuICAgICAgaW5kZXggPj4+PSAwO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghaGFyZCAmJiAoaW5kZXggJiBjb21tb24uSEFSREVORUQpKVxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BhdGggaW5kZXggY2Fubm90IGJlIGhhcmRlbmVkLicpO1xyXG5cclxuICAgIHJlc3VsdC5wdXNoKGluZGV4KTtcclxuICB9XHJcblxyXG4gIHJldHVybiByZXN1bHQ7XHJcbn07XHJcblxyXG4vKipcclxuICogVGVzdCB3aGV0aGVyIHRoZSBrZXkgaXMgYSBtYXN0ZXIga2V5LlxyXG4gKiBAcGFyYW0ge0hEUHJpdmF0ZUtleXxIRFB1YmxpY0tleX0ga2V5XHJcbiAqIEByZXR1cm5zIHtCb29sZWFufVxyXG4gKi9cclxuXHJcbmNvbW1vbi5pc01hc3RlciA9IGZ1bmN0aW9uIGlzTWFzdGVyKGtleSkge1xyXG4gIHJldHVybiBrZXkuZGVwdGggPT09IDBcclxuICAgICYmIGtleS5jaGlsZEluZGV4ID09PSAwXHJcbiAgICAmJiBrZXkucGFyZW50RmluZ2VyUHJpbnQgPT09IDA7XHJcbn07XHJcblxyXG4vKipcclxuICogVGVzdCB3aGV0aGVyIHRoZSBrZXkgaXMgKG1vc3QgbGlrZWx5KSBhIEJJUDQ0IGFjY291bnQga2V5LlxyXG4gKiBAcGFyYW0ge0hEUHJpdmF0ZUtleXxIRFB1YmxpY0tleX0ga2V5XHJcbiAqIEBwYXJhbSB7TnVtYmVyP30gYWNjb3VudFxyXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn1cclxuICovXHJcblxyXG5jb21tb24uaXNBY2NvdW50ID0gZnVuY3Rpb24gaXNBY2NvdW50KGtleSwgYWNjb3VudCkge1xyXG4gIGlmIChhY2NvdW50ICE9IG51bGwpIHtcclxuICAgIGNvbnN0IGluZGV4ID0gKGNvbW1vbi5IQVJERU5FRCB8IGFjY291bnQpID4+PiAwO1xyXG4gICAgaWYgKGtleS5jaGlsZEluZGV4ICE9PSBpbmRleClcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuICByZXR1cm4ga2V5LmRlcHRoID09PSAzICYmIChrZXkuY2hpbGRJbmRleCAmIGNvbW1vbi5IQVJERU5FRCkgIT09IDA7XHJcbn07XHJcblxyXG4vKipcclxuICogQSBjb21wcmVzc2VkIHB1YmtleSBvZiBhbGwgemVyb2VzLlxyXG4gKiBAY29uc3Qge0J1ZmZlcn1cclxuICogQGRlZmF1bHRcclxuICovXHJcblxyXG5jb21tb24uWkVST19LRVkgPSBCdWZmZXIuYWxsb2MoMzMsIDB4MDApO1xyXG4iXX0=