/*!
 * netaddress.js - network address object for bcoin
 * Copyright (c) 2014-2017, Christopher Jeffrey (MIT License).
 * https://github.com/bcoin-org/bcoin
 */'use strict';function cov_cqra83u3h(){var path="E:\\Projects\\Test\\bcoin\\lib\\net\\netaddress.js";var hash="42405953c94747fe8afec96ddc6698418ef59ffc";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"E:\\Projects\\Test\\bcoin\\lib\\net\\netaddress.js",statementMap:{"0":{start:{line:9,column:15},end:{line:9,column:31}},"1":{start:{line:10,column:12},end:{line:10,column:28}},"2":{start:{line:11,column:11},end:{line:11,column:27}},"3":{start:{line:12,column:16},end:{line:12,column:46}},"4":{start:{line:13,column:13},end:{line:13,column:37}},"5":{start:{line:14,column:15},end:{line:14,column:34}},"6":{start:{line:15,column:24},end:{line:15,column:43}},"7":{start:{line:39,column:4},end:{line:39,column:26}},"8":{start:{line:40,column:4},end:{line:40,column:18}},"9":{start:{line:41,column:4},end:{line:41,column:22}},"10":{start:{line:42,column:4},end:{line:42,column:18}},"11":{start:{line:43,column:4},end:{line:43,column:32}},"12":{start:{line:44,column:4},end:{line:44,column:26}},"13":{start:{line:46,column:4},end:{line:47,column:32}},"14":{start:{line:47,column:6},end:{line:47,column:32}},"15":{start:{line:57,column:4},end:{line:57,column:45}},"16":{start:{line:58,column:4},end:{line:58,column:45}},"17":{start:{line:60,column:4},end:{line:60,column:41}},"18":{start:{line:61,column:4},end:{line:61,column:38}},"19":{start:{line:62,column:4},end:{line:62,column:29}},"20":{start:{line:64,column:4},end:{line:67,column:5}},"21":{start:{line:65,column:6},end:{line:65,column:51}},"22":{start:{line:66,column:6},end:{line:66,column:39}},"23":{start:{line:69,column:4},end:{line:72,column:5}},"24":{start:{line:70,column:6},end:{line:70,column:47}},"25":{start:{line:71,column:6},end:{line:71,column:31}},"26":{start:{line:74,column:4},end:{line:74,column:56}},"27":{start:{line:76,column:4},end:{line:76,column:16}},"28":{start:{line:86,column:4},end:{line:86,column:43}},"29":{start:{line:96,column:4},end:{line:96,column:51}},"30":{start:{line:105,column:4},end:{line:105,column:31}},"31":{start:{line:114,column:4},end:{line:114,column:31}},"32":{start:{line:123,column:4},end:{line:123,column:31}},"33":{start:{line:132,column:4},end:{line:132,column:32}},"34":{start:{line:141,column:4},end:{line:141,column:32}},"35":{start:{line:150,column:4},end:{line:150,column:35}},"36":{start:{line:159,column:4},end:{line:159,column:32}},"37":{start:{line:168,column:4},end:{line:168,column:36}},"38":{start:{line:177,column:16},end:{line:177,column:42}},"39":{start:{line:179,column:4},end:{line:180,column:17}},"40":{start:{line:180,column:6},end:{line:180,column:17}},"41":{start:{line:182,column:4},end:{line:182,column:33}},"42":{start:{line:192,column:4},end:{line:192,column:50}},"43":{start:{line:200,column:4},end:{line:200,column:26}},"44":{start:{line:201,column:4},end:{line:201,column:26}},"45":{start:{line:202,column:4},end:{line:202,column:56}},"46":{start:{line:211,column:4},end:{line:211,column:33}},"47":{start:{line:212,column:4},end:{line:212,column:38}},"48":{start:{line:213,column:4},end:{line:213,column:56}},"49":{start:{line:222,column:4},end:{line:222,column:40}},"50":{start:{line:223,column:4},end:{line:223,column:21}},"51":{start:{line:224,column:4},end:{line:224,column:51}},"52":{start:{line:236,column:4},end:{line:236,column:35}},"53":{start:{line:238,column:4},end:{line:238,column:40}},"54":{start:{line:240,column:4},end:{line:240,column:33}},"55":{start:{line:241,column:4},end:{line:241,column:38}},"56":{start:{line:242,column:4},end:{line:242,column:21}},"57":{start:{line:243,column:4},end:{line:243,column:48}},"58":{start:{line:244,column:4},end:{line:244,column:30}},"59":{start:{line:246,column:4},end:{line:246,column:56}},"60":{start:{line:248,column:4},end:{line:248,column:16}},"61":{start:{line:261,column:4},end:{line:261,column:52}},"62":{start:{line:272,column:4},end:{line:272,column:35}},"63":{start:{line:274,column:17},end:{line:274,column:56}},"64":{start:{line:276,column:4},end:{line:276,column:56}},"65":{start:{line:288,column:4},end:{line:288,column:54}},"66":{start:{line:298,column:17},end:{line:298,column:37}},"67":{start:{line:299,column:17},end:{line:299,column:34}},"68":{start:{line:300,column:4},end:{line:300,column:37}},"69":{start:{line:301,column:4},end:{line:301,column:37}},"70":{start:{line:302,column:4},end:{line:302,column:60}},"71":{start:{line:313,column:4},end:{line:313,column:52}},"72":{start:{line:324,column:4},end:{line:324,column:40}},"73":{start:{line:325,column:4},end:{line:325,column:33}},"74":{start:{line:329,column:4},end:{line:329,column:17}},"75":{start:{line:331,column:4},end:{line:331,column:32}},"76":{start:{line:332,column:4},end:{line:332,column:38}},"77":{start:{line:333,column:4},end:{line:333,column:31}},"78":{start:{line:334,column:4},end:{line:334,column:56}},"79":{start:{line:336,column:4},end:{line:336,column:16}},"80":{start:{line:347,column:4},end:{line:347,column:49}},"81":{start:{line:358,column:4},end:{line:358,column:43}},"82":{start:{line:369,column:4},end:{line:369,column:42}},"83":{start:{line:380,column:4},end:{line:381,column:29}},"84":{start:{line:381,column:6},end:{line:381,column:29}},"85":{start:{line:383,column:4},end:{line:383,column:31}},"86":{start:{line:384,column:4},end:{line:384,column:19}},"87":{start:{line:385,column:4},end:{line:385,column:28}},"88":{start:{line:386,column:4},end:{line:386,column:29}},"89":{start:{line:388,column:4},end:{line:388,column:14}},"90":{start:{line:397,column:4},end:{line:397,column:31}},"91":{start:{line:407,column:17},end:{line:407,column:35}},"92":{start:{line:408,column:4},end:{line:408,column:57}},"93":{start:{line:417,column:4},end:{line:422,column:6}},"94":{start:{line:433,column:4},end:{line:433,column:47}},"95":{start:{line:434,column:4},end:{line:434,column:52}},"96":{start:{line:435,column:4},end:{line:435,column:44}},"97":{start:{line:436,column:4},end:{line:436,column:38}},"98":{start:{line:437,column:4},end:{line:437,column:26}},"99":{start:{line:438,column:4},end:{line:438,column:26}},"100":{start:{line:439,column:4},end:{line:439,column:34}},"101":{start:{line:440,column:4},end:{line:440,column:26}},"102":{start:{line:441,column:4},end:{line:441,column:56}},"103":{start:{line:442,column:4},end:{line:442,column:16}},"104":{start:{line:452,column:4},end:{line:452,column:37}},"105":{start:{line:461,column:4},end:{line:465,column:12}},"106":{start:{line:476,column:0},end:{line:479,column:26}},"107":{start:{line:485,column:0},end:{line:485,column:28}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:38,column:2},end:{line:38,column:3}},loc:{start:{line:38,column:23},end:{line:48,column:3}},line:38},"1":{name:"(anonymous_1)",decl:{start:{line:56,column:2},end:{line:56,column:3}},loc:{start:{line:56,column:23},end:{line:77,column:3}},line:56},"2":{name:"(anonymous_2)",decl:{start:{line:85,column:2},end:{line:85,column:3}},loc:{start:{line:85,column:30},end:{line:87,column:3}},line:85},"3":{name:"(anonymous_3)",decl:{start:{line:95,column:2},end:{line:95,column:3}},loc:{start:{line:95,column:24},end:{line:97,column:3}},line:95},"4":{name:"(anonymous_4)",decl:{start:{line:104,column:2},end:{line:104,column:3}},loc:{start:{line:104,column:11},end:{line:106,column:3}},line:104},"5":{name:"(anonymous_5)",decl:{start:{line:113,column:2},end:{line:113,column:3}},loc:{start:{line:113,column:11},end:{line:115,column:3}},line:113},"6":{name:"(anonymous_6)",decl:{start:{line:122,column:2},end:{line:122,column:3}},loc:{start:{line:122,column:11},end:{line:124,column:3}},line:122},"7":{name:"(anonymous_7)",decl:{start:{line:131,column:2},end:{line:131,column:3}},loc:{start:{line:131,column:12},end:{line:133,column:3}},line:131},"8":{name:"(anonymous_8)",decl:{start:{line:140,column:2},end:{line:140,column:3}},loc:{start:{line:140,column:12},end:{line:142,column:3}},line:140},"9":{name:"(anonymous_9)",decl:{start:{line:149,column:2},end:{line:149,column:3}},loc:{start:{line:149,column:15},end:{line:151,column:3}},line:149},"10":{name:"(anonymous_10)",decl:{start:{line:158,column:2},end:{line:158,column:3}},loc:{start:{line:158,column:12},end:{line:160,column:3}},line:158},"11":{name:"(anonymous_11)",decl:{start:{line:167,column:2},end:{line:167,column:3}},loc:{start:{line:167,column:14},end:{line:169,column:3}},line:167},"12":{name:"(anonymous_12)",decl:{start:{line:176,column:2},end:{line:176,column:3}},loc:{start:{line:176,column:16},end:{line:183,column:3}},line:176},"13":{name:"(anonymous_13)",decl:{start:{line:191,column:2},end:{line:191,column:3}},loc:{start:{line:191,column:24},end:{line:193,column:3}},line:191},"14":{name:"(anonymous_14)",decl:{start:{line:199,column:2},end:{line:199,column:3}},loc:{start:{line:199,column:12},end:{line:203,column:3}},line:199},"15":{name:"(anonymous_15)",decl:{start:{line:210,column:2},end:{line:210,column:3}},loc:{start:{line:210,column:16},end:{line:214,column:3}},line:210},"16":{name:"(anonymous_16)",decl:{start:{line:221,column:2},end:{line:221,column:3}},loc:{start:{line:221,column:16},end:{line:225,column:3}},line:221},"17":{name:"(anonymous_17)",decl:{start:{line:235,column:2},end:{line:235,column:3}},loc:{start:{line:235,column:32},end:{line:249,column:3}},line:235},"18":{name:"(anonymous_18)",decl:{start:{line:260,column:2},end:{line:260,column:3}},loc:{start:{line:260,column:39},end:{line:262,column:3}},line:260},"19":{name:"(anonymous_19)",decl:{start:{line:271,column:2},end:{line:271,column:3}},loc:{start:{line:271,column:34},end:{line:277,column:3}},line:271},"20":{name:"(anonymous_20)",decl:{start:{line:287,column:2},end:{line:287,column:3}},loc:{start:{line:287,column:41},end:{line:289,column:3}},line:287},"21":{name:"(anonymous_21)",decl:{start:{line:297,column:2},end:{line:297,column:3}},loc:{start:{line:297,column:30},end:{line:303,column:3}},line:297},"22":{name:"(anonymous_22)",decl:{start:{line:312,column:2},end:{line:312,column:3}},loc:{start:{line:312,column:39},end:{line:314,column:3}},line:312},"23":{name:"(anonymous_23)",decl:{start:{line:323,column:2},end:{line:323,column:3}},loc:{start:{line:323,column:23},end:{line:337,column:3}},line:323},"24":{name:"(anonymous_24)",decl:{start:{line:346,column:2},end:{line:346,column:3}},loc:{start:{line:346,column:22},end:{line:348,column:3}},line:346},"25":{name:"(anonymous_25)",decl:{start:{line:357,column:2},end:{line:357,column:3}},loc:{start:{line:357,column:30},end:{line:359,column:3}},line:357},"26":{name:"(anonymous_26)",decl:{start:{line:368,column:2},end:{line:368,column:3}},loc:{start:{line:368,column:29},end:{line:370,column:3}},line:368},"27":{name:"(anonymous_27)",decl:{start:{line:379,column:2},end:{line:379,column:3}},loc:{start:{line:379,column:21},end:{line:389,column:3}},line:379},"28":{name:"(anonymous_28)",decl:{start:{line:396,column:2},end:{line:396,column:3}},loc:{start:{line:396,column:16},end:{line:398,column:3}},line:396},"29":{name:"(anonymous_29)",decl:{start:{line:406,column:2},end:{line:406,column:3}},loc:{start:{line:406,column:14},end:{line:409,column:3}},line:406},"30":{name:"(anonymous_30)",decl:{start:{line:416,column:2},end:{line:416,column:3}},loc:{start:{line:416,column:11},end:{line:423,column:3}},line:416},"31":{name:"(anonymous_31)",decl:{start:{line:432,column:2},end:{line:432,column:3}},loc:{start:{line:432,column:17},end:{line:443,column:3}},line:432},"32":{name:"(anonymous_32)",decl:{start:{line:451,column:2},end:{line:451,column:3}},loc:{start:{line:451,column:24},end:{line:453,column:3}},line:451},"33":{name:"(anonymous_33)",decl:{start:{line:460,column:2},end:{line:460,column:3}},loc:{start:{line:460,column:20},end:{line:466,column:3}},line:460}},branchMap:{"0":{loc:{start:{line:46,column:4},end:{line:47,column:32}},type:"if",locations:[{start:{line:46,column:4},end:{line:47,column:32}},{start:{line:46,column:4},end:{line:47,column:32}}],line:46},"1":{loc:{start:{line:64,column:4},end:{line:67,column:5}},type:"if",locations:[{start:{line:64,column:4},end:{line:67,column:5}},{start:{line:64,column:4},end:{line:67,column:5}}],line:64},"2":{loc:{start:{line:69,column:4},end:{line:72,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:72,column:5}},{start:{line:69,column:4},end:{line:72,column:5}}],line:69},"3":{loc:{start:{line:179,column:4},end:{line:180,column:17}},type:"if",locations:[{start:{line:179,column:4},end:{line:180,column:17}},{start:{line:179,column:4},end:{line:180,column:17}}],line:179},"4":{loc:{start:{line:222,column:11},end:{line:222,column:38}},type:"binary-expr",locations:[{start:{line:222,column:11},end:{line:222,column:20}},{start:{line:222,column:24},end:{line:222,column:38}}],line:222},"5":{loc:{start:{line:238,column:11},end:{line:238,column:38}},type:"binary-expr",locations:[{start:{line:238,column:11},end:{line:238,column:20}},{start:{line:238,column:24},end:{line:238,column:38}}],line:238},"6":{loc:{start:{line:324,column:16},end:{line:324,column:39}},type:"cond-expr",locations:[{start:{line:324,column:23},end:{line:324,column:35}},{start:{line:324,column:38},end:{line:324,column:39}}],line:324},"7":{loc:{start:{line:380,column:4},end:{line:381,column:29}},type:"if",locations:[{start:{line:380,column:4},end:{line:381,column:29}},{start:{line:380,column:4},end:{line:381,column:29}}],line:380},"8":{loc:{start:{line:397,column:17},end:{line:397,column:29}},type:"cond-expr",locations:[{start:{line:397,column:24},end:{line:397,column:25}},{start:{line:397,column:28},end:{line:397,column:29}}],line:397}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"42405953c94747fe8afec96ddc6698418ef59ffc"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_cqra83u3h=function(){return actualCoverage;};}return actualCoverage;}cov_cqra83u3h();const assert=(cov_cqra83u3h().s[0]++,require('bsert'));const bio=(cov_cqra83u3h().s[1]++,require('bufio'));const IP=(cov_cqra83u3h().s[2]++,require('binet'));const Network=(cov_cqra83u3h().s[3]++,require('../protocol/network'));const util=(cov_cqra83u3h().s[4]++,require('../utils/util'));const common=(cov_cqra83u3h().s[5]++,require('./common'));const{inspectSymbol}=(cov_cqra83u3h().s[6]++,require('../utils'));/**
 * Net Address
 * Represents a network address.
 * @alias module:net.NetAddress
 * @property {Host} host
 * @property {Number} port
 * @property {Number} services
 * @property {Number} time
 */class NetAddress{/**
   * Create a network address.
   * @constructor
   * @param {Object} options
   * @param {Number?} options.time - Timestamp.
   * @param {Number?} options.services - Service bits.
   * @param {String?} options.host - IP address (IPv6 or IPv4).
   * @param {Number?} options.port - Port.
   */constructor(options){cov_cqra83u3h().f[0]++;cov_cqra83u3h().s[7]++;this.host='0.0.0.0';cov_cqra83u3h().s[8]++;this.port=0;cov_cqra83u3h().s[9]++;this.services=0;cov_cqra83u3h().s[10]++;this.time=0;cov_cqra83u3h().s[11]++;this.hostname='0.0.0.0:0';cov_cqra83u3h().s[12]++;this.raw=IP.ZERO_IP;cov_cqra83u3h().s[13]++;if(options){cov_cqra83u3h().b[0][0]++;cov_cqra83u3h().s[14]++;this.fromOptions(options);}else{cov_cqra83u3h().b[0][1]++;}}/**
   * Inject properties from options object.
   * @private
   * @param {Object} options
   */fromOptions(options){cov_cqra83u3h().f[1]++;cov_cqra83u3h().s[15]++;assert(typeof options.host==='string');cov_cqra83u3h().s[16]++;assert(typeof options.port==='number');cov_cqra83u3h().s[17]++;this.raw=IP.toBuffer(options.host);cov_cqra83u3h().s[18]++;this.host=IP.toString(this.raw);cov_cqra83u3h().s[19]++;this.port=options.port;cov_cqra83u3h().s[20]++;if(options.services){cov_cqra83u3h().b[1][0]++;cov_cqra83u3h().s[21]++;assert(typeof options.services==='number');cov_cqra83u3h().s[22]++;this.services=options.services;}else{cov_cqra83u3h().b[1][1]++;}cov_cqra83u3h().s[23]++;if(options.time){cov_cqra83u3h().b[2][0]++;cov_cqra83u3h().s[24]++;assert(typeof options.time==='number');cov_cqra83u3h().s[25]++;this.time=options.time;}else{cov_cqra83u3h().b[2][1]++;}cov_cqra83u3h().s[26]++;this.hostname=IP.toHostname(this.host,this.port);cov_cqra83u3h().s[27]++;return this;}/**
   * Instantiate network address from options.
   * @param {Object} options
   * @returns {NetAddress}
   */static fromOptions(options){cov_cqra83u3h().f[2]++;cov_cqra83u3h().s[28]++;return new this().fromOptions(options);}/**
   * Test whether required services are available.
   * @param {Number} services
   * @returns {Boolean}
   */hasServices(services){cov_cqra83u3h().f[3]++;cov_cqra83u3h().s[29]++;return(this.services&services)===services;}/**
   * Test whether the address is IPv4.
   * @returns {Boolean}
   */isIPv4(){cov_cqra83u3h().f[4]++;cov_cqra83u3h().s[30]++;return IP.isIPv4(this.raw);}/**
   * Test whether the address is IPv6.
   * @returns {Boolean}
   */isIPv6(){cov_cqra83u3h().f[5]++;cov_cqra83u3h().s[31]++;return IP.isIPv6(this.raw);}/**
   * Test whether the host is null.
   * @returns {Boolean}
   */isNull(){cov_cqra83u3h().f[6]++;cov_cqra83u3h().s[32]++;return IP.isNull(this.raw);}/**
   * Test whether the host is a local address.
   * @returns {Boolean}
   */isLocal(){cov_cqra83u3h().f[7]++;cov_cqra83u3h().s[33]++;return IP.isLocal(this.raw);}/**
   * Test whether the host is valid.
   * @returns {Boolean}
   */isValid(){cov_cqra83u3h().f[8]++;cov_cqra83u3h().s[34]++;return IP.isValid(this.raw);}/**
   * Test whether the host is routable.
   * @returns {Boolean}
   */isRoutable(){cov_cqra83u3h().f[9]++;cov_cqra83u3h().s[35]++;return IP.isRoutable(this.raw);}/**
   * Test whether the host is an onion address.
   * @returns {Boolean}
   */isOnion(){cov_cqra83u3h().f[10]++;cov_cqra83u3h().s[36]++;return IP.isOnion(this.raw);}/**
   * Compare against another network address.
   * @returns {Boolean}
   */equal(addr){cov_cqra83u3h().f[11]++;cov_cqra83u3h().s[37]++;return this.compare(addr)===0;}/**
   * Compare against another network address.
   * @returns {Number}
   */compare(addr){cov_cqra83u3h().f[12]++;const cmp=(cov_cqra83u3h().s[38]++,this.raw.compare(addr.raw));cov_cqra83u3h().s[39]++;if(cmp!==0){cov_cqra83u3h().b[3][0]++;cov_cqra83u3h().s[40]++;return cmp;}else{cov_cqra83u3h().b[3][1]++;}cov_cqra83u3h().s[41]++;return this.port-addr.port;}/**
   * Get reachable score to destination.
   * @param {NetAddress} dest
   * @returns {Number}
   */getReachability(dest){cov_cqra83u3h().f[13]++;cov_cqra83u3h().s[42]++;return IP.getReachability(this.raw,dest.raw);}/**
   * Set null host.
   */setNull(){cov_cqra83u3h().f[14]++;cov_cqra83u3h().s[43]++;this.raw=IP.ZERO_IP;cov_cqra83u3h().s[44]++;this.host='0.0.0.0';cov_cqra83u3h().s[45]++;this.hostname=IP.toHostname(this.host,this.port);}/**
   * Set host.
   * @param {String} host
   */setHost(host){cov_cqra83u3h().f[15]++;cov_cqra83u3h().s[46]++;this.raw=IP.toBuffer(host);cov_cqra83u3h().s[47]++;this.host=IP.toString(this.raw);cov_cqra83u3h().s[48]++;this.hostname=IP.toHostname(this.host,this.port);}/**
   * Set port.
   * @param {Number} port
   */setPort(port){cov_cqra83u3h().f[16]++;cov_cqra83u3h().s[49]++;assert((cov_cqra83u3h().b[4][0]++,port>=0)&&(cov_cqra83u3h().b[4][1]++,port<=0xffff));cov_cqra83u3h().s[50]++;this.port=port;cov_cqra83u3h().s[51]++;this.hostname=IP.toHostname(this.host,port);}/**
   * Inject properties from host, port, and network.
   * @private
   * @param {String} host
   * @param {Number} port
   * @param {(Network|NetworkType)?} network
   */fromHost(host,port,network){cov_cqra83u3h().f[17]++;cov_cqra83u3h().s[52]++;network=Network.get(network);cov_cqra83u3h().s[53]++;assert((cov_cqra83u3h().b[5][0]++,port>=0)&&(cov_cqra83u3h().b[5][1]++,port<=0xffff));cov_cqra83u3h().s[54]++;this.raw=IP.toBuffer(host);cov_cqra83u3h().s[55]++;this.host=IP.toString(this.raw);cov_cqra83u3h().s[56]++;this.port=port;cov_cqra83u3h().s[57]++;this.services=NetAddress.DEFAULT_SERVICES;cov_cqra83u3h().s[58]++;this.time=network.now();cov_cqra83u3h().s[59]++;this.hostname=IP.toHostname(this.host,this.port);cov_cqra83u3h().s[60]++;return this;}/**
   * Instantiate a network address
   * from a host and port.
   * @param {String} host
   * @param {Number} port
   * @param {(Network|NetworkType)?} network
   * @returns {NetAddress}
   */static fromHost(host,port,network){cov_cqra83u3h().f[18]++;cov_cqra83u3h().s[61]++;return new this().fromHost(host,port,network);}/**
   * Inject properties from hostname and network.
   * @private
   * @param {String} hostname
   * @param {(Network|NetworkType)?} network
   */fromHostname(hostname,network){cov_cqra83u3h().f[19]++;cov_cqra83u3h().s[62]++;network=Network.get(network);const addr=(cov_cqra83u3h().s[63]++,IP.fromHostname(hostname,network.port));cov_cqra83u3h().s[64]++;return this.fromHost(addr.host,addr.port,network);}/**
   * Instantiate a network address
   * from a hostname (i.e. 127.0.0.1:8333).
   * @param {String} hostname
   * @param {(Network|NetworkType)?} network
   * @returns {NetAddress}
   */static fromHostname(hostname,network){cov_cqra83u3h().f[20]++;cov_cqra83u3h().s[65]++;return new this().fromHostname(hostname,network);}/**
   * Inject properties from socket.
   * @private
   * @param {net.Socket} socket
   */fromSocket(socket,network){cov_cqra83u3h().f[21]++;const host=(cov_cqra83u3h().s[66]++,socket.remoteAddress);const port=(cov_cqra83u3h().s[67]++,socket.remotePort);cov_cqra83u3h().s[68]++;assert(typeof host==='string');cov_cqra83u3h().s[69]++;assert(typeof port==='number');cov_cqra83u3h().s[70]++;return this.fromHost(IP.normalize(host),port,network);}/**
   * Instantiate a network address
   * from a socket.
   * @param {net.Socket} socket
   * @returns {NetAddress}
   */static fromSocket(hostname,network){cov_cqra83u3h().f[22]++;cov_cqra83u3h().s[71]++;return new this().fromSocket(hostname,network);}/**
   * Inject properties from buffer reader.
   * @private
   * @param {BufferReader} br
   * @param {Boolean?} full - Include timestamp.
   */fromReader(br,full){cov_cqra83u3h().f[23]++;cov_cqra83u3h().s[72]++;this.time=full?(cov_cqra83u3h().b[6][0]++,br.readU32()):(cov_cqra83u3h().b[6][1]++,0);cov_cqra83u3h().s[73]++;this.services=br.readU32();// Note: hi service bits
// are currently unused.
cov_cqra83u3h().s[74]++;br.readU32();cov_cqra83u3h().s[75]++;this.raw=br.readBytes(16);cov_cqra83u3h().s[76]++;this.host=IP.toString(this.raw);cov_cqra83u3h().s[77]++;this.port=br.readU16BE();cov_cqra83u3h().s[78]++;this.hostname=IP.toHostname(this.host,this.port);cov_cqra83u3h().s[79]++;return this;}/**
   * Inject properties from serialized data.
   * @private
   * @param {Buffer} data
   * @param {Boolean?} full - Include timestamp.
   */fromRaw(data,full){cov_cqra83u3h().f[24]++;cov_cqra83u3h().s[80]++;return this.fromReader(bio.read(data),full);}/**
   * Insantiate a network address from buffer reader.
   * @param {BufferReader} br
   * @param {Boolean?} full - Include timestamp.
   * @returns {NetAddress}
   */static fromReader(br,full){cov_cqra83u3h().f[25]++;cov_cqra83u3h().s[81]++;return new this().fromReader(br,full);}/**
   * Insantiate a network address from serialized data.
   * @param {Buffer} data
   * @param {Boolean?} full - Include timestamp.
   * @returns {NetAddress}
   */static fromRaw(data,full){cov_cqra83u3h().f[26]++;cov_cqra83u3h().s[82]++;return new this().fromRaw(data,full);}/**
   * Write network address to a buffer writer.
   * @param {BufferWriter} bw
   * @param {Boolean?} full - Include timestamp.
   * @returns {Buffer}
   */toWriter(bw,full){cov_cqra83u3h().f[27]++;cov_cqra83u3h().s[83]++;if(full){cov_cqra83u3h().b[7][0]++;cov_cqra83u3h().s[84]++;bw.writeU32(this.time);}else{cov_cqra83u3h().b[7][1]++;}cov_cqra83u3h().s[85]++;bw.writeU32(this.services);cov_cqra83u3h().s[86]++;bw.writeU32(0);cov_cqra83u3h().s[87]++;bw.writeBytes(this.raw);cov_cqra83u3h().s[88]++;bw.writeU16BE(this.port);cov_cqra83u3h().s[89]++;return bw;}/**
   * Calculate serialization size of address.
   * @returns {Number}
   */getSize(full){cov_cqra83u3h().f[28]++;cov_cqra83u3h().s[90]++;return 26+(full?(cov_cqra83u3h().b[8][0]++,4):(cov_cqra83u3h().b[8][1]++,0));}/**
   * Serialize network address.
   * @param {Boolean?} full - Include timestamp.
   * @returns {Buffer}
   */toRaw(full){cov_cqra83u3h().f[29]++;const size=(cov_cqra83u3h().s[91]++,this.getSize(full));cov_cqra83u3h().s[92]++;return this.toWriter(bio.write(size),full).render();}/**
   * Convert net address to json-friendly object.
   * @returns {Object}
   */toJSON(){cov_cqra83u3h().f[30]++;cov_cqra83u3h().s[93]++;return{host:this.host,port:this.port,services:this.services,time:this.time};}/**
   * Inject properties from json object.
   * @private
   * @param {Object} json
   * @returns {NetAddress}
   */fromJSON(json){cov_cqra83u3h().f[31]++;cov_cqra83u3h().s[94]++;assert((json.port&0xffff)===json.port);cov_cqra83u3h().s[95]++;assert(json.services>>>0===json.services);cov_cqra83u3h().s[96]++;assert(json.time>>>0===json.time);cov_cqra83u3h().s[97]++;this.raw=IP.toBuffer(json.host);cov_cqra83u3h().s[98]++;this.host=json.host;cov_cqra83u3h().s[99]++;this.port=json.port;cov_cqra83u3h().s[100]++;this.services=json.services;cov_cqra83u3h().s[101]++;this.time=json.time;cov_cqra83u3h().s[102]++;this.hostname=IP.toHostname(this.host,this.port);cov_cqra83u3h().s[103]++;return this;}/**
   * Instantiate net address from json object.
   * @param {Object} json
   * @returns {NetAddress}
   */static fromJSON(json){cov_cqra83u3h().f[32]++;cov_cqra83u3h().s[104]++;return new this().fromJSON(json);}/**
   * Inspect the network address.
   * @returns {Object}
   */[inspectSymbol](){cov_cqra83u3h().f[33]++;cov_cqra83u3h().s[105]++;return'<NetAddress:'+` hostname=${this.hostname}`+` services=${this.services.toString(2)}`+` date=${util.date(this.time)}`+'>';}}/**
 * Default services for
 * unknown outbound peers.
 * @const {Number}
 * @default
 */cov_cqra83u3h().s[106]++;NetAddress.DEFAULT_SERVICES=0|common.services.NETWORK|common.services.WITNESS|common.services.BLOOM;/*
 * Expose
 */cov_cqra83u3h().s[107]++;module.exports=NetAddress;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5ldGFkZHJlc3MuanMiXSwibmFtZXMiOlsiYXNzZXJ0IiwicmVxdWlyZSIsImJpbyIsIklQIiwiTmV0d29yayIsInV0aWwiLCJjb21tb24iLCJpbnNwZWN0U3ltYm9sIiwiTmV0QWRkcmVzcyIsImNvbnN0cnVjdG9yIiwib3B0aW9ucyIsImhvc3QiLCJwb3J0Iiwic2VydmljZXMiLCJ0aW1lIiwiaG9zdG5hbWUiLCJyYXciLCJaRVJPX0lQIiwiZnJvbU9wdGlvbnMiLCJ0b0J1ZmZlciIsInRvU3RyaW5nIiwidG9Ib3N0bmFtZSIsImhhc1NlcnZpY2VzIiwiaXNJUHY0IiwiaXNJUHY2IiwiaXNOdWxsIiwiaXNMb2NhbCIsImlzVmFsaWQiLCJpc1JvdXRhYmxlIiwiaXNPbmlvbiIsImVxdWFsIiwiYWRkciIsImNvbXBhcmUiLCJjbXAiLCJnZXRSZWFjaGFiaWxpdHkiLCJkZXN0Iiwic2V0TnVsbCIsInNldEhvc3QiLCJzZXRQb3J0IiwiZnJvbUhvc3QiLCJuZXR3b3JrIiwiZ2V0IiwiREVGQVVMVF9TRVJWSUNFUyIsIm5vdyIsImZyb21Ib3N0bmFtZSIsImZyb21Tb2NrZXQiLCJzb2NrZXQiLCJyZW1vdGVBZGRyZXNzIiwicmVtb3RlUG9ydCIsIm5vcm1hbGl6ZSIsImZyb21SZWFkZXIiLCJiciIsImZ1bGwiLCJyZWFkVTMyIiwicmVhZEJ5dGVzIiwicmVhZFUxNkJFIiwiZnJvbVJhdyIsImRhdGEiLCJyZWFkIiwidG9Xcml0ZXIiLCJidyIsIndyaXRlVTMyIiwid3JpdGVCeXRlcyIsIndyaXRlVTE2QkUiLCJnZXRTaXplIiwidG9SYXciLCJzaXplIiwid3JpdGUiLCJyZW5kZXIiLCJ0b0pTT04iLCJmcm9tSlNPTiIsImpzb24iLCJkYXRlIiwiTkVUV09SSyIsIldJVE5FU1MiLCJCTE9PTSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FFQSxhLCs5Y0FTWTt5RkFQWixLQUFNQSxDQUFBQSxNQUFN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YixNQUFPLEtBQVAsQ0FDRCxDQUVEO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsS0FFRSxNQUFPMEQsQ0FBQUEsUUFBUCxDQUFnQkMsSUFBaEIsQ0FBc0Isa0RBQ3BCLE1BQU8sSUFBSSxLQUFKLEdBQVdELFFBQVgsQ0FBb0JDLElBQXBCLENBQVAsQ0FDRCxDQUVEO0FBQ0Y7QUFDQTtBQUNBLEtBRUUsQ0FBQ2hFLGFBQUQsR0FBa0Isa0RBQ2hCLE1BQU8sZUFDRixhQUFZLEtBQUtRLFFBQVMsRUFEeEIsQ0FFRixhQUFZLEtBQUtGLFFBQUwsQ0FBY08sUUFBZCxDQUF1QixDQUF2QixDQUEwQixFQUZwQyxDQUdGLFNBQVFmLElBQUksQ0FBQ21FLElBQUwsQ0FBVSxLQUFLMUQsSUFBZixDQUFxQixFQUgzQixDQUlILEdBSkosQ0FLRCxDQXZiYyxDQTBiakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEcseUJBRUFOLFVBQVUsQ0FBQ2tDLGdCQUFYLENBQThCLEVBQzFCcEMsTUFBTSxDQUFDTyxRQUFQLENBQWdCNEQsT0FEVSxDQUUxQm5FLE1BQU0sQ0FBQ08sUUFBUCxDQUFnQjZELE9BRlUsQ0FHMUJwRSxNQUFNLENBQUNPLFFBQVAsQ0FBZ0I4RCxLQUhwQixDQUtBO0FBQ0E7QUFDQSxHLHlCQUVBQyxNQUFNLENBQUNDLE9BQVAsQ0FBaUJyRSxVQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxyXG4gKiBuZXRhZGRyZXNzLmpzIC0gbmV0d29yayBhZGRyZXNzIG9iamVjdCBmb3IgYmNvaW5cclxuICogQ29weXJpZ2h0IChjKSAyMDE0LTIwMTcsIENocmlzdG9waGVyIEplZmZyZXkgKE1JVCBMaWNlbnNlKS5cclxuICogaHR0cHM6Ly9naXRodWIuY29tL2Jjb2luLW9yZy9iY29pblxyXG4gKi9cclxuXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbmNvbnN0IGFzc2VydCA9IHJlcXVpcmUoJ2JzZXJ0Jyk7XHJcbmNvbnN0IGJpbyA9IHJlcXVpcmUoJ2J1ZmlvJyk7XHJcbmNvbnN0IElQID0gcmVxdWlyZSgnYmluZXQnKTtcclxuY29uc3QgTmV0d29yayA9IHJlcXVpcmUoJy4uL3Byb3RvY29sL25ldHdvcmsnKTtcclxuY29uc3QgdXRpbCA9IHJlcXVpcmUoJy4uL3V0aWxzL3V0aWwnKTtcclxuY29uc3QgY29tbW9uID0gcmVxdWlyZSgnLi9jb21tb24nKTtcclxuY29uc3Qge2luc3BlY3RTeW1ib2x9ID0gcmVxdWlyZSgnLi4vdXRpbHMnKTtcclxuXHJcbi8qKlxyXG4gKiBOZXQgQWRkcmVzc1xyXG4gKiBSZXByZXNlbnRzIGEgbmV0d29yayBhZGRyZXNzLlxyXG4gKiBAYWxpYXMgbW9kdWxlOm5ldC5OZXRBZGRyZXNzXHJcbiAqIEBwcm9wZXJ0eSB7SG9zdH0gaG9zdFxyXG4gKiBAcHJvcGVydHkge051bWJlcn0gcG9ydFxyXG4gKiBAcHJvcGVydHkge051bWJlcn0gc2VydmljZXNcclxuICogQHByb3BlcnR5IHtOdW1iZXJ9IHRpbWVcclxuICovXHJcblxyXG5jbGFzcyBOZXRBZGRyZXNzIHtcclxuICAvKipcclxuICAgKiBDcmVhdGUgYSBuZXR3b3JrIGFkZHJlc3MuXHJcbiAgICogQGNvbnN0cnVjdG9yXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcclxuICAgKiBAcGFyYW0ge051bWJlcj99IG9wdGlvbnMudGltZSAtIFRpbWVzdGFtcC5cclxuICAgKiBAcGFyYW0ge051bWJlcj99IG9wdGlvbnMuc2VydmljZXMgLSBTZXJ2aWNlIGJpdHMuXHJcbiAgICogQHBhcmFtIHtTdHJpbmc/fSBvcHRpb25zLmhvc3QgLSBJUCBhZGRyZXNzIChJUHY2IG9yIElQdjQpLlxyXG4gICAqIEBwYXJhbSB7TnVtYmVyP30gb3B0aW9ucy5wb3J0IC0gUG9ydC5cclxuICAgKi9cclxuXHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgdGhpcy5ob3N0ID0gJzAuMC4wLjAnO1xyXG4gICAgdGhpcy5wb3J0ID0gMDtcclxuICAgIHRoaXMuc2VydmljZXMgPSAwO1xyXG4gICAgdGhpcy50aW1lID0gMDtcclxuICAgIHRoaXMuaG9zdG5hbWUgPSAnMC4wLjAuMDowJztcclxuICAgIHRoaXMucmF3ID0gSVAuWkVST19JUDtcclxuXHJcbiAgICBpZiAob3B0aW9ucylcclxuICAgICAgdGhpcy5mcm9tT3B0aW9ucyhvcHRpb25zKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEluamVjdCBwcm9wZXJ0aWVzIGZyb20gb3B0aW9ucyBvYmplY3QuXHJcbiAgICogQHByaXZhdGVcclxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xyXG4gICAqL1xyXG5cclxuICBmcm9tT3B0aW9ucyhvcHRpb25zKSB7XHJcbiAgICBhc3NlcnQodHlwZW9mIG9wdGlvbnMuaG9zdCA9PT0gJ3N0cmluZycpO1xyXG4gICAgYXNzZXJ0KHR5cGVvZiBvcHRpb25zLnBvcnQgPT09ICdudW1iZXInKTtcclxuXHJcbiAgICB0aGlzLnJhdyA9IElQLnRvQnVmZmVyKG9wdGlvbnMuaG9zdCk7XHJcbiAgICB0aGlzLmhvc3QgPSBJUC50b1N0cmluZyh0aGlzLnJhdyk7XHJcbiAgICB0aGlzLnBvcnQgPSBvcHRpb25zLnBvcnQ7XHJcblxyXG4gICAgaWYgKG9wdGlvbnMuc2VydmljZXMpIHtcclxuICAgICAgYXNzZXJ0KHR5cGVvZiBvcHRpb25zLnNlcnZpY2VzID09PSAnbnVtYmVyJyk7XHJcbiAgICAgIHRoaXMuc2VydmljZXMgPSBvcHRpb25zLnNlcnZpY2VzO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChvcHRpb25zLnRpbWUpIHtcclxuICAgICAgYXNzZXJ0KHR5cGVvZiBvcHRpb25zLnRpbWUgPT09ICdudW1iZXInKTtcclxuICAgICAgdGhpcy50aW1lID0gb3B0aW9ucy50aW1lO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuaG9zdG5hbWUgPSBJUC50b0hvc3RuYW1lKHRoaXMuaG9zdCwgdGhpcy5wb3J0KTtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEluc3RhbnRpYXRlIG5ldHdvcmsgYWRkcmVzcyBmcm9tIG9wdGlvbnMuXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcclxuICAgKiBAcmV0dXJucyB7TmV0QWRkcmVzc31cclxuICAgKi9cclxuXHJcbiAgc3RhdGljIGZyb21PcHRpb25zKG9wdGlvbnMpIHtcclxuICAgIHJldHVybiBuZXcgdGhpcygpLmZyb21PcHRpb25zKG9wdGlvbnMpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGVzdCB3aGV0aGVyIHJlcXVpcmVkIHNlcnZpY2VzIGFyZSBhdmFpbGFibGUuXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHNlcnZpY2VzXHJcbiAgICogQHJldHVybnMge0Jvb2xlYW59XHJcbiAgICovXHJcblxyXG4gIGhhc1NlcnZpY2VzKHNlcnZpY2VzKSB7XHJcbiAgICByZXR1cm4gKHRoaXMuc2VydmljZXMgJiBzZXJ2aWNlcykgPT09IHNlcnZpY2VzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGVzdCB3aGV0aGVyIHRoZSBhZGRyZXNzIGlzIElQdjQuXHJcbiAgICogQHJldHVybnMge0Jvb2xlYW59XHJcbiAgICovXHJcblxyXG4gIGlzSVB2NCgpIHtcclxuICAgIHJldHVybiBJUC5pc0lQdjQodGhpcy5yYXcpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGVzdCB3aGV0aGVyIHRoZSBhZGRyZXNzIGlzIElQdjYuXHJcbiAgICogQHJldHVybnMge0Jvb2xlYW59XHJcbiAgICovXHJcblxyXG4gIGlzSVB2NigpIHtcclxuICAgIHJldHVybiBJUC5pc0lQdjYodGhpcy5yYXcpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGVzdCB3aGV0aGVyIHRoZSBob3N0IGlzIG51bGwuXHJcbiAgICogQHJldHVybnMge0Jvb2xlYW59XHJcbiAgICovXHJcblxyXG4gIGlzTnVsbCgpIHtcclxuICAgIHJldHVybiBJUC5pc051bGwodGhpcy5yYXcpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGVzdCB3aGV0aGVyIHRoZSBob3N0IGlzIGEgbG9jYWwgYWRkcmVzcy5cclxuICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cclxuICAgKi9cclxuXHJcbiAgaXNMb2NhbCgpIHtcclxuICAgIHJldHVybiBJUC5pc0xvY2FsKHRoaXMucmF3KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRlc3Qgd2hldGhlciB0aGUgaG9zdCBpcyB2YWxpZC5cclxuICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cclxuICAgKi9cclxuXHJcbiAgaXNWYWxpZCgpIHtcclxuICAgIHJldHVybiBJUC5pc1ZhbGlkKHRoaXMucmF3KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRlc3Qgd2hldGhlciB0aGUgaG9zdCBpcyByb3V0YWJsZS5cclxuICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cclxuICAgKi9cclxuXHJcbiAgaXNSb3V0YWJsZSgpIHtcclxuICAgIHJldHVybiBJUC5pc1JvdXRhYmxlKHRoaXMucmF3KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRlc3Qgd2hldGhlciB0aGUgaG9zdCBpcyBhbiBvbmlvbiBhZGRyZXNzLlxyXG4gICAqIEByZXR1cm5zIHtCb29sZWFufVxyXG4gICAqL1xyXG5cclxuICBpc09uaW9uKCkge1xyXG4gICAgcmV0dXJuIElQLmlzT25pb24odGhpcy5yYXcpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ29tcGFyZSBhZ2FpbnN0IGFub3RoZXIgbmV0d29yayBhZGRyZXNzLlxyXG4gICAqIEByZXR1cm5zIHtCb29sZWFufVxyXG4gICAqL1xyXG5cclxuICBlcXVhbChhZGRyKSB7XHJcbiAgICByZXR1cm4gdGhpcy5jb21wYXJlKGFkZHIpID09PSAwO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ29tcGFyZSBhZ2FpbnN0IGFub3RoZXIgbmV0d29yayBhZGRyZXNzLlxyXG4gICAqIEByZXR1cm5zIHtOdW1iZXJ9XHJcbiAgICovXHJcblxyXG4gIGNvbXBhcmUoYWRkcikge1xyXG4gICAgY29uc3QgY21wID0gdGhpcy5yYXcuY29tcGFyZShhZGRyLnJhdyk7XHJcblxyXG4gICAgaWYgKGNtcCAhPT0gMClcclxuICAgICAgcmV0dXJuIGNtcDtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5wb3J0IC0gYWRkci5wb3J0O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHJlYWNoYWJsZSBzY29yZSB0byBkZXN0aW5hdGlvbi5cclxuICAgKiBAcGFyYW0ge05ldEFkZHJlc3N9IGRlc3RcclxuICAgKiBAcmV0dXJucyB7TnVtYmVyfVxyXG4gICAqL1xyXG5cclxuICBnZXRSZWFjaGFiaWxpdHkoZGVzdCkge1xyXG4gICAgcmV0dXJuIElQLmdldFJlYWNoYWJpbGl0eSh0aGlzLnJhdywgZGVzdC5yYXcpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0IG51bGwgaG9zdC5cclxuICAgKi9cclxuXHJcbiAgc2V0TnVsbCgpIHtcclxuICAgIHRoaXMucmF3ID0gSVAuWkVST19JUDtcclxuICAgIHRoaXMuaG9zdCA9ICcwLjAuMC4wJztcclxuICAgIHRoaXMuaG9zdG5hbWUgPSBJUC50b0hvc3RuYW1lKHRoaXMuaG9zdCwgdGhpcy5wb3J0KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldCBob3N0LlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBob3N0XHJcbiAgICovXHJcblxyXG4gIHNldEhvc3QoaG9zdCkge1xyXG4gICAgdGhpcy5yYXcgPSBJUC50b0J1ZmZlcihob3N0KTtcclxuICAgIHRoaXMuaG9zdCA9IElQLnRvU3RyaW5nKHRoaXMucmF3KTtcclxuICAgIHRoaXMuaG9zdG5hbWUgPSBJUC50b0hvc3RuYW1lKHRoaXMuaG9zdCwgdGhpcy5wb3J0KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldCBwb3J0LlxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBwb3J0XHJcbiAgICovXHJcblxyXG4gIHNldFBvcnQocG9ydCkge1xyXG4gICAgYXNzZXJ0KHBvcnQgPj0gMCAmJiBwb3J0IDw9IDB4ZmZmZik7XHJcbiAgICB0aGlzLnBvcnQgPSBwb3J0O1xyXG4gICAgdGhpcy5ob3N0bmFtZSA9IElQLnRvSG9zdG5hbWUodGhpcy5ob3N0LCBwb3J0KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEluamVjdCBwcm9wZXJ0aWVzIGZyb20gaG9zdCwgcG9ydCwgYW5kIG5ldHdvcmsuXHJcbiAgICogQHByaXZhdGVcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gaG9zdFxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBwb3J0XHJcbiAgICogQHBhcmFtIHsoTmV0d29ya3xOZXR3b3JrVHlwZSk/fSBuZXR3b3JrXHJcbiAgICovXHJcblxyXG4gIGZyb21Ib3N0KGhvc3QsIHBvcnQsIG5ldHdvcmspIHtcclxuICAgIG5ldHdvcmsgPSBOZXR3b3JrLmdldChuZXR3b3JrKTtcclxuXHJcbiAgICBhc3NlcnQocG9ydCA+PSAwICYmIHBvcnQgPD0gMHhmZmZmKTtcclxuXHJcbiAgICB0aGlzLnJhdyA9IElQLnRvQnVmZmVyKGhvc3QpO1xyXG4gICAgdGhpcy5ob3N0ID0gSVAudG9TdHJpbmcodGhpcy5yYXcpO1xyXG4gICAgdGhpcy5wb3J0ID0gcG9ydDtcclxuICAgIHRoaXMuc2VydmljZXMgPSBOZXRBZGRyZXNzLkRFRkFVTFRfU0VSVklDRVM7XHJcbiAgICB0aGlzLnRpbWUgPSBuZXR3b3JrLm5vdygpO1xyXG5cclxuICAgIHRoaXMuaG9zdG5hbWUgPSBJUC50b0hvc3RuYW1lKHRoaXMuaG9zdCwgdGhpcy5wb3J0KTtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEluc3RhbnRpYXRlIGEgbmV0d29yayBhZGRyZXNzXHJcbiAgICogZnJvbSBhIGhvc3QgYW5kIHBvcnQuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGhvc3RcclxuICAgKiBAcGFyYW0ge051bWJlcn0gcG9ydFxyXG4gICAqIEBwYXJhbSB7KE5ldHdvcmt8TmV0d29ya1R5cGUpP30gbmV0d29ya1xyXG4gICAqIEByZXR1cm5zIHtOZXRBZGRyZXNzfVxyXG4gICAqL1xyXG5cclxuICBzdGF0aWMgZnJvbUhvc3QoaG9zdCwgcG9ydCwgbmV0d29yaykge1xyXG4gICAgcmV0dXJuIG5ldyB0aGlzKCkuZnJvbUhvc3QoaG9zdCwgcG9ydCwgbmV0d29yayk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbmplY3QgcHJvcGVydGllcyBmcm9tIGhvc3RuYW1lIGFuZCBuZXR3b3JrLlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGhvc3RuYW1lXHJcbiAgICogQHBhcmFtIHsoTmV0d29ya3xOZXR3b3JrVHlwZSk/fSBuZXR3b3JrXHJcbiAgICovXHJcblxyXG4gIGZyb21Ib3N0bmFtZShob3N0bmFtZSwgbmV0d29yaykge1xyXG4gICAgbmV0d29yayA9IE5ldHdvcmsuZ2V0KG5ldHdvcmspO1xyXG5cclxuICAgIGNvbnN0IGFkZHIgPSBJUC5mcm9tSG9zdG5hbWUoaG9zdG5hbWUsIG5ldHdvcmsucG9ydCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuZnJvbUhvc3QoYWRkci5ob3N0LCBhZGRyLnBvcnQsIG5ldHdvcmspO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSW5zdGFudGlhdGUgYSBuZXR3b3JrIGFkZHJlc3NcclxuICAgKiBmcm9tIGEgaG9zdG5hbWUgKGkuZS4gMTI3LjAuMC4xOjgzMzMpLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBob3N0bmFtZVxyXG4gICAqIEBwYXJhbSB7KE5ldHdvcmt8TmV0d29ya1R5cGUpP30gbmV0d29ya1xyXG4gICAqIEByZXR1cm5zIHtOZXRBZGRyZXNzfVxyXG4gICAqL1xyXG5cclxuICBzdGF0aWMgZnJvbUhvc3RuYW1lKGhvc3RuYW1lLCBuZXR3b3JrKSB7XHJcbiAgICByZXR1cm4gbmV3IHRoaXMoKS5mcm9tSG9zdG5hbWUoaG9zdG5hbWUsIG5ldHdvcmspO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSW5qZWN0IHByb3BlcnRpZXMgZnJvbSBzb2NrZXQuXHJcbiAgICogQHByaXZhdGVcclxuICAgKiBAcGFyYW0ge25ldC5Tb2NrZXR9IHNvY2tldFxyXG4gICAqL1xyXG5cclxuICBmcm9tU29ja2V0KHNvY2tldCwgbmV0d29yaykge1xyXG4gICAgY29uc3QgaG9zdCA9IHNvY2tldC5yZW1vdGVBZGRyZXNzO1xyXG4gICAgY29uc3QgcG9ydCA9IHNvY2tldC5yZW1vdGVQb3J0O1xyXG4gICAgYXNzZXJ0KHR5cGVvZiBob3N0ID09PSAnc3RyaW5nJyk7XHJcbiAgICBhc3NlcnQodHlwZW9mIHBvcnQgPT09ICdudW1iZXInKTtcclxuICAgIHJldHVybiB0aGlzLmZyb21Ib3N0KElQLm5vcm1hbGl6ZShob3N0KSwgcG9ydCwgbmV0d29yayk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbnN0YW50aWF0ZSBhIG5ldHdvcmsgYWRkcmVzc1xyXG4gICAqIGZyb20gYSBzb2NrZXQuXHJcbiAgICogQHBhcmFtIHtuZXQuU29ja2V0fSBzb2NrZXRcclxuICAgKiBAcmV0dXJucyB7TmV0QWRkcmVzc31cclxuICAgKi9cclxuXHJcbiAgc3RhdGljIGZyb21Tb2NrZXQoaG9zdG5hbWUsIG5ldHdvcmspIHtcclxuICAgIHJldHVybiBuZXcgdGhpcygpLmZyb21Tb2NrZXQoaG9zdG5hbWUsIG5ldHdvcmspO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSW5qZWN0IHByb3BlcnRpZXMgZnJvbSBidWZmZXIgcmVhZGVyLlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICogQHBhcmFtIHtCdWZmZXJSZWFkZXJ9IGJyXHJcbiAgICogQHBhcmFtIHtCb29sZWFuP30gZnVsbCAtIEluY2x1ZGUgdGltZXN0YW1wLlxyXG4gICAqL1xyXG5cclxuICBmcm9tUmVhZGVyKGJyLCBmdWxsKSB7XHJcbiAgICB0aGlzLnRpbWUgPSBmdWxsID8gYnIucmVhZFUzMigpIDogMDtcclxuICAgIHRoaXMuc2VydmljZXMgPSBici5yZWFkVTMyKCk7XHJcblxyXG4gICAgLy8gTm90ZTogaGkgc2VydmljZSBiaXRzXHJcbiAgICAvLyBhcmUgY3VycmVudGx5IHVudXNlZC5cclxuICAgIGJyLnJlYWRVMzIoKTtcclxuXHJcbiAgICB0aGlzLnJhdyA9IGJyLnJlYWRCeXRlcygxNik7XHJcbiAgICB0aGlzLmhvc3QgPSBJUC50b1N0cmluZyh0aGlzLnJhdyk7XHJcbiAgICB0aGlzLnBvcnQgPSBici5yZWFkVTE2QkUoKTtcclxuICAgIHRoaXMuaG9zdG5hbWUgPSBJUC50b0hvc3RuYW1lKHRoaXMuaG9zdCwgdGhpcy5wb3J0KTtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEluamVjdCBwcm9wZXJ0aWVzIGZyb20gc2VyaWFsaXplZCBkYXRhLlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICogQHBhcmFtIHtCdWZmZXJ9IGRhdGFcclxuICAgKiBAcGFyYW0ge0Jvb2xlYW4/fSBmdWxsIC0gSW5jbHVkZSB0aW1lc3RhbXAuXHJcbiAgICovXHJcblxyXG4gIGZyb21SYXcoZGF0YSwgZnVsbCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZnJvbVJlYWRlcihiaW8ucmVhZChkYXRhKSwgZnVsbCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbnNhbnRpYXRlIGEgbmV0d29yayBhZGRyZXNzIGZyb20gYnVmZmVyIHJlYWRlci5cclxuICAgKiBAcGFyYW0ge0J1ZmZlclJlYWRlcn0gYnJcclxuICAgKiBAcGFyYW0ge0Jvb2xlYW4/fSBmdWxsIC0gSW5jbHVkZSB0aW1lc3RhbXAuXHJcbiAgICogQHJldHVybnMge05ldEFkZHJlc3N9XHJcbiAgICovXHJcblxyXG4gIHN0YXRpYyBmcm9tUmVhZGVyKGJyLCBmdWxsKSB7XHJcbiAgICByZXR1cm4gbmV3IHRoaXMoKS5mcm9tUmVhZGVyKGJyLCBmdWxsKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEluc2FudGlhdGUgYSBuZXR3b3JrIGFkZHJlc3MgZnJvbSBzZXJpYWxpemVkIGRhdGEuXHJcbiAgICogQHBhcmFtIHtCdWZmZXJ9IGRhdGFcclxuICAgKiBAcGFyYW0ge0Jvb2xlYW4/fSBmdWxsIC0gSW5jbHVkZSB0aW1lc3RhbXAuXHJcbiAgICogQHJldHVybnMge05ldEFkZHJlc3N9XHJcbiAgICovXHJcblxyXG4gIHN0YXRpYyBmcm9tUmF3KGRhdGEsIGZ1bGwpIHtcclxuICAgIHJldHVybiBuZXcgdGhpcygpLmZyb21SYXcoZGF0YSwgZnVsbCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBXcml0ZSBuZXR3b3JrIGFkZHJlc3MgdG8gYSBidWZmZXIgd3JpdGVyLlxyXG4gICAqIEBwYXJhbSB7QnVmZmVyV3JpdGVyfSBid1xyXG4gICAqIEBwYXJhbSB7Qm9vbGVhbj99IGZ1bGwgLSBJbmNsdWRlIHRpbWVzdGFtcC5cclxuICAgKiBAcmV0dXJucyB7QnVmZmVyfVxyXG4gICAqL1xyXG5cclxuICB0b1dyaXRlcihidywgZnVsbCkge1xyXG4gICAgaWYgKGZ1bGwpXHJcbiAgICAgIGJ3LndyaXRlVTMyKHRoaXMudGltZSk7XHJcblxyXG4gICAgYncud3JpdGVVMzIodGhpcy5zZXJ2aWNlcyk7XHJcbiAgICBidy53cml0ZVUzMigwKTtcclxuICAgIGJ3LndyaXRlQnl0ZXModGhpcy5yYXcpO1xyXG4gICAgYncud3JpdGVVMTZCRSh0aGlzLnBvcnQpO1xyXG5cclxuICAgIHJldHVybiBidztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENhbGN1bGF0ZSBzZXJpYWxpemF0aW9uIHNpemUgb2YgYWRkcmVzcy5cclxuICAgKiBAcmV0dXJucyB7TnVtYmVyfVxyXG4gICAqL1xyXG5cclxuICBnZXRTaXplKGZ1bGwpIHtcclxuICAgIHJldHVybiAyNiArIChmdWxsID8gNCA6IDApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2VyaWFsaXplIG5ldHdvcmsgYWRkcmVzcy5cclxuICAgKiBAcGFyYW0ge0Jvb2xlYW4/fSBmdWxsIC0gSW5jbHVkZSB0aW1lc3RhbXAuXHJcbiAgICogQHJldHVybnMge0J1ZmZlcn1cclxuICAgKi9cclxuXHJcbiAgdG9SYXcoZnVsbCkge1xyXG4gICAgY29uc3Qgc2l6ZSA9IHRoaXMuZ2V0U2l6ZShmdWxsKTtcclxuICAgIHJldHVybiB0aGlzLnRvV3JpdGVyKGJpby53cml0ZShzaXplKSwgZnVsbCkucmVuZGVyKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDb252ZXJ0IG5ldCBhZGRyZXNzIHRvIGpzb24tZnJpZW5kbHkgb2JqZWN0LlxyXG4gICAqIEByZXR1cm5zIHtPYmplY3R9XHJcbiAgICovXHJcblxyXG4gIHRvSlNPTigpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGhvc3Q6IHRoaXMuaG9zdCxcclxuICAgICAgcG9ydDogdGhpcy5wb3J0LFxyXG4gICAgICBzZXJ2aWNlczogdGhpcy5zZXJ2aWNlcyxcclxuICAgICAgdGltZTogdGhpcy50aW1lXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSW5qZWN0IHByb3BlcnRpZXMgZnJvbSBqc29uIG9iamVjdC5cclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBqc29uXHJcbiAgICogQHJldHVybnMge05ldEFkZHJlc3N9XHJcbiAgICovXHJcblxyXG4gIGZyb21KU09OKGpzb24pIHtcclxuICAgIGFzc2VydCgoanNvbi5wb3J0ICYgMHhmZmZmKSA9PT0ganNvbi5wb3J0KTtcclxuICAgIGFzc2VydCgoanNvbi5zZXJ2aWNlcyA+Pj4gMCkgPT09IGpzb24uc2VydmljZXMpO1xyXG4gICAgYXNzZXJ0KChqc29uLnRpbWUgPj4+IDApID09PSBqc29uLnRpbWUpO1xyXG4gICAgdGhpcy5yYXcgPSBJUC50b0J1ZmZlcihqc29uLmhvc3QpO1xyXG4gICAgdGhpcy5ob3N0ID0ganNvbi5ob3N0O1xyXG4gICAgdGhpcy5wb3J0ID0ganNvbi5wb3J0O1xyXG4gICAgdGhpcy5zZXJ2aWNlcyA9IGpzb24uc2VydmljZXM7XHJcbiAgICB0aGlzLnRpbWUgPSBqc29uLnRpbWU7XHJcbiAgICB0aGlzLmhvc3RuYW1lID0gSVAudG9Ib3N0bmFtZSh0aGlzLmhvc3QsIHRoaXMucG9ydCk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEluc3RhbnRpYXRlIG5ldCBhZGRyZXNzIGZyb20ganNvbiBvYmplY3QuXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGpzb25cclxuICAgKiBAcmV0dXJucyB7TmV0QWRkcmVzc31cclxuICAgKi9cclxuXHJcbiAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcclxuICAgIHJldHVybiBuZXcgdGhpcygpLmZyb21KU09OKGpzb24pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSW5zcGVjdCB0aGUgbmV0d29yayBhZGRyZXNzLlxyXG4gICAqIEByZXR1cm5zIHtPYmplY3R9XHJcbiAgICovXHJcblxyXG4gIFtpbnNwZWN0U3ltYm9sXSgpIHtcclxuICAgIHJldHVybiAnPE5ldEFkZHJlc3M6J1xyXG4gICAgICArIGAgaG9zdG5hbWU9JHt0aGlzLmhvc3RuYW1lfWBcclxuICAgICAgKyBgIHNlcnZpY2VzPSR7dGhpcy5zZXJ2aWNlcy50b1N0cmluZygyKX1gXHJcbiAgICAgICsgYCBkYXRlPSR7dXRpbC5kYXRlKHRoaXMudGltZSl9YFxyXG4gICAgICArICc+JztcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEZWZhdWx0IHNlcnZpY2VzIGZvclxyXG4gKiB1bmtub3duIG91dGJvdW5kIHBlZXJzLlxyXG4gKiBAY29uc3Qge051bWJlcn1cclxuICogQGRlZmF1bHRcclxuICovXHJcblxyXG5OZXRBZGRyZXNzLkRFRkFVTFRfU0VSVklDRVMgPSAwXHJcbiAgfCBjb21tb24uc2VydmljZXMuTkVUV09SS1xyXG4gIHwgY29tbW9uLnNlcnZpY2VzLldJVE5FU1NcclxuICB8IGNvbW1vbi5zZXJ2aWNlcy5CTE9PTTtcclxuXHJcbi8qXHJcbiAqIEV4cG9zZVxyXG4gKi9cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gTmV0QWRkcmVzcztcclxuIl19